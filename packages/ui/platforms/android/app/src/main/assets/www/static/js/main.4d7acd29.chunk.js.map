{"version":3,"sources":["components/css/app.module.css","components/css/header.module.css","images/logo.svg","components/css/cookie-box.module.css","components/css/notification.module.css","images/pref-accessible-white.svg","images/pref-cost-white.svg","images/pref-open-white.svg","images/pref-male-white.svg","images/pref-female-white.svg","images/pref-babychanging-white.svg","images/marker-icon.png","images/marker-icon-2x.png","images/marker-icon-highlight.png","images/marker-icon-highlight-2x.png","pages/css/preferences-page.module.css","images/pref-accessible.svg","images/pref-cost.svg","images/pref-open.svg","images/pref-male.svg","components/css/layout.module.css","images/pref-female.svg","images/pref-babychanging.svg","css/headings.module.css","components/css/loo-map.module.css","serviceWorker.js","redux/modules/geolocation.js","components/App.js","components/ProtectedRoute.js","history.js","Auth.js","redux/modules/auth.js","components/Logo.js","components/Header.js","components/Tracking/CookieBoxButton.js","components/Footer.js","config.js","components/Tracking/AdobeTracking.js","components/Tracking/CookieBox.js","components/Tracking/Tracking.js","components/PageLayout.js","components/Notification.js","pages/AuthCallback.js","redux/modules/loos.js","redux/modules/mapControls.js","components/Loading.js","components/PreferenceIndicators.js","../../leaflet-control-geocoder/src/util.js","../../leaflet-control-geocoder/src/geocoders/nominatim.js","../../leaflet-control-geocoder/src/control.js","../../leaflet-control-geocoder/src/geocoders/bing.js","../../leaflet-control-geocoder/src/geocoders/mapquest.js","../../leaflet-control-geocoder/src/geocoders/mapbox.js","../../leaflet-control-geocoder/src/geocoders/what3words.js","../../leaflet-control-geocoder/src/geocoders/google.js","../../leaflet-control-geocoder/src/geocoders/photon.js","../../leaflet-control-geocoder/src/geocoders/mapzen.js","../../leaflet-control-geocoder/src/geocoders/arcgis.js","../../leaflet-control-geocoder/src/geocoders/here.js","../../leaflet-control-geocoder/src/index.js","components/GeolocationMapControl.js","components/LocateMapControl.js","components/NewLogo.js","components/LooMap.js","components/NearestLooMap.js","../../api-client/src/mappings.js","../../api-client/index.js","pages/LooPage.js","pages/RemovePage.js","components/DismissableBox.js","components/LooListItem.js","redux/modules/app.js","pages/HomePage.js","pages/AboutPage.js","pages/AddEditPage.js","pages/LoginPage.js","pages/PreferencesPage.js","pages/ThanksPage.js","pages/MapPage.js","pages/UseOurLoosPage.js","pages/PrivacyPage.js","pages/404.js","redux/sagas/geolocation.js","redux/sagas/mapControls.js","index.js","redux/sagas/auth.js","redux/sagas/loos.js","components/css/footer.module.css","pages/css/edit-loo-page.module.css","components/css/logo.module.css","pages/css/loo-page.module.css","components/css/loo-list-item.module.css","pages/css/home-page.module.css","pages/css/map-page.module.css","pages/css/notfound.module.css","css/lists.module.css","css/controls.module.css","../../opening-hours/index.js","images/domestos_use_our_loos_logo.png","css/helpers.module.css","components/css/preference-indicators.module.css","components/css/dismissable-box.module.css","components/css/cookie-box-button.module.css"],"names":["module","exports","isLocalhost","Boolean","window","location","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","fetch","then","response","contentType","headers","get","status","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","alert","onUpdate","onSuccess","error","GET_GEOLOCATION_REQUEST","GET_GEOLOCATION_SUCCESS","GET_GEOLOCATION_ERROR","actionGetGeolocationRequest","type","actions","position","payload","ACTION_HANDLERS","action","coords","lng","longitude","lat","latitude","App","this","props","geolocation","cordova","document","map","center","children","className","styles","wrapper","Component","mapDispatchToProps","withRouter","connect","mapControls","ProtectedRoute","auth","component","rest","Route","render","isAuthenticated","redirectOnNextLogin","Redirect","to","createHistory","Auth","auth0","WebAuth","domain","clientID","redirectUri","responseType","audience","scope","login","bind","logout","handleAuthentication","getAccessToken","fetchProfile","Promise","resolve","reject","parseHash","err","authResult","accessToken","idToken","setSession","expiresAt","JSON","stringify","expiresIn","Date","getTime","localStorage","setItem","getItem","Error","client","userInfo","profile","name","parse","authorize","removeItem","history","replace","LOGIN","LOGOUT","actionLogin","actionLogout","actionLoggedIn","HANDLERS","initialState","getProfile","Link","title","src","logo","alt","image","Header","header","Logo","CookieBoxButton","onClick","cookieButtonWrapper","btn","role","aria-label","Footer","footer","footerList","footerListItem","footerItem","footerItemText","onCookieBoxButtonClick","PREFERENCES_KEY","viewport","mobile","analyticsId","nearestRadius","nearestListLimit","initialZoom","minZoom","maxZoom","editMinZoom","allowAddEditLoo","showBackButtons","fallbackLocation","getStage","getSettings","namespace","getSetting","key","defaultVal","val","undefined","setSetting","settings","setSettings","obj","checkPreferences","loo","preferences","result","Object","keys","length","free","accessible","open","male","female","babychanging","forEach","value","properties","toLowerCase","isOpen","test","Staging","Helmet","async","Production","PreferenceCheckbox","checked","onChange","controls","preferenceWrapper","preferenceInput","preference","CookieBox","context","handleSubmit","evt","preventDefault","onSubmit","aaAccepted","gaAccepted","popupBody","setState","target","React","defaultProps","TRACKING_STATE_CHOSEN","becomeFalse","oldVal","newVal","Tracking","configNS","saveTrackingLevel","oldVals","trackingState","onClose","AdobeTracking","id","renderTracking","PageLayout","cookieSettingsOpen","mainRef","createRef","handleCookieBoxButtonClick","handleClose","prevProps","prevState","current","scrollTop","layout","appContainer","mainContainer","main","ref","content","cloneElement","minWidth","data-testid","mapContainer","Notification","notification","aria-live","Callback","hash","loggedIn","setName","push","redirectOnLogin","FIND_NEARBY_REQUEST","FIND_NEARBY_SUCCESS","FIND_BY_ID_REQUEST","REPORT_REQUEST","REMOVE_REQUEST","actionFindNearbyRequest","radius","actionFindNearbyStart","actionFindNearbySuccess","loos","actionFindByIdRequest","actionFindByIdSuccess","actionUncacheById","actionReportSuccess","actionRemoveSuccess","byId","_","omit","loadingNearby","nearby","_id","ZOOM","UPDATE_CENTER","actionUpdateCenter","actionUpdateCenterFinish","actionHighlight","zoom","highlight","fullScreen","loading","message","ICONS","accessibleIcon","costIcon","openIcon","maleIcon","femaleIcon","babychangingIcon","PreferenceIndicators","comparison","preferenceIndicators","index","preferenceIndicatorYes","preferenceIndicatorNo","style","height","iconSize","width","lastCallbackId","badChars","possible","escapeChar","chr","jsonp","url","params","callback","jsonpParam","callbackId","Util","script","createElement","getParamString","getElementsByTagName","appendChild","xmlHttp","XMLHttpRequest","onreadystatechange","readyState","setRequestHeader","send","template","str","data","string","Class","extend","options","serviceUrl","geocodingQueryParams","reverseQueryParams","htmlTemplate","r","a","address","parts","road","building","city","town","village","hamlet","country","join","initialize","setOptions","geocode","query","cb","q","limit","format","addressdetails","results","i","bbox","boundingbox","j","parseFloat","icon","display_name","html","latLngBounds","latLng","lon","call","reverse","scale","Math","round","loc","bounds","factory","Control","Geocoder","Nominatim","showResultIcons","collapsed","expand","placeholder","errorMessage","queryMinLength","suggestMinLength","suggestTimeout","defaultMarkGeocode","includes","Evented","prototype","Mixin","Events","geocoder","_requestCount","onAdd","input","container","DomUtil","create","form","_form","_map","_container","innerHTML","_input","DomEvent","disableClickPropagation","_errorElement","_alts","addListener","_keydown","suggest","_change","_preventBlurCollapse","_collapse","e","button","detail","_toggle","Browser","touch","stopPropagation","_expand","on","_geocode","markGeocode","addClass","removeClass","_geocodeResult","_results","_createAlt","_geocodeResultSelected","fitBounds","_geocodeMarker","removeLayer","Marker","bindPopup","addTo","openPopup","_lastGeocode","requestCount","mode","eventData","_clearResults","fire","hasClass","select","blur","_selection","li","text","createTextNode","setAttribute","stop","_this","dir","keyCode","parseInt","getAttribute","v","clearTimeout","_suggestTimeout","setTimeout","resourceSets","resources","resource","point","coordinates","Bing","_key","decodeURIComponent","_formatName","arguments","outFormat","locations","street","adminArea4","adminArea3","adminArea1","outputFormat","MapQuest","access_token","proximity","hasOwnProperty","encodeURIComponent","features","slice","place_name","Mapbox","_accessToken","addr","split","geometry","words","What3Words","service_url","northeast","southwest","formatted_address","address_components","latlng","Google","reverseUrl","nameProperties","_decodeFeatures","f","c","extent","_deocodeFeatureName","Photon","apiKey","_apiKey","_lastSuggest","api_key","_parseResults","geocoding","timestamp","bboxname","geoJson","pointToLayer","feature","circleMarker","onEachFeature","layer","getBounds","getCenter","getLatLng","label","Mapzen","SingleLine","outFields","forStorage","maxLocations","token","candidates","y","x","ymax","xmax","ymin","xmin","distance","Match_addr","ArcGis","geocodeUrl","reverseGeocodeUrl","app_id","app_code","searchtext","gen","jsonattributes","getJSON","prox","view","displayPosition","mapView","topLeft","bottomRight","HERE","nominatim","bing","mapQuest","mapbox","what3words","google","photon","mapzen","arcgis","here","GeolocationMapControl","control","L","countrycodes","setView","MapControl","withLeaflet","LocateMapControl","locate","drawCircle","follow","keepCurrentZoomLevel","iconLoading","showPopup","onLocationError","Function","onLocationOutsideMapBounds","scroll","el","scrollIntoView","useOurLoosLogoImage","LooIcon","Icon","iconAnchor","looId","iconUrl","markerIconHighlight","iconRetinaUrl","markerIconRetinaHighlight","markerHighlighted","markerIcon","markerIconRetina","createIcon","img","_createImg","_getIconUrl","_setIconStyles","grouper","background","backgroundSize","LooMap","onZoom","onMove","debounce","leading","trailing","clusterLayer","onMarkerClick","refs","leafletElement","markerClusterGroup","showCoverageOnHover","disableClusteringAtZoom","iconCreateFunction","cluster","count","getChildCount","divIcon","addLayer","markers","onInitialised","onUpdateCenter","event","getZoom","activeMarkers","countLimit","countFrom","loosThen","keyBy","loosNow","isEqual","addRemoveMarkers","loosToAdd","loosToRemove","markersToRemove","removeLayers","markersToAdd","entries","marker","partial","addLayers","iconOptionsNow","setIcon","initialPosition","showCenter","Map","zoomControl","preventZoom","showZoomControls","scrollWheelZoom","dragging","preventDragging","onZoomend","loadingControl","tap","TileLayer","contributor","showcontributor","showSearchControl","showLocateControl","NewLogo","NearestLooMap","looMap","looCentre","wrappedComponentRef","it","numberNearest","showLocation","actionZoom","mapProps","looProps","canHumanize","definitions","opening","access","humanizePropertyValue","property","override","find","s","humanizeAPIValue","toUpperCase","trim","api","API","instance","_findLoos","mark","_callee","qs","res","wrap","_context","prev","next","concat","Accept","sent","abrupt","_x","_x2","_x3","apply","_findLooById","_callee2","_context2","_x4","_x5","_searchLoos","_callee3","_context3","_x6","_reportLoo","_callee4","report","from","_context4","Authorization","method","statusText","_x7","_x8","_x9","_removeLoo","_callee5","reason","_context5","removal_reason","_x10","_x11","_x12","_fetchAreaData","_callee6","searchUrl","_context6","_fetchContributors","_callee7","_context7","freeze","LooPage","humanizedPropNames","accessibleType","babyChange","attended","radar","fee","propertiesSort","propertiesBlacklist","names","knownOrder","intersection","unknownOrder","difference","sort","mappings","getPropertyNames","goBack","rel","headings","large","maxWidth","mobileMap","renderMap","propertyName","humanizePropertyName","propertyValue","small","DateTime","fromISO","updatedAt","toLocaleString","DATETIME_MED","renderMain","Loading","ownProps","app","RemovePage","updateReason","currentTarget","doSubmit","actionRemoveRequest","btnCaution","DismissableBox","dimissed","onDismiss","persistKey","dismissed","dangerouslySetInnerHTML","__html","close","precision","multiplier","pow","LooListItem","meters","onMouseOver","onHoverStart","onMouseOut","onHoverEnd","link","linkText","actionToggleViewMode","viewMode","HomePage","looList","looListItem","doLogout","mobileContent","renderWelcome","renderList","toiletMap","doLogin","AboutPage","regular","bandedSection","bandedSectionText","lists","inset","AddEditPage","questionnaireMap","question","optionsMap","active","notes","merge","originalData","cloneDeep","originalCenter","handleChange","handleTriStateChange","save","set","before","now","changes","onlyChanges","transform","acc","isObject","nestedChanges","isEmpty","isDerived","getNovelInput","actionReportRequest","dropdown","option","questionnaire","questionnaireCol","questionnaireGroup","helpers","visuallyHidden","aria-labelledby","readOnly","btnStack","disabled","LoginPage","PreferencesPage","unsavedPreferences","savedPreferences","preferenceMap","freeIcon","updateSelection","newState","update","$set","updated","assign","defaultChecked","preferenceImage","isDirty","constructCampaignLink","email","ThanksPage","btnFeatured","MapPage","positionFromRouter","UseOurLoosPage","useOurLoosLogo","PrivacyPage","bg","info","homeBtn","findGeolocation","geolocationSaga","getGeolocation","getCurrentPosition","put","takeLatest","updateCenterSaga","mapControlsSaga","oldCenter","newCenter","rootReducer","combineReducers","handler","sagaMiddleware","createSagaMiddleware","middleware","applyMiddleware","devTools","__REDUX_DEVTOOLS_EXTENSION__","store","createStore","run","authSaga","all","makeAuthSaga","findNearbyLoosSaga","findLooByIdSaga","remove","findLoos","findLooById","reportLoo","ids","take","removeLoo","loosSaga","makeLoosSaga","startApp","ReactDOM","Router","forceRefresh","Switch","exact","path","AuthCallback","NotFound","getElementById","check","dt","hour","weekday","openingHours","local","def","d"],"mappings":"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","file":"static/js/main.4d7acd29.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"app_wrapper__1GEpn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__1EqMA\",\"sponsorWrapper\":\"header_sponsorWrapper__2psLT\",\"sponsorTitle\":\"header_sponsorTitle__35Fqn\",\"sponsorLogo\":\"header_sponsorLogo__1eqA0\",\"title\":\"header_title__3Zatg\"};","module.exports = __webpack_public_path__ + \"static/media/logo.999b4a66.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popupBody\":\"cookie-box_popupBody__3a2VF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"colors\":\"'../../css/colors.css'\",\"colorHighlight\":\"#fff5c5\",\"notification\":\"notification_notification__nA5Ux messages_message__3R4Wi\"};","module.exports = __webpack_public_path__ + \"static/media/pref-accessible-white.ae279168.svg\";","module.exports = __webpack_public_path__ + \"static/media/pref-cost-white.fc6c081c.svg\";","module.exports = __webpack_public_path__ + \"static/media/pref-open-white.0c71ed98.svg\";","module.exports = __webpack_public_path__ + \"static/media/pref-male-white.dbf159ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/pref-female-white.936f1ef1.svg\";","module.exports = __webpack_public_path__ + \"static/media/pref-babychanging-white.10f815cf.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAG7AAABuwBHnU4NQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAALDSURBVFiFtdfPaxNBFAfw75ttoumxvaRpKwSpB+lBbIp66N1/QvBv0JsiFBSqrYqXKihKKNje9GrPHlow9WcRJWKETXZJ1tpKS+xmN/M8NLtJk26y2+w+CGzeZuYzL8nMzoCZEeQ1Ojo6HLQNMTO8Ynx8PFGv1y8LITLMPAUgA2AYwBaAHBFtSClziqK8UVX1n1c/nsjY2NglZs4COOM5imZ8J6KrxWJx3ReSTqdP1mq12wCuARA+ACfqABYGBwdn8/m86YlMTk7Gt7e31wCcD9B5e6xrmjbDzLaTODTSnZ2d2T4BALiYSqVutCbcSkZGRqaFEGsAlD4RALCIaLpYLH4CGpVMTEycEEJkQwIAIMbM2UwmE3ORarU6A+BsSIAT53Rdv+AiOPj/hx7MnHERIooEcfoVDXEqCgTAFAAIIhoAcCoi5DQRkWhMmnxEyA9mZuc3eRcR0pwnUspcFAIzf3aRqCpRFKVZiRDiAw5W0bCjiTQeOGFXo6mqWnIRAGDmFyEjy86Fi9i2vQJgNyxBCLHUgVQqlT0iWgnJ+Kiq6pcOBACklE/DEIhoqfX9IUTTtA0A7/s0bMuyllsTHRsFIuq3mtVyuVzuipimuQxg77hC+1d1JGIYxi6AxWMav5LJ5OueCAAIIeYB/A0qMPNcLpezfCGqqv4hogcBDXVoaCh71A3PHaJpmo8A/PYrENHc5uZmLRBiGMYuEd31aZQSiYTnstR1rxuLxRYBlHwg99r3v76RQqGwT0R3egB6PB5/1u0DPXftyWTyORH99LrPzPOFQmG/Wx9dD0FOpFKpK0dNMgBlIUS62wEI8Hn+0HX9JYCvHSMkWugF+EaYWTLzrba0wcxP/LT3fZLSNO0VgI2W1P1SqVQNFQEAZr7ZuNyyLOux33aBEE3TVgG8ZeaHlUrF90o9EAQBACnlddu2vwVp8x/RpWatrkBmQQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI5ODgzNDYzOEVGNTExRTZBNEZBRkIxNTJERjBDMkVEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI5ODgzNDY0OEVGNTExRTZBNEZBRkIxNTJERjBDMkVEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Qjk4ODM0NjE4RUY1MTFFNkE0RkFGQjE1MkRGMEMyRUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Qjk4ODM0NjI4RUY1MTFFNkE0RkFGQjE1MkRGMEMyRUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WuKllAAAB8ElEQVR42ryXy0rDQBSGU9taXfsE7ULBjWIr6sK9j+E7KFJv4EKotgpuqqgoIlh3utWdoIJgvYMoShGkingBUWxr6+U/MIFQksxMOukPH6Fpki9nJpnMeILRoCaZBvCq/8jEMtwTPBxJPegBERBmW12SBkdsuwVZzomkC6yARoHqrkEvRAdmf9aY7KsDCbAnKKA00fGhwVAMBHiSWrAP+i1uwC5eEAU7EPnsJGOgTassnWDIStIOBjQ1GUE1LeWSAOtkryKJn64Hkd8o6QbNmtq0gg6jJKK5k0jVJWGXJGH9jadnuuDgvRBJkR4qunAJ3LhUyS2Gmj/97g9dkpwZ+yTtkuTcKKlKJSfgx21JzoVqHtDp2fIBclmxJGU2Cq+DD4WSVTPJJxOpyCma6sLqo7WgugozCc0+jisUlIz9YTWRqLSabTTVE0+SYv2jpKmsJPSEJR0K7sCmiIQSB+8OJDE0VVFU8gamJQX3bDKiiUooM+BFsopvWQn1zYSgIGs3LPE+uUl2AV4mUUXBqSQPxjnHPIJFuwNEJg9LtNax+T+OKvKVSopsIm4WerPneRcQnQatgUuT/Qm7FZas5BeMlu17BnMiJ8tM6DbYKK1nCnypllCG2ZYWprOiJ/lkh3GwS6tdmZFaVkLpA1cyJ/wLMABjWYJj0iIC6gAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAYAAAAWy4frAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk3QTM3NDQ0OEVGNTExRTY5NzI4QUFDOTYyNzI3RTJBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk3QTM3NDQ1OEVGNTExRTY5NzI4QUFDOTYyNzI3RTJBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTdBMzc0NDI4RUY1MTFFNjk3MjhBQUM5NjI3MjdFMkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTdBMzc0NDM4RUY1MTFFNjk3MjhBQUM5NjI3MjdFMkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6tc7CtAAAEGklEQVR42tybWUhVQRzGj7coMwqErDSL8rmiguolfOmhp9DHCIKghyCKHiLKQCQLJFsg6qWiTbIy22xByCjFot02zGy5Yam0qJCpZaX2/fFvXI7nXM8yc87M/eBj5C6e+zvfzNzZbtLAwICRCBrt9x9k5WXZPTUKngKnw3S3WuGvcL9IgGhRVAwIKwleBOfCS+FMeDLDxKoP/gx/gqvgCviJkA/gp2ohjTko1sE5fOe9qBm+Ah+EGwJNBAAzUBTCq+CIz5uZyTdjLXwCLoBbpLYRAKQwwHp4rOD2StVwDbwS3g9vh385fXPEBcQ0FLXwJgkQsRoHb4Wr4alCQQCxEMUjeEGAPepi+CE8TwgIIJajqPHRmP1oOnwHXuYLBBDzUZzluMPSeLgcnu0JBBDp3C2mKPDFPQG+Cqe5AgFEMorL3DWqopnwRXiMm0Q28ze1aloCb3QEgjTSGERV5cGpThLJ5zqpqlIZxh4EaczioYLq2mBuv+ZEVts1JsWUzOM8W5BcjeZSuZYgXK3magRCw6YMq0R0SmNoMpdjBZKt4VQ92wokQ0OQjMQEQUOPuJnEqJzIJIErKkEqBSFMjAXpNvQULQH1/geJFkUJpF1DkDZ89l5zY2/SEKTZqtf6mCggOibSYgXSoCHIOyuQKg1BaoeBoPXTavB7jSB+GDEr+eb5yA2NQGjhri8RQGrizRBvwX81Aam2BUE76URxTwOILsO002W1HHRKA5AKc82xAjnNPYLKKjE/MAwE1auLYVQV7Q7fHBGEdVhhEKr6/Y5AkEodise6VKt4iZAOKQhBPVW9W5AzCjb6ErsnbEF41liqEMQfvrmG20RUq16V8DdPIEjlmTG4RayCTsZ70sk+uwqpdMDX/IKUwZ0hg9AW+W9fINzowx5/lYz0AqdnUcKsXo3wAyEgSOUFivsqNnK3iZB2hQDxEz4iGoTmAM8DBjkGtwkFQfWiBePCACFoYWGv0xe7PcZ3CX4ZEMh5+IMUkIBTKXbzYi8HKy/YDaUFimaAdVJBAkql2O0bIj7q7ytJEE8ND+vQnkCQCs2Zd6iShp9ESOfg14IhqJcqDxREUir7jJiF6aASGRpeNwqCaONvciNwEE5lpyAQOuTfEwoIixYE3vr8Hz0MYoQJ0icgFapS7WGDkEp9pEJT2D1+P4AoEEolz+N7aZ25SRWQoTGY202iblGdhUgQktuDz/SDly8qgtzlOYsTdXgdjgQBQqJf4zjZUKU1gO8qg7wxRt4ool2nAyIvKgOERD/0irclUcgrJMqD0C9Ad9s8Rwdhjoq+oCwQg1dAWi0ezzckHEqQCULjpwLTY7RNUSbjYjJBSMdNCxXbjMEDldqB0NBlC/9NZ6sqZV1INgjpOnzbx1jMkYI6tLyCezJp+ifAAD+i+GdGwsZiAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preferences\":\"preferences-page_preferences__3WQLD\"};","module.exports = __webpack_public_path__ + \"static/media/pref-accessible.aac416f1.svg\";","module.exports = __webpack_public_path__ + \"static/media/pref-cost.907d70f1.svg\";","module.exports = __webpack_public_path__ + \"static/media/pref-open.6977530b.svg\";","module.exports = __webpack_public_path__ + \"static/media/pref-male.8c941839.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appContainer\":\"layout_appContainer__1rIks\",\"mainContainer\":\"layout_mainContainer__37CRu\",\"bandedSection\":\"layout_bandedSection__3mBJB\",\"bandedSectionText\":\"layout_bandedSectionText__2drPD\",\"main\":\"layout_main__3epbK\",\"content\":\"layout_content__1n05a\",\"mapContainer\":\"layout_mapContainer__3mjCm\",\"controls\":\"layout_controls__2_JkV\"};","module.exports = __webpack_public_path__ + \"static/media/pref-female.15866789.svg\";","module.exports = __webpack_public_path__ + \"static/media/pref-babychanging.7ed6f047.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"small\":\"headings_small__1mGEH\",\"regular\":\"headings_regular__2_vaf\",\"large\":\"headings_large__3M1FA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map\":\"loo-map_map__2XxNC\",\"with-crosshair\":\"loo-map_with-crosshair__oGQ1R\",\"index\":\"loo-map_index__1AQXf\",\"markerHighlighted\":\"loo-map_markerHighlighted__y8OA0\",\"bounce\":\"loo-map_bounce__8GRbf\",\"locate\":\"loo-map_locate__3J0aX\",\"loading\":\"loo-map_loading__oplDY\",\"cluster\":\"loo-map_cluster__2dEM3\",\"count\":\"loo-map_count__3HOss\"};","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n              alert(\r\n                'New updates for the toilet map are ready.\\nYou can update by closing all tabs for this site and then visiting again.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","export const GET_GEOLOCATION_REQUEST = 'GEOLOCATION/GET_GEOLOCATION/REQUEST';\r\nexport const GET_GEOLOCATION_SUCCESS = 'GEOLOCATION/GET_GEOLOCATION/SUCCESS';\r\nexport const GET_GEOLOCATION_ERROR = 'GEOLOCATION/GET_GEOLOCATION/ERROR';\r\n\r\n// Actions\r\n\r\nexport const actionGetGeolocationRequest = () => ({\r\n  type: GET_GEOLOCATION_REQUEST,\r\n});\r\n\r\nexport const actionGetGeolocationSuccess = position => ({\r\n  type: GET_GEOLOCATION_SUCCESS,\r\n  payload: {\r\n    position,\r\n  },\r\n});\r\n\r\nexport const actionGetGeolocationError = error => ({\r\n  type: GET_GEOLOCATION_ERROR,\r\n  payload: {\r\n    error,\r\n  },\r\n});\r\n\r\nexport const actions = {\r\n  [GET_GEOLOCATION_REQUEST]: actionGetGeolocationRequest,\r\n  [GET_GEOLOCATION_SUCCESS]: actionGetGeolocationSuccess,\r\n  [GET_GEOLOCATION_ERROR]: actionGetGeolocationError,\r\n};\r\n\r\n// Action Handlers\r\n\r\nconst ACTION_HANDLERS = {\r\n  [GET_GEOLOCATION_SUCCESS]: function(state, action) {\r\n    var { longitude, latitude } = action.payload.position.coords;\r\n\r\n    return {\r\n      ...state,\r\n      position: {\r\n        lng: longitude,\r\n        lat: latitude,\r\n      },\r\n    };\r\n  },\r\n\r\n  [GET_GEOLOCATION_ERROR]: function(state, action) {\r\n    return {\r\n      ...state,\r\n      error: action.payload.error,\r\n    };\r\n  },\r\n};\r\n\r\n// Reducer\r\n\r\nexport default function geolocationReducer(state = {}, action) {\r\n  const handler = ACTION_HANDLERS[action.type];\r\n  return handler ? handler(state, action) : state;\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { actionGetGeolocationRequest } from '../redux/modules/geolocation';\r\n\r\nimport styles from './css/app.module.css';\r\n\r\nclass App extends Component {\r\n  componentDidMount() {\r\n    if (!this.props.geolocation.location || !this.props.geolocation.error) {\r\n      // Cordova environment expects us to wait for `deviceready`. If the geolocation\r\n      // request is fired too early we get an ugly message.\r\n      // http://stackoverflow.com/questions/28891339/fix-cordova-geolocation-ask-for-location-message\r\n      if (window.cordova) {\r\n        document.addEventListener(\r\n          'deviceready',\r\n          this.props.actionGetGeolocationRequest,\r\n          false\r\n        );\r\n      } else {\r\n        this.props.actionGetGeolocationRequest();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.map.center) {\r\n      return (\r\n        <div className={styles.wrapper}>\r\n          <p>Fetching toilets&hellip;</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nvar mapStateToProps = state => ({\r\n  geolocation: state.geolocation,\r\n  map: state.mapControls,\r\n});\r\n\r\nvar mapDispatchToProps = {\r\n  actionGetGeolocationRequest,\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )(App)\r\n);\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ auth, component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={props => {\r\n      if (auth.isAuthenticated()) {\r\n        return <Component {...props} />;\r\n      } else {\r\n        auth.redirectOnNextLogin(props.location);\r\n        return <Redirect to=\"/login\" />;\r\n      }\r\n    }}\r\n  />\r\n);\r\n\r\nexport default ProtectedRoute;\r\n","import createHistory from 'history/createBrowserHistory';\r\n\r\nexport default createHistory();\r\n","import auth0 from 'auth0-js';\r\nimport history from './history';\r\n\r\nexport default class Auth {\r\n  auth0 = new auth0.WebAuth({\r\n    domain: 'gbptm.eu.auth0.com',\r\n    clientID: 'sUts4RKy04JcyZ2IVFgMAC0rhPARCQYg',\r\n    redirectUri: `${window.location.origin}/callback`,\r\n    responseType: 'token id_token',\r\n    audience: 'https://www.toiletmap.org.uk/api',\r\n    scope: 'openid profile report:loo',\r\n  });\r\n\r\n  constructor() {\r\n    this.login = this.login.bind(this);\r\n    this.logout = this.logout.bind(this);\r\n    this.handleAuthentication = this.handleAuthentication.bind(this);\r\n    this.isAuthenticated = this.isAuthenticated.bind(this);\r\n    this.getAccessToken = this.getAccessToken.bind(this);\r\n    this.fetchProfile = this.fetchProfile.bind(this);\r\n  }\r\n\r\n  handleAuthentication() {\r\n    return new Promise((resolve, reject) => {\r\n      this.auth0.parseHash((err, authResult) => {\r\n        if (authResult && authResult.accessToken && authResult.idToken) {\r\n          this.setSession(authResult);\r\n          resolve();\r\n        } else if (err) {\r\n          reject(err);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  setSession(authResult) {\r\n    // Set the time that the Access Token will expire at\r\n    let expiresAt = JSON.stringify(\r\n      authResult.expiresIn * 1000 + new Date().getTime()\r\n    );\r\n    localStorage.setItem('access_token', authResult.accessToken);\r\n    localStorage.setItem('id_token', authResult.idToken);\r\n    localStorage.setItem('expires_at', expiresAt);\r\n  }\r\n\r\n  getAccessToken() {\r\n    const accessToken = localStorage.getItem('access_token');\r\n    if (!accessToken) {\r\n      throw new Error('No access token found');\r\n    }\r\n    return accessToken;\r\n  }\r\n\r\n  fetchProfile() {\r\n    return new Promise((resolve, reject) => {\r\n      let accessToken = this.getAccessToken();\r\n      this.auth0.client.userInfo(accessToken, (err, profile) => {\r\n        if (profile) {\r\n          localStorage.setItem('name', profile.name);\r\n          resolve(profile);\r\n        } else if (err) {\r\n          reject(err);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  getProfile() {\r\n    return {\r\n      name: localStorage.getItem('name'),\r\n    };\r\n  }\r\n\r\n  redirectOnNextLogin(location) {\r\n    localStorage.setItem('redirectOnLogin', JSON.stringify(location));\r\n  }\r\n\r\n  redirectOnLogin() {\r\n    return JSON.parse(localStorage.getItem('redirectOnLogin'));\r\n  }\r\n\r\n  login() {\r\n    this.auth0.authorize();\r\n  }\r\n\r\n  logout() {\r\n    // Clear Access Token and ID Token from local storage also the cached email\r\n    localStorage.removeItem('name');\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('id_token');\r\n    localStorage.removeItem('expires_at');\r\n    // navigate to the home route\r\n    history.replace('/');\r\n  }\r\n\r\n  isAuthenticated() {\r\n    // Check whether the current time is past the\r\n    // Access Token's expiry time\r\n    let expiresAt = JSON.parse(localStorage.getItem('expires_at'));\r\n    return new Date().getTime() < expiresAt;\r\n  }\r\n}\r\n","import Auth from '../../Auth';\r\n\r\nexport const LOGIN = 'AUTH/DO/LOGIN';\r\nexport const LOGOUT = 'AUTH/DO/LOGOUT';\r\nexport const LOGGED_IN = 'AUTH/LOGIN/OK';\r\nexport const SET_NAME = 'AUTH/SET/NAME';\r\n\r\nexport const actionLogin = () => ({\r\n  type: LOGIN,\r\n});\r\n\r\nexport const actionLogout = () => ({\r\n  type: LOGOUT,\r\n});\r\n\r\nexport const actionLoggedIn = status => ({\r\n  type: LOGGED_IN,\r\n  payload: status,\r\n});\r\n\r\nexport const actionSetName = name => ({\r\n  type: SET_NAME,\r\n  payload: name,\r\n});\r\n\r\nconst HANDLERS = {\r\n  [LOGGED_IN]: (state, action) => ({\r\n    ...state,\r\n    isAuthenticated: action.payload,\r\n  }),\r\n  [SET_NAME]: (state, action) => ({\r\n    ...state,\r\n    name: action.payload,\r\n  }),\r\n};\r\n\r\nconst initialState = {\r\n  isAuthenticated: new Auth().isAuthenticated(),\r\n  name: new Auth().getProfile().name,\r\n};\r\n\r\nexport default function authReducer(state = initialState, action) {\r\n  const handler = HANDLERS[action.type];\r\n  return handler ? handler(state, action) : state;\r\n}\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport styles from './css/logo.module.css';\r\nimport logo from '../images/logo.svg';\r\n\r\nexport default () => (\r\n  <Link to=\"/\" title=\"Go to home page\" className={styles.wrapper}>\r\n    <img\r\n      src={logo}\r\n      alt=\"'The Great British Toilet Map' logo\"\r\n      className={styles.image}\r\n    />\r\n    <span className={styles.title}>\r\n      The Great British <span>Public Toilet Map</span>\r\n    </span>\r\n  </Link>\r\n);\r\n","import React, { Component } from 'react';\r\n\r\nimport styles from './css/header.module.css';\r\n\r\nimport Logo from '../components/Logo';\r\n\r\nclass Header extends Component {\r\n  render() {\r\n    return (\r\n      <header className={styles.header}>\r\n        <Logo />\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nimport styles from '../css/cookie-box-button.module.css';\r\n\r\nconst CookieBoxButton = ({ onClick }) => (\r\n  <div className={styles.cookieButtonWrapper}>\r\n    <button\r\n      className={styles.btn}\r\n      type=\"button\"\r\n      onClick={onClick}\r\n      title=\"Open the cookie settings\"\r\n    >\r\n      <span role=\"img\" aria-label=\"Cookie Emoji\">\r\n        🍪\r\n      </span>\r\n    </button>\r\n  </div>\r\n);\r\n\r\nexport default CookieBoxButton;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport styles from './css/footer.module.css';\r\n\r\nimport CookieBoxButton from './Tracking/CookieBoxButton';\r\n\r\nclass Footer extends Component {\r\n  render() {\r\n    return (\r\n      <footer className={styles.footer}>\r\n        <ul className={styles.footerList}>\r\n          <li className={styles.footerListItem}>\r\n            <Link to=\"/preferences\" className={styles.footerItem}>\r\n              <span className={styles.footerItemText}>Preferences</span>\r\n            </Link>\r\n          </li>\r\n          <li className={styles.footerListItem}>\r\n            <Link to=\"/privacy\" className={styles.footerItem}>\r\n              <span className={styles.footerItemText}>Privacy Policy</span>\r\n            </Link>\r\n          </li>\r\n          <li className={styles.footerListItem}>\r\n            <Link to=\"/about\" className={styles.footerItem}>\r\n              <span className={styles.footerItemText}>About</span>\r\n            </Link>\r\n          </li>\r\n          <li className={styles.footerListItem}>\r\n            <CookieBoxButton onClick={this.props.onCookieBoxButtonClick} />\r\n          </li>\r\n        </ul>\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Footer;\r\n","import { isOpen } from '@toiletmap/opening-hours';\r\n\r\nexport const PREFERENCES_KEY = 'preferences';\r\n\r\nexport default {\r\n  viewport: {\r\n    mobile: 567,\r\n  },\r\n  analyticsId:\r\n    process.env.NODE_ENV === 'production' ? 'UA-52513593-1' : 'UA-111111111-1',\r\n  nearestRadius: 50000, // meters\r\n  nearestListLimit: 5,\r\n  initialZoom: 16,\r\n  minZoom: 12,\r\n  maxZoom: 18,\r\n  editMinZoom: 16,\r\n  allowAddEditLoo: true,\r\n  showBackButtons: false,\r\n  fallbackLocation: {\r\n    // Trafalgar Square. Because.\r\n    lat: 51.507351,\r\n    lng: -0.127758,\r\n  },\r\n  getStage() {\r\n    if (process.env.NODE_ENV === 'production') {\r\n      if (window.location.hostname === 'www.toiletmap.org.uk') {\r\n        return 'production';\r\n      }\r\n\r\n      return 'staging';\r\n    }\r\n\r\n    return process.env.NODE_ENV;\r\n  },\r\n  getSettings(namespace) {\r\n    return JSON.parse(localStorage.getItem(namespace) || '{}');\r\n  },\r\n  getSetting(namespace, key, defaultVal) {\r\n    const val = this.getSettings(namespace)[key];\r\n\r\n    return val === undefined ? defaultVal : val;\r\n  },\r\n  setSetting(namespace, key, val) {\r\n    var settings = this.getSettings(namespace);\r\n    settings[key] = val;\r\n    localStorage.setItem(namespace, JSON.stringify(settings));\r\n  },\r\n  setSettings(namespace, obj = {}) {\r\n    localStorage.setItem(\r\n      namespace,\r\n      JSON.stringify({\r\n        ...this.getSettings(namespace),\r\n        ...obj,\r\n      })\r\n    );\r\n  },\r\n\r\n  // Compares the user's preferences with properties on the loo to\r\n  // determine which preferences, if any, are met.\r\n  checkPreferences(loo) {\r\n    var preferences = this.getSettings(PREFERENCES_KEY);\r\n    var result = {};\r\n\r\n    if (!Object.keys(preferences).length) {\r\n      return result;\r\n    }\r\n\r\n    // Map preference names to loo properties\r\n    var map = {\r\n      free: 'fee',\r\n      accessible: 'accessibleType',\r\n      open: 'opening',\r\n      male: 'type',\r\n      female: 'type',\r\n      babychanging: 'babyChange',\r\n    };\r\n\r\n    Object.keys(preferences).forEach(name => {\r\n      var value = loo.properties[map[name]];\r\n\r\n      if (['', undefined, null].indexOf(value) !== -1) {\r\n        return;\r\n      }\r\n\r\n      switch (name) {\r\n        case 'free':\r\n          result[name] =\r\n            value === false ||\r\n            value === 'false' ||\r\n            value === 0 ||\r\n            value === '0.00' ||\r\n            value.toLowerCase() === 'free' ||\r\n            value.toLowerCase() === 'none';\r\n          break;\r\n\r\n        case 'accessible':\r\n          result[name] =\r\n            value === false ||\r\n            value === 'false' ||\r\n            value.toLowerCase() !== 'none';\r\n          break;\r\n\r\n        case 'open':\r\n          if (value !== '') {\r\n            result[name] = isOpen(value);\r\n          }\r\n          break;\r\n\r\n        case 'male':\r\n          result[name] = /\\bmale\\b|unisex/.test(value);\r\n          break;\r\n\r\n        case 'female':\r\n          result[name] = /\\bfemale\\b|unisex/.test(value);\r\n          break;\r\n\r\n        case 'babychanging':\r\n          result[name] =\r\n            value === true || value === 'true' || value !== 'false';\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n\r\n    return result;\r\n  },\r\n};\r\n","import React from 'react';\r\n\r\nimport { Helmet } from 'react-helmet';\r\n\r\nimport config from '../../config';\r\n\r\nexport const Staging = () => (\r\n  <Helmet>\r\n    <script src={`${process.env.PUBLIC_URL}/adobe-digital-data-stage.js`} />\r\n    <script\r\n      src=\"//assets.adobedtm.com/launch-EN896f27c113614ed9a3a705dc289c6887-staging.min.js\"\r\n      async\r\n    />\r\n  </Helmet>\r\n);\r\n\r\nexport const Production = () => (\r\n  <Helmet>\r\n    <script src={`${process.env.PUBLIC_URL}/adobe-digital-data.js`} />\r\n    <script\r\n      src=\"//assets.adobedtm.com/launch-EN896f27c113614ed9a3a705dc289c6887-staging.min.js\"\r\n      async\r\n    />\r\n  </Helmet>\r\n);\r\n\r\nexport default () => {\r\n  if (config.getStage() === 'production') {\r\n    return <Production />;\r\n  }\r\n\r\n  return <Staging />;\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport styles from '../css/cookie-box.module.css';\r\nimport controls from '../../css/controls.module.css';\r\n\r\n// Copy/pasted from pages/PreferencesPage.js.\r\n// TODO: Abstract this is we see this pattern any more times.\r\nconst PreferenceCheckbox = ({ children, checked, name, onChange }) => (\r\n  <label className={controls.preferenceWrapper}>\r\n    <input\r\n      className={controls.preferenceInput}\r\n      type=\"checkbox\"\r\n      name={name}\r\n      onChange={onChange}\r\n      checked={checked}\r\n    />\r\n    <span className={controls.preference}>{children}</span>\r\n  </label>\r\n);\r\n\r\nconst noop = () => {};\r\n\r\nclass CookieBox extends React.Component {\r\n  static propTypes = {\r\n    aaAccepted: PropTypes.bool,\r\n    gaAccepted: PropTypes.bool,\r\n    onSubmit: PropTypes.func,\r\n  };\r\n\r\n  static defaultProps = {\r\n    onSubmit: noop,\r\n  };\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = {\r\n      aaAccepted: props.aaAccepted || false,\r\n      gaAccepted: props.gaAccepted || false,\r\n    };\r\n  }\r\n\r\n  handleSubmit = evt => {\r\n    evt.preventDefault();\r\n\r\n    this.props.onSubmit({\r\n      aaAccepted: this.state.aaAccepted,\r\n      gaAccepted: this.state.gaAccepted,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    if (!this.props.open) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div className={styles.popupBody}>\r\n          <p>\r\n             Opt in to a Google Analytics cookie. This will help us improve your experience with the\r\n             site, so you can find a loo quicker. By opting in you would be sharing your data with Public\r\n             Convenience Ltd and tech partners Neontribe as well as Google itself.\r\n          </p>\r\n\r\n          <form onSubmit={this.handleSubmit}>\r\n            <PreferenceCheckbox\r\n              onChange={evt =>\r\n                this.setState({ gaAccepted: evt.target.checked })\r\n              }\r\n              checked={this.state.gaAccepted}\r\n            >\r\n              <span>Opt-in to Google Analytics</span>\r\n            </PreferenceCheckbox>\r\n\r\n            <p>\r\n               You can also opt in to additional cookies to support the\r\n               project indirectly. By opting in to additional analytics cookies\r\n               we can share your data with Unilever via Google and Adobe Analytics, \r\n               and benefit from Unilever's continued sponsorship. \r\n            </p>\r\n\r\n            <PreferenceCheckbox\r\n              onChange={evt =>\r\n                this.setState({ aaAccepted: evt.target.checked })\r\n              }\r\n              checked={this.state.aaAccepted}\r\n            >\r\n              <span>Opt-in to Adobe Analytics</span>\r\n            </PreferenceCheckbox>\r\n\r\n            <p>\r\n              Opting in is entirely up to you. For more detailed information about the cookies we use, see our{' '}\r\n              <Link to=\"/privacy\">Cookies page.</Link>\r\n            </p>\r\n\r\n            <div>\r\n              <button className={controls.btn}>Save and close</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CookieBox;\r\n","import React, { Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport config from '../../config';\r\n\r\nimport Analytics from 'react-router-ga';\r\nimport AdobeTracking from './AdobeTracking';\r\nimport CookieBox from './CookieBox';\r\n\r\nexport const TRACKING_STATE_CHOSEN = 'chosen tracking state';\r\nexport const TRACKING_STATE_UNCHOSEN = 'not chosen tracking state';\r\n\r\nconst becomeFalse = (oldVal, newVal) => oldVal && !newVal;\r\n\r\nclass Tracking extends React.Component {\r\n  static configNS = 'tracking';\r\n\r\n  state = {\r\n    aaAccepted: config.getSetting(Tracking.configNS, 'aaAccepted'),\r\n    gaAccepted: config.getSetting(Tracking.configNS, 'gaAccepted'),\r\n  };\r\n\r\n  saveTrackingLevel = ({ aaAccepted, gaAccepted }) => {\r\n    const oldVals = {\r\n      aaAccepted: this.state.aaAccepted,\r\n      gaAccepted: this.state.gaAccepted,\r\n    };\r\n\r\n    this.setState({\r\n      aaAccepted,\r\n      gaAccepted,\r\n    });\r\n\r\n    config.setSettings(Tracking.configNS, {\r\n      trackingState: TRACKING_STATE_CHOSEN,\r\n      aaAccepted,\r\n      gaAccepted,\r\n    });\r\n\r\n    // Unload the scripts completely if we have de-selected tracking.\r\n    if (\r\n      becomeFalse(oldVals.aaAccepted, aaAccepted) ||\r\n      becomeFalse(oldVals.gaAccepted, gaAccepted)\r\n    ) {\r\n      window.location.reload();\r\n      return;\r\n    }\r\n    this.props.onClose();\r\n  };\r\n\r\n  renderTracking() {\r\n    const { analyticsId, children } = this.props;\r\n    const { gaAccepted, aaAccepted } = this.state;\r\n\r\n    switch (true) {\r\n      case gaAccepted && aaAccepted:\r\n        return (\r\n          <Fragment>\r\n            <AdobeTracking />\r\n            <Analytics id={analyticsId}>{children}</Analytics>\r\n          </Fragment>\r\n        );\r\n\r\n      case gaAccepted:\r\n        return <Analytics id={analyticsId}>{children}</Analytics>;\r\n\r\n      case aaAccepted:\r\n        return (\r\n          <Fragment>\r\n            <AdobeTracking />\r\n            {children}\r\n          </Fragment>\r\n        );\r\n\r\n      default:\r\n        // i.e. don't track me at all\r\n        return children;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <CookieBox\r\n          open={this.props.open}\r\n          onSubmit={this.saveTrackingLevel}\r\n          aaAccepted={this.state.aaAccepted}\r\n          gaAccepted={this.state.gaAccepted}\r\n        />\r\n        {this.renderTracking()}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nTracking.propTypes = {\r\n  analyticsId: PropTypes.string,\r\n  children: PropTypes.node,\r\n  open: PropTypes.bool,\r\n  onClose: PropTypes.func,\r\n};\r\n\r\nTracking.defaultProps = {\r\n  onClose: () => {},\r\n};\r\n\r\nexport default Tracking;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport MediaQuery from 'react-responsive';\r\n\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\n\r\nimport layout from './css/layout.module.css';\r\n\r\nimport config from '../config';\r\nimport Tracking, { TRACKING_STATE_CHOSEN } from './Tracking/Tracking';\r\n\r\nclass PageLayout extends Component {\r\n  state = {\r\n    cookieSettingsOpen:\r\n      config.getSetting(Tracking.configNS, 'trackingState') !==\r\n      TRACKING_STATE_CHOSEN,\r\n  };\r\n\r\n  mainRef = React.createRef();\r\n\r\n  handleCookieBoxButtonClick = () => {\r\n    this.setState({ cookieSettingsOpen: true });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ cookieSettingsOpen: false });\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.mainRef.current) {\r\n      if (!prevState.cookieSettingsOpen && this.state.cookieSettingsOpen) {\r\n        this.mainRef.current.scrollTop = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={layout.appContainer}>\r\n        <div className={layout.mainContainer}>\r\n          <div className={layout.main}>\r\n            <Header />\r\n\r\n            <main ref={this.mainRef} className={layout.content}>\r\n              <Tracking\r\n                analyticsId={config.analyticsId}\r\n                open={this.state.cookieSettingsOpen}\r\n                onClose={this.handleClose}\r\n              >\r\n                <div>{React.cloneElement(this.props.main, this.props)}</div>\r\n              </Tracking>\r\n            </main>\r\n\r\n            <Footer onCookieBoxButtonClick={this.handleCookieBoxButtonClick} />\r\n          </div>\r\n        </div>\r\n\r\n        <MediaQuery minWidth={config.viewport.mobile}>\r\n          <aside data-testid=\"mainMap\" className={layout.mapContainer}>\r\n            {React.cloneElement(this.props.map, this.props)}\r\n          </aside>\r\n        </MediaQuery>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPageLayout.propTypes = {\r\n  main: PropTypes.element.isRequired,\r\n  map: PropTypes.element.isRequired,\r\n};\r\n\r\nexport default PageLayout;\r\n","import React, { Component } from 'react';\r\n\r\nimport styles from './css/notification.module.css';\r\n\r\nclass Notification extends Component {\r\n  render() {\r\n    return (\r\n      <div className={styles.notification} role=\"alert\" aria-live=\"assertive\">\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Notification;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { actionLoggedIn, actionSetName } from '../redux/modules/auth';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport Notification from '../components/Notification';\r\nimport MediaQuery from 'react-responsive';\r\nimport config from '../config';\r\n\r\nclass Callback extends Component {\r\n  async componentDidMount() {\r\n    if (/access_token|id_token|error/.test(this.props.location.hash)) {\r\n      await this.props.auth.handleAuthentication();\r\n      await this.props.auth.fetchProfile();\r\n    }\r\n\r\n    if (this.props.auth.isAuthenticated()) {\r\n      // dispatch a login action\r\n      this.props.loggedIn(true);\r\n      this.props.setName(this.props.auth.getProfile().name);\r\n      this.props.history.push(this.props.auth.redirectOnLogin() || '/');\r\n    } else {\r\n      this.props.history.push('/login');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <PageLayout\r\n        main={\r\n          <MediaQuery minWidth={config.viewport.mobile}>\r\n            <Notification>\r\n              <p>Updating credentials</p>\r\n            </Notification>\r\n          </MediaQuery>\r\n        }\r\n        map={\r\n          <MediaQuery minWidth={config.viewport.mobile}>\r\n            <Notification>\r\n              <p>Updating credentials</p>\r\n            </Notification>\r\n          </MediaQuery>\r\n        }\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({});\r\n\r\nconst mapDispatchToProps = {\r\n  loggedIn: actionLoggedIn,\r\n  setName: actionSetName,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Callback);\r\n","import _ from 'lodash';\r\n\r\nexport const FIND_NEARBY_REQUEST = 'LOOS/FIND_NEARBY/REQUEST';\r\nexport const FIND_NEARBY_START = 'LOOS/FIND_NEARBY/START';\r\nexport const FIND_NEARBY_SUCCESS = 'LOOS/FIND_NEARBY/SUCCESS';\r\nexport const FIND_BY_ID_REQUEST = 'LOOS/FIND_BY_ID_REQUEST/SUCCESS';\r\nexport const FIND_BY_ID_SUCCESS = 'LOOS/FIND_BY_ID_SUCCESS/SUCCESS';\r\nexport const UNCACHE_BY_ID = 'LOOS/UNCACHE/BY_ID';\r\nexport const REPORT_REQUEST = 'LOOS/REPORT/REQUEST';\r\nexport const REPORT_SUCCESS = 'LOOS/REPORT/SUCCESS';\r\nexport const REMOVE_REQUEST = 'LOOS/REMOVE/REQUEST';\r\nexport const REMOVE_SUCCESS = 'LOOS/REMOVE/SUCCESS';\r\nexport const REPORT_PROCESS_PENDING = 'LOOS/REPORT_PROCESS_PENDING';\r\n\r\n// Actions\r\n\r\nexport const actionFindNearbyRequest = (lng, lat, radius) => ({\r\n  type: FIND_NEARBY_REQUEST,\r\n  payload: {\r\n    lng,\r\n    lat,\r\n    radius,\r\n  },\r\n});\r\n\r\nexport const actionFindNearbyStart = () => ({\r\n  type: FIND_NEARBY_START,\r\n});\r\n\r\nexport const actionFindNearbySuccess = loos => ({\r\n  type: FIND_NEARBY_SUCCESS,\r\n  payload: {\r\n    loos,\r\n  },\r\n});\r\n\r\nexport const actionFindByIdRequest = id => ({\r\n  type: FIND_BY_ID_REQUEST,\r\n  payload: {\r\n    id,\r\n  },\r\n});\r\n\r\nexport const actionFindByIdSuccess = loo => ({\r\n  type: FIND_BY_ID_SUCCESS,\r\n  payload: {\r\n    loo,\r\n  },\r\n});\r\n\r\nexport const actionUncacheById = id => ({\r\n  type: UNCACHE_BY_ID,\r\n  payload: id,\r\n});\r\n\r\nexport const actionReportRequest = (loo, from) => ({\r\n  type: REPORT_REQUEST,\r\n  payload: {\r\n    loo,\r\n    from,\r\n  },\r\n});\r\n\r\nexport const actionReportSuccess = loo => ({\r\n  type: REPORT_SUCCESS,\r\n  payload: loo,\r\n});\r\n\r\nexport const actionRemoveRequest = (looId, reason) => ({\r\n  type: REMOVE_REQUEST,\r\n  payload: {\r\n    looId,\r\n    reason,\r\n  },\r\n});\r\n\r\nexport const actionRemoveSuccess = () => ({\r\n  type: REMOVE_SUCCESS,\r\n});\r\n\r\nexport const actionProcessPendingReports = () => ({\r\n  type: REPORT_PROCESS_PENDING,\r\n});\r\n\r\n// Action Handlers\r\n\r\nconst ACTION_HANDLERS = {\r\n  [UNCACHE_BY_ID]: function(state, action) {\r\n    // Clear the stored loo reference to ensure we refetch\r\n    let newById = _.omit(state.byId, action.payload);\r\n    return {\r\n      ...state,\r\n      byId: newById,\r\n    };\r\n  },\r\n\r\n  [FIND_NEARBY_START]: function(state, action) {\r\n    return {\r\n      ...state,\r\n      loadingNearby: true,\r\n    };\r\n  },\r\n\r\n  [FIND_NEARBY_SUCCESS]: function(state, action) {\r\n    return {\r\n      ...state,\r\n      nearby: action.payload.loos || [],\r\n      loadingNearby: false,\r\n    };\r\n  },\r\n\r\n  [FIND_BY_ID_SUCCESS]: function(state, action) {\r\n    return {\r\n      ...state,\r\n      byId: {\r\n        [action.payload.loo._id]: action.payload.loo,\r\n      },\r\n    };\r\n  },\r\n};\r\n\r\nconst initialState = {\r\n  byId: {},\r\n  loadingNearby: false,\r\n};\r\n\r\n// Reducer\r\nexport default function loosReducer(state = initialState, action) {\r\n  const handler = ACTION_HANDLERS[action.type];\r\n  return handler ? handler(state, action) : state;\r\n}\r\n","export const ZOOM = 'MAP_CONTROLS/ZOOM';\r\nexport const UPDATE_CENTER = 'MAP_CONTROLS/UPDATE_CENTER';\r\nexport const UPDATE_CENTER_FINISH = 'MAP_CONTROLS/UPDATE_CENTER_FINISH';\r\nexport const HIGHLIGHT = 'MAP_CONTROLS/HIGHLIGHT';\r\n\r\n// Actions\r\n\r\nexport const actionZoom = zoom => ({\r\n  type: ZOOM,\r\n  payload: {\r\n    zoom,\r\n  },\r\n});\r\n\r\nexport const actionUpdateCenter = center => ({\r\n  type: UPDATE_CENTER,\r\n  payload: {\r\n    center,\r\n  },\r\n});\r\n\r\nexport const actionUpdateCenterFinish = center => ({\r\n  type: UPDATE_CENTER_FINISH,\r\n  payload: {\r\n    center,\r\n  },\r\n});\r\n\r\nexport const actionHighlight = id => ({\r\n  type: HIGHLIGHT,\r\n  payload: id,\r\n});\r\n\r\n// Action Handlers\r\n\r\nconst ACTION_HANDLERS = {\r\n  [ZOOM]: function(state, action) {\r\n    return {\r\n      ...state,\r\n      zoom: action.payload.zoom,\r\n    };\r\n  },\r\n\r\n  [UPDATE_CENTER_FINISH]: function(state, action) {\r\n    return {\r\n      ...state,\r\n      center: action.payload.center,\r\n    };\r\n  },\r\n\r\n  [HIGHLIGHT]: function(state, action) {\r\n    return {\r\n      ...state,\r\n      highlight: action.payload,\r\n    };\r\n  },\r\n};\r\n\r\nexport default function mapControlsReducer(state = {}, action) {\r\n  const handler = ACTION_HANDLERS[action.type];\r\n  return handler ? handler(state, action) : state;\r\n}\r\n","import React from 'react';\r\n\r\nimport Notification from './Notification';\r\nimport styles from './css/loo-map.module.css';\r\n\r\nexport default props => {\r\n  if (props.fullScreen) {\r\n    return (\r\n      <div className={styles.loading + ' loading--zindexfix'}>\r\n        {props.message}\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <Notification>\r\n      <p>{props.message}</p>\r\n    </Notification>\r\n  );\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport config from '../config.js';\r\n\r\nimport styles from './css/preference-indicators.module.css';\r\n\r\nimport accessibleIcon from '../images/pref-accessible-white.svg';\r\nimport costIcon from '../images/pref-cost-white.svg';\r\nimport openIcon from '../images/pref-open-white.svg';\r\nimport maleIcon from '../images/pref-male-white.svg';\r\nimport femaleIcon from '../images/pref-female-white.svg';\r\nimport babychangingIcon from '../images/pref-babychanging-white.svg';\r\n\r\nconst ICONS = {\r\n  accessible: accessibleIcon,\r\n  free: costIcon,\r\n  open: openIcon,\r\n  male: maleIcon,\r\n  female: femaleIcon,\r\n  babychanging: babychangingIcon,\r\n};\r\n\r\nclass PreferenceIndicators extends Component {\r\n  render() {\r\n    var comparison = config.checkPreferences(this.props.loo);\r\n\r\n    return (\r\n      <div className={styles.preferenceIndicators}>\r\n        {Object.keys(comparison).map((preference, index) => {\r\n          var value = comparison[preference];\r\n\r\n          return [true, false].indexOf(value) !== -1 ? (\r\n            <img\r\n              alt={preference}\r\n              key={index}\r\n              src={ICONS[preference]}\r\n              className={\r\n                value\r\n                  ? styles.preferenceIndicatorYes\r\n                  : styles.preferenceIndicatorNo\r\n              }\r\n              style={{\r\n                height: `${this.props.iconSize}rem`,\r\n                width: `${this.props.iconSize}rem`,\r\n              }}\r\n            />\r\n          ) : null;\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPreferenceIndicators.propTypes = {\r\n  // The loo instance to compare the user's preferences against\r\n  loo: PropTypes.object.isRequired,\r\n\r\n  // Icon size multiplier (based on 1rem)\r\n  iconSize: PropTypes.number,\r\n};\r\n\r\nPreferenceIndicators.defaultProps = {\r\n  iconSize: 1,\r\n};\r\n\r\nexport default PreferenceIndicators;\r\n","import L from 'leaflet';\nvar lastCallbackId = 0; // Adapted from handlebars.js\n// https://github.com/wycats/handlebars.js/\n\nvar badChars = /[&<>\"'`]/g;\nvar possible = /[&<>\"'`]/;\nvar escape = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n\nfunction escapeChar(chr) {\n  return escape[chr];\n}\n\nexport function htmlEscape(string) {\n  if (string == null) {\n    return '';\n  } else if (!string) {\n    return string + '';\n  } // Force a string conversion as this will be done by the append regardless and\n  // the regex test will do this transparently behind the scenes, causing issues if\n  // an object's to string has escaped characters in it.\n\n\n  string = '' + string;\n\n  if (!possible.test(string)) {\n    return string;\n  }\n\n  return string.replace(badChars, escapeChar);\n}\nexport function jsonp(url, params, callback, context, jsonpParam) {\n  var callbackId = '_l_geocoder_' + lastCallbackId++;\n  params[jsonpParam || 'callback'] = callbackId;\n  window[callbackId] = L.Util.bind(callback, context);\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.src = url + L.Util.getParamString(params);\n  script.id = callbackId;\n  document.getElementsByTagName('head')[0].appendChild(script);\n}\nexport function getJSON(url, params, callback) {\n  var xmlHttp = new XMLHttpRequest();\n\n  xmlHttp.onreadystatechange = function () {\n    if (xmlHttp.readyState !== 4) {\n      return;\n    }\n\n    if (xmlHttp.status !== 200 && xmlHttp.status !== 304) {\n      callback('');\n      return;\n    }\n\n    callback(JSON.parse(xmlHttp.response));\n  };\n\n  xmlHttp.open('GET', url + L.Util.getParamString(params), true);\n  xmlHttp.setRequestHeader('Accept', 'application/json');\n  xmlHttp.send(null);\n}\nexport function template(str, data) {\n  return str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\n    var value = data[key];\n\n    if (value === undefined) {\n      value = '';\n    } else if (typeof value === 'function') {\n      value = value(data);\n    }\n\n    return htmlEscape(value);\n  });\n}","import L from 'leaflet';\nimport { template, getJSON } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    options: {\n      serviceUrl: 'https://nominatim.openstreetmap.org/',\n      geocodingQueryParams: {},\n      reverseQueryParams: {},\n      htmlTemplate: function htmlTemplate(r) {\n        var a = r.address,\n            parts = [];\n\n        if (a.road || a.building) {\n          parts.push('{building} {road} {house_number}');\n        }\n\n        if (a.city || a.town || a.village || a.hamlet) {\n          parts.push('<span class=\"' + (parts.length > 0 ? 'leaflet-control-geocoder-address-detail' : '') + '\">{postcode} {city} {town} {village} {hamlet}</span>');\n        }\n\n        if (a.state || a.country) {\n          parts.push('<span class=\"' + (parts.length > 0 ? 'leaflet-control-geocoder-address-context' : '') + '\">{state} {country}</span>');\n        }\n\n        return template(parts.join('<br/>'), a, true);\n      }\n    },\n    initialize: function initialize(options) {\n      L.Util.setOptions(this, options);\n    },\n    geocode: function geocode(query, cb, context) {\n      getJSON(this.options.serviceUrl + 'search', L.extend({\n        q: query,\n        limit: 5,\n        format: 'json',\n        addressdetails: 1\n      }, this.options.geocodingQueryParams), L.bind(function (data) {\n        var results = [];\n\n        for (var i = data.length - 1; i >= 0; i--) {\n          var bbox = data[i].boundingbox;\n\n          for (var j = 0; j < 4; j++) {\n            bbox[j] = parseFloat(bbox[j]);\n          }\n\n          results[i] = {\n            icon: data[i].icon,\n            name: data[i].display_name,\n            html: this.options.htmlTemplate ? this.options.htmlTemplate(data[i]) : undefined,\n            bbox: L.latLngBounds([bbox[0], bbox[2]], [bbox[1], bbox[3]]),\n            center: L.latLng(data[i].lat, data[i].lon),\n            properties: data[i]\n          };\n        }\n\n        cb.call(context, results);\n      }, this));\n    },\n    reverse: function reverse(location, scale, cb, context) {\n      getJSON(this.options.serviceUrl + 'reverse', L.extend({\n        lat: location.lat,\n        lon: location.lng,\n        zoom: Math.round(Math.log(scale / 256) / Math.log(2)),\n        addressdetails: 1,\n        format: 'json'\n      }, this.options.reverseQueryParams), L.bind(function (data) {\n        var result = [],\n            loc;\n\n        if (data && data.lat && data.lon) {\n          loc = L.latLng(data.lat, data.lon);\n          result.push({\n            name: data.display_name,\n            html: this.options.htmlTemplate ? this.options.htmlTemplate(data) : undefined,\n            center: loc,\n            bounds: L.latLngBounds(loc, loc),\n            properties: data\n          });\n        }\n\n        cb.call(context, result);\n      }, this));\n    }\n  }),\n  factory: function factory(options) {\n    return new L.Control.Geocoder.Nominatim(options);\n  }\n};","import L from 'leaflet';\nimport Nominatim from './geocoders/nominatim';\nexport default {\n  \"class\": L.Control.extend({\n    options: {\n      showResultIcons: false,\n      collapsed: true,\n      expand: 'touch',\n      // options: touch, click, anythingelse\n      position: 'topright',\n      placeholder: 'Search...',\n      errorMessage: 'Nothing found.',\n      queryMinLength: 1,\n      suggestMinLength: 3,\n      suggestTimeout: 250,\n      defaultMarkGeocode: true\n    },\n    includes: L.Evented.prototype || L.Mixin.Events,\n    initialize: function initialize(options) {\n      L.Util.setOptions(this, options);\n\n      if (!this.options.geocoder) {\n        this.options.geocoder = new Nominatim[\"class\"]();\n      }\n\n      this._requestCount = 0;\n    },\n    onAdd: function onAdd(map) {\n      var className = 'leaflet-control-geocoder',\n          container = L.DomUtil.create('div', className + ' leaflet-bar'),\n          icon = L.DomUtil.create('button', className + '-icon', container),\n          form = this._form = L.DomUtil.create('div', className + '-form', container),\n          input;\n      this._map = map;\n      this._container = container;\n      icon.innerHTML = '&nbsp;';\n      icon.type = 'button';\n      input = this._input = L.DomUtil.create('input', '', form);\n      input.type = 'text';\n      input.placeholder = this.options.placeholder;\n      L.DomEvent.disableClickPropagation(input);\n      this._errorElement = L.DomUtil.create('div', className + '-form-no-error', container);\n      this._errorElement.innerHTML = this.options.errorMessage;\n      this._alts = L.DomUtil.create('ul', className + '-alternatives leaflet-control-geocoder-alternatives-minimized', container);\n      L.DomEvent.disableClickPropagation(this._alts);\n      L.DomEvent.addListener(input, 'keydown', this._keydown, this);\n\n      if (this.options.geocoder.suggest) {\n        L.DomEvent.addListener(input, 'input', this._change, this);\n      }\n\n      L.DomEvent.addListener(input, 'blur', function () {\n        if (this.options.collapsed && !this._preventBlurCollapse) {\n          this._collapse();\n        }\n\n        this._preventBlurCollapse = false;\n      }, this);\n\n      if (this.options.collapsed) {\n        if (this.options.expand === 'click') {\n          L.DomEvent.addListener(container, 'click', function (e) {\n            if (e.button === 0 && e.detail !== 2) {\n              this._toggle();\n            }\n          }, this);\n        } else if (L.Browser.touch && this.options.expand === 'touch') {\n          L.DomEvent.addListener(container, 'touchstart mousedown', function (e) {\n            this._toggle();\n\n            e.preventDefault(); // mobile: clicking focuses the icon, so UI expands and immediately collapses\n\n            e.stopPropagation();\n          }, this);\n        } else {\n          L.DomEvent.addListener(container, 'mouseover', this._expand, this);\n          L.DomEvent.addListener(container, 'mouseout', this._collapse, this);\n\n          this._map.on('movestart', this._collapse, this);\n        }\n      } else {\n        this._expand();\n\n        if (L.Browser.touch) {\n          L.DomEvent.addListener(container, 'touchstart', function () {\n            this._geocode();\n          }, this);\n        } else {\n          L.DomEvent.addListener(container, 'click', function () {\n            this._geocode();\n          }, this);\n        }\n      }\n\n      if (this.options.defaultMarkGeocode) {\n        this.on('markgeocode', this.markGeocode, this);\n      }\n\n      this.on('startgeocode', function () {\n        L.DomUtil.addClass(this._container, 'leaflet-control-geocoder-throbber');\n      }, this);\n      this.on('finishgeocode', function () {\n        L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-throbber');\n      }, this);\n      L.DomEvent.disableClickPropagation(container);\n      return container;\n    },\n    _geocodeResult: function _geocodeResult(results, suggest) {\n      if (!suggest && results.length === 1) {\n        this._geocodeResultSelected(results[0]);\n      } else if (results.length > 0) {\n        this._alts.innerHTML = '';\n        this._results = results;\n        L.DomUtil.removeClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n\n        for (var i = 0; i < results.length; i++) {\n          this._alts.appendChild(this._createAlt(results[i], i));\n        }\n      } else {\n        L.DomUtil.addClass(this._errorElement, 'leaflet-control-geocoder-error');\n      }\n    },\n    markGeocode: function markGeocode(result) {\n      result = result.geocode || result;\n\n      this._map.fitBounds(result.bbox);\n\n      if (this._geocodeMarker) {\n        this._map.removeLayer(this._geocodeMarker);\n      }\n\n      this._geocodeMarker = new L.Marker(result.center).bindPopup(result.html || result.name).addTo(this._map).openPopup();\n      return this;\n    },\n    _geocode: function _geocode(suggest) {\n      var value = this._input.value;\n\n      if (!suggest && (value === this._lastGeocode || value.length < this.options.queryMinLength)) {\n        return;\n      }\n\n      var requestCount = ++this._requestCount,\n          mode = suggest ? 'suggest' : 'geocode',\n          eventData = {\n        input: value\n      };\n      this._lastGeocode = value;\n\n      if (!suggest) {\n        this._clearResults();\n      }\n\n      this.fire('start' + mode, eventData);\n      this.options.geocoder[mode](value, function (results) {\n        if (requestCount === this._requestCount) {\n          eventData.results = results;\n          this.fire('finish' + mode, eventData);\n\n          this._geocodeResult(results, suggest);\n        }\n      }, this);\n    },\n    _geocodeResultSelected: function _geocodeResultSelected(result) {\n      this.fire('markgeocode', {\n        geocode: result\n      });\n    },\n    _toggle: function _toggle() {\n      if (L.DomUtil.hasClass(this._container, 'leaflet-control-geocoder-expanded')) {\n        this._collapse();\n      } else {\n        this._expand();\n      }\n    },\n    _expand: function _expand() {\n      L.DomUtil.addClass(this._container, 'leaflet-control-geocoder-expanded');\n\n      this._input.select();\n\n      this.fire('expand');\n    },\n    _collapse: function _collapse() {\n      L.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-expanded');\n      L.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n      L.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n\n      this._input.blur(); // mobile: keyboard shouldn't stay expanded\n\n\n      this.fire('collapse');\n    },\n    _clearResults: function _clearResults() {\n      L.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n      this._selection = null;\n      L.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n    },\n    _createAlt: function _createAlt(result, index) {\n      var li = L.DomUtil.create('li', ''),\n          a = L.DomUtil.create('a', '', li),\n          icon = this.options.showResultIcons && result.icon ? L.DomUtil.create('img', '', a) : null,\n          text = result.html ? undefined : document.createTextNode(result.name),\n          mouseDownHandler = function mouseDownHandler(e) {\n        // In some browsers, a click will fire on the map if the control is\n        // collapsed directly after mousedown. To work around this, we\n        // wait until the click is completed, and _then_ collapse the\n        // control. Messy, but this is the workaround I could come up with\n        // for #142.\n        this._preventBlurCollapse = true;\n        L.DomEvent.stop(e);\n\n        this._geocodeResultSelected(result);\n\n        L.DomEvent.on(li, 'click', function () {\n          if (this.options.collapsed) {\n            this._collapse();\n          } else {\n            this._clearResults();\n          }\n        }, this);\n      };\n\n      if (icon) {\n        icon.src = result.icon;\n      }\n\n      li.setAttribute('data-result-index', index);\n\n      if (result.html) {\n        a.innerHTML = a.innerHTML + result.html;\n      } else {\n        a.appendChild(text);\n      } // Use mousedown and not click, since click will fire _after_ blur,\n      // causing the control to have collapsed and removed the items\n      // before the click can fire.\n\n\n      L.DomEvent.addListener(li, 'mousedown touchstart', mouseDownHandler, this);\n      return li;\n    },\n    _keydown: function _keydown(e) {\n      var _this = this,\n          select = function select(dir) {\n        if (_this._selection) {\n          L.DomUtil.removeClass(_this._selection, 'leaflet-control-geocoder-selected');\n          _this._selection = _this._selection[dir > 0 ? 'nextSibling' : 'previousSibling'];\n        }\n\n        if (!_this._selection) {\n          _this._selection = _this._alts[dir > 0 ? 'firstChild' : 'lastChild'];\n        }\n\n        if (_this._selection) {\n          L.DomUtil.addClass(_this._selection, 'leaflet-control-geocoder-selected');\n        }\n      };\n\n      switch (e.keyCode) {\n        // Escape\n        case 27:\n          if (this.options.collapsed) {\n            this._collapse();\n          }\n\n          break;\n        // Up\n\n        case 38:\n          select(-1);\n          break;\n        // Up\n\n        case 40:\n          select(1);\n          break;\n        // Enter\n\n        case 13:\n          if (this._selection) {\n            var index = parseInt(this._selection.getAttribute('data-result-index'), 10);\n\n            this._geocodeResultSelected(this._results[index]);\n\n            this._clearResults();\n          } else {\n            this._geocode();\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    },\n    _change: function _change() {\n      var v = this._input.value;\n\n      if (v !== this._lastGeocode) {\n        clearTimeout(this._suggestTimeout);\n\n        if (v.length >= this.options.suggestMinLength) {\n          this._suggestTimeout = setTimeout(L.bind(function () {\n            this._geocode(true);\n          }, this), this.options.suggestTimeout);\n        } else {\n          this._clearResults();\n        }\n      }\n    }\n  }),\n  factory: function factory(options) {\n    return new L.Control.Geocoder(options);\n  }\n};","import L from 'leaflet';\nimport { jsonp } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    initialize: function initialize(key) {\n      this.key = key;\n    },\n    geocode: function geocode(query, cb, context) {\n      jsonp('https://dev.virtualearth.net/REST/v1/Locations', {\n        query: query,\n        key: this.key\n      }, function (data) {\n        var results = [];\n\n        if (data.resourceSets.length > 0) {\n          for (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n            var resource = data.resourceSets[0].resources[i],\n                bbox = resource.bbox;\n            results[i] = {\n              name: resource.name,\n              bbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n              center: L.latLng(resource.point.coordinates)\n            };\n          }\n        }\n\n        cb.call(context, results);\n      }, this, 'jsonp');\n    },\n    reverse: function reverse(location, scale, cb, context) {\n      jsonp('//dev.virtualearth.net/REST/v1/Locations/' + location.lat + ',' + location.lng, {\n        key: this.key\n      }, function (data) {\n        var results = [];\n\n        for (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n          var resource = data.resourceSets[0].resources[i],\n              bbox = resource.bbox;\n          results[i] = {\n            name: resource.name,\n            bbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n            center: L.latLng(resource.point.coordinates)\n          };\n        }\n\n        cb.call(context, results);\n      }, this, 'jsonp');\n    }\n  }),\n  factory: function factory(key) {\n    return new L.Control.Geocoder.Bing(key);\n  }\n};","import L from 'leaflet';\nimport { getJSON } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    options: {\n      serviceUrl: 'https://www.mapquestapi.com/geocoding/v1'\n    },\n    initialize: function initialize(key, options) {\n      // MapQuest seems to provide URI encoded API keys,\n      // so to avoid encoding them twice, we decode them here\n      this._key = decodeURIComponent(key);\n      L.Util.setOptions(this, options);\n    },\n    _formatName: function _formatName() {\n      var r = [],\n          i;\n\n      for (i = 0; i < arguments.length; i++) {\n        if (arguments[i]) {\n          r.push(arguments[i]);\n        }\n      }\n\n      return r.join(', ');\n    },\n    geocode: function geocode(query, cb, context) {\n      getJSON(this.options.serviceUrl + '/address', {\n        key: this._key,\n        location: query,\n        limit: 5,\n        outFormat: 'json'\n      }, L.bind(function (data) {\n        var results = [],\n            loc,\n            latLng;\n\n        if (data.results && data.results[0].locations) {\n          for (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n            loc = data.results[0].locations[i];\n            latLng = L.latLng(loc.latLng);\n            results[i] = {\n              name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n              bbox: L.latLngBounds(latLng, latLng),\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      }, this));\n    },\n    reverse: function reverse(location, scale, cb, context) {\n      getJSON(this.options.serviceUrl + '/reverse', {\n        key: this._key,\n        location: location.lat + ',' + location.lng,\n        outputFormat: 'json'\n      }, L.bind(function (data) {\n        var results = [],\n            loc,\n            latLng;\n\n        if (data.results && data.results[0].locations) {\n          for (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n            loc = data.results[0].locations[i];\n            latLng = L.latLng(loc.latLng);\n            results[i] = {\n              name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n              bbox: L.latLngBounds(latLng, latLng),\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      }, this));\n    }\n  }),\n  factory: function factory(key, options) {\n    return new L.Control.Geocoder.MapQuest(key, options);\n  }\n};","import L from 'leaflet';\nimport { getJSON } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    options: {\n      serviceUrl: 'https://api.tiles.mapbox.com/v4/geocode/mapbox.places-v1/',\n      geocodingQueryParams: {},\n      reverseQueryParams: {}\n    },\n    initialize: function initialize(accessToken, options) {\n      L.setOptions(this, options);\n      this.options.geocodingQueryParams.access_token = accessToken;\n      this.options.reverseQueryParams.access_token = accessToken;\n    },\n    geocode: function geocode(query, cb, context) {\n      var params = this.options.geocodingQueryParams;\n\n      if (typeof params.proximity !== 'undefined' && params.proximity.hasOwnProperty('lat') && params.proximity.hasOwnProperty('lng')) {\n        params.proximity = params.proximity.lng + ',' + params.proximity.lat;\n      }\n\n      getJSON(this.options.serviceUrl + encodeURIComponent(query) + '.json', params, function (data) {\n        var results = [],\n            loc,\n            latLng,\n            latLngBounds;\n\n        if (data.features && data.features.length) {\n          for (var i = 0; i <= data.features.length - 1; i++) {\n            loc = data.features[i];\n            latLng = L.latLng(loc.center.reverse());\n\n            if (loc.hasOwnProperty('bbox')) {\n              latLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\n            } else {\n              latLngBounds = L.latLngBounds(latLng, latLng);\n            }\n\n            results[i] = {\n              name: loc.place_name,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    },\n    suggest: function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    },\n    reverse: function reverse(location, scale, cb, context) {\n      getJSON(this.options.serviceUrl + encodeURIComponent(location.lng) + ',' + encodeURIComponent(location.lat) + '.json', this.options.reverseQueryParams, function (data) {\n        var results = [],\n            loc,\n            latLng,\n            latLngBounds;\n\n        if (data.features && data.features.length) {\n          for (var i = 0; i <= data.features.length - 1; i++) {\n            loc = data.features[i];\n            latLng = L.latLng(loc.center.reverse());\n\n            if (loc.hasOwnProperty('bbox')) {\n              latLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\n            } else {\n              latLngBounds = L.latLngBounds(latLng, latLng);\n            }\n\n            results[i] = {\n              name: loc.place_name,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    }\n  }),\n  factory: function factory(accessToken, options) {\n    return new L.Control.Geocoder.Mapbox(accessToken, options);\n  }\n};","import L from 'leaflet';\nimport { getJSON } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    options: {\n      serviceUrl: 'https://api.what3words.com/v2/'\n    },\n    initialize: function initialize(accessToken) {\n      this._accessToken = accessToken;\n    },\n    geocode: function geocode(query, cb, context) {\n      //get three words and make a dot based string\n      getJSON(this.options.serviceUrl + 'forward', {\n        key: this._accessToken,\n        addr: query.split(/\\s+/).join('.')\n      }, function (data) {\n        var results = [],\n            latLng,\n            latLngBounds;\n\n        if (data.hasOwnProperty('geometry')) {\n          latLng = L.latLng(data.geometry['lat'], data.geometry['lng']);\n          latLngBounds = L.latLngBounds(latLng, latLng);\n          results[0] = {\n            name: data.words,\n            bbox: latLngBounds,\n            center: latLng\n          };\n        }\n\n        cb.call(context, results);\n      });\n    },\n    suggest: function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    },\n    reverse: function reverse(location, scale, cb, context) {\n      getJSON(this.options.serviceUrl + 'reverse', {\n        key: this._accessToken,\n        coords: [location.lat, location.lng].join(',')\n      }, function (data) {\n        var results = [],\n            latLng,\n            latLngBounds;\n\n        if (data.status.status === 200) {\n          latLng = L.latLng(data.geometry['lat'], data.geometry['lng']);\n          latLngBounds = L.latLngBounds(latLng, latLng);\n          results[0] = {\n            name: data.words,\n            bbox: latLngBounds,\n            center: latLng\n          };\n        }\n\n        cb.call(context, results);\n      });\n    }\n  }),\n  factory: function factory(accessToken) {\n    return new L.Control.Geocoder.What3Words(accessToken);\n  }\n};","import L from 'leaflet';\nimport { getJSON } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    options: {\n      serviceUrl: 'https://maps.googleapis.com/maps/api/geocode/json',\n      geocodingQueryParams: {},\n      reverseQueryParams: {}\n    },\n    initialize: function initialize(key, options) {\n      this._key = key;\n      L.setOptions(this, options); // Backwards compatibility\n\n      this.options.serviceUrl = this.options.service_url || this.options.serviceUrl;\n    },\n    geocode: function geocode(query, cb, context) {\n      var params = {\n        address: query\n      };\n\n      if (this._key && this._key.length) {\n        params.key = this._key;\n      }\n\n      params = L.Util.extend(params, this.options.geocodingQueryParams);\n      getJSON(this.options.serviceUrl, params, function (data) {\n        var results = [],\n            loc,\n            latLng,\n            latLngBounds;\n\n        if (data.results && data.results.length) {\n          for (var i = 0; i <= data.results.length - 1; i++) {\n            loc = data.results[i];\n            latLng = L.latLng(loc.geometry.location);\n            latLngBounds = L.latLngBounds(L.latLng(loc.geometry.viewport.northeast), L.latLng(loc.geometry.viewport.southwest));\n            results[i] = {\n              name: loc.formatted_address,\n              bbox: latLngBounds,\n              center: latLng,\n              properties: loc.address_components\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    },\n    reverse: function reverse(location, scale, cb, context) {\n      var params = {\n        latlng: encodeURIComponent(location.lat) + ',' + encodeURIComponent(location.lng)\n      };\n      params = L.Util.extend(params, this.options.reverseQueryParams);\n\n      if (this._key && this._key.length) {\n        params.key = this._key;\n      }\n\n      getJSON(this.options.serviceUrl, params, function (data) {\n        var results = [],\n            loc,\n            latLng,\n            latLngBounds;\n\n        if (data.results && data.results.length) {\n          for (var i = 0; i <= data.results.length - 1; i++) {\n            loc = data.results[i];\n            latLng = L.latLng(loc.geometry.location);\n            latLngBounds = L.latLngBounds(L.latLng(loc.geometry.viewport.northeast), L.latLng(loc.geometry.viewport.southwest));\n            results[i] = {\n              name: loc.formatted_address,\n              bbox: latLngBounds,\n              center: latLng,\n              properties: loc.address_components\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    }\n  }),\n  factory: function factory(key, options) {\n    return new L.Control.Geocoder.Google(key, options);\n  }\n};","import L from 'leaflet';\nimport { getJSON } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    options: {\n      serviceUrl: 'https://photon.komoot.de/api/',\n      reverseUrl: 'https://photon.komoot.de/reverse/',\n      nameProperties: ['name', 'street', 'suburb', 'hamlet', 'town', 'city', 'state', 'country']\n    },\n    initialize: function initialize(options) {\n      L.setOptions(this, options);\n    },\n    geocode: function geocode(query, cb, context) {\n      var params = L.extend({\n        q: query\n      }, this.options.geocodingQueryParams);\n      getJSON(this.options.serviceUrl, params, L.bind(function (data) {\n        cb.call(context, this._decodeFeatures(data));\n      }, this));\n    },\n    suggest: function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    },\n    reverse: function reverse(latLng, scale, cb, context) {\n      var params = L.extend({\n        lat: latLng.lat,\n        lon: latLng.lng\n      }, this.options.reverseQueryParams);\n      getJSON(this.options.reverseUrl, params, L.bind(function (data) {\n        cb.call(context, this._decodeFeatures(data));\n      }, this));\n    },\n    _decodeFeatures: function _decodeFeatures(data) {\n      var results = [],\n          i,\n          f,\n          c,\n          latLng,\n          extent,\n          bbox;\n\n      if (data && data.features) {\n        for (i = 0; i < data.features.length; i++) {\n          f = data.features[i];\n          c = f.geometry.coordinates;\n          latLng = L.latLng(c[1], c[0]);\n          extent = f.properties.extent;\n\n          if (extent) {\n            bbox = L.latLngBounds([extent[1], extent[0]], [extent[3], extent[2]]);\n          } else {\n            bbox = L.latLngBounds(latLng, latLng);\n          }\n\n          results.push({\n            name: this._deocodeFeatureName(f),\n            html: this.options.htmlTemplate ? this.options.htmlTemplate(f) : undefined,\n            center: latLng,\n            bbox: bbox,\n            properties: f.properties\n          });\n        }\n      }\n\n      return results;\n    },\n    _deocodeFeatureName: function _deocodeFeatureName(f) {\n      var j, name;\n\n      for (j = 0; !name && j < this.options.nameProperties.length; j++) {\n        name = f.properties[this.options.nameProperties[j]];\n      }\n\n      return name;\n    }\n  }),\n  factory: function factory(options) {\n    return new L.Control.Geocoder.Photon(options);\n  }\n};","import L from 'leaflet';\nimport { getJSON } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    options: {\n      serviceUrl: 'https://search.mapzen.com/v1',\n      geocodingQueryParams: {},\n      reverseQueryParams: {}\n    },\n    initialize: function initialize(apiKey, options) {\n      L.Util.setOptions(this, options);\n      this._apiKey = apiKey;\n      this._lastSuggest = 0;\n    },\n    geocode: function geocode(query, cb, context) {\n      var _this = this;\n\n      getJSON(this.options.serviceUrl + '/search', L.extend({\n        api_key: this._apiKey,\n        text: query\n      }, this.options.geocodingQueryParams), function (data) {\n        cb.call(context, _this._parseResults(data, 'bbox'));\n      });\n    },\n    suggest: function suggest(query, cb, context) {\n      var _this = this;\n\n      getJSON(this.options.serviceUrl + '/autocomplete', L.extend({\n        api_key: this._apiKey,\n        text: query\n      }, this.options.geocodingQueryParams), L.bind(function (data) {\n        if (data.geocoding.timestamp > this._lastSuggest) {\n          this._lastSuggest = data.geocoding.timestamp;\n          cb.call(context, _this._parseResults(data, 'bbox'));\n        }\n      }, this));\n    },\n    reverse: function reverse(location, scale, cb, context) {\n      var _this = this;\n\n      getJSON(this.options.serviceUrl + '/reverse', L.extend({\n        api_key: this._apiKey,\n        'point.lat': location.lat,\n        'point.lon': location.lng\n      }, this.options.reverseQueryParams), function (data) {\n        cb.call(context, _this._parseResults(data, 'bounds'));\n      });\n    },\n    _parseResults: function _parseResults(data, bboxname) {\n      var results = [];\n      L.geoJson(data, {\n        pointToLayer: function pointToLayer(feature, latlng) {\n          return L.circleMarker(latlng);\n        },\n        onEachFeature: function onEachFeature(feature, layer) {\n          var result = {},\n              bbox,\n              center;\n\n          if (layer.getBounds) {\n            bbox = layer.getBounds();\n            center = bbox.getCenter();\n          } else {\n            center = layer.getLatLng();\n            bbox = L.latLngBounds(center, center);\n          }\n\n          result.name = layer.feature.properties.label;\n          result.center = center;\n          result[bboxname] = bbox;\n          result.properties = layer.feature.properties;\n          results.push(result);\n        }\n      });\n      return results;\n    }\n  }),\n  factory: function factory(apiKey, options) {\n    return new L.Control.Geocoder.Mapzen(apiKey, options);\n  }\n};","import L from 'leaflet';\nimport { getJSON } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    options: {\n      service_url: 'http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer'\n    },\n    initialize: function initialize(accessToken, options) {\n      L.setOptions(this, options);\n      this._accessToken = accessToken;\n    },\n    geocode: function geocode(query, cb, context) {\n      var params = {\n        SingleLine: query,\n        outFields: 'Addr_Type',\n        forStorage: false,\n        maxLocations: 10,\n        f: 'json'\n      };\n\n      if (this._key && this._key.length) {\n        params.token = this._key;\n      }\n\n      getJSON(this.options.service_url + '/findAddressCandidates', params, function (data) {\n        var results = [],\n            loc,\n            latLng,\n            latLngBounds;\n\n        if (data.candidates && data.candidates.length) {\n          for (var i = 0; i <= data.candidates.length - 1; i++) {\n            loc = data.candidates[i];\n            latLng = L.latLng(loc.location.y, loc.location.x);\n            latLngBounds = L.latLngBounds(L.latLng(loc.extent.ymax, loc.extent.xmax), L.latLng(loc.extent.ymin, loc.extent.xmin));\n            results[i] = {\n              name: loc.address,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    },\n    suggest: function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    },\n    reverse: function reverse(location, scale, cb, context) {\n      var params = {\n        location: encodeURIComponent(location.lng) + ',' + encodeURIComponent(location.lat),\n        distance: 100,\n        f: 'json'\n      };\n      getJSON(this.options.service_url + '/reverseGeocode', params, function (data) {\n        var result = [],\n            loc;\n\n        if (data && !data.error) {\n          loc = L.latLng(data.location.y, data.location.x);\n          result.push({\n            name: data.address.Match_addr,\n            center: loc,\n            bounds: L.latLngBounds(loc, loc)\n          });\n        }\n\n        cb.call(context, result);\n      });\n    }\n  }),\n  factory: function factory(accessToken, options) {\n    return new L.Control.Geocoder.ArcGis(accessToken, options);\n  }\n};","import L from 'leaflet';\nimport { getJSON as _getJSON } from '../util';\nexport default {\n  \"class\": L.Class.extend({\n    options: {\n      geocodeUrl: 'http://geocoder.api.here.com/6.2/geocode.json',\n      reverseGeocodeUrl: 'http://reverse.geocoder.api.here.com/6.2/reversegeocode.json',\n      app_id: '<insert your app_id here>',\n      app_code: '<insert your app_code here>',\n      geocodingQueryParams: {},\n      reverseQueryParams: {}\n    },\n    initialize: function initialize(options) {\n      L.setOptions(this, options);\n    },\n    geocode: function geocode(query, cb, context) {\n      var params = {\n        searchtext: query,\n        gen: 9,\n        app_id: this.options.app_id,\n        app_code: this.options.app_code,\n        jsonattributes: 1\n      };\n      params = L.Util.extend(params, this.options.geocodingQueryParams);\n      this.getJSON(this.options.geocodeUrl, params, cb, context);\n    },\n    reverse: function reverse(location, scale, cb, context) {\n      var params = {\n        prox: encodeURIComponent(location.lat) + ',' + encodeURIComponent(location.lng),\n        mode: 'retrieveAddresses',\n        app_id: this.options.app_id,\n        app_code: this.options.app_code,\n        gen: 9,\n        jsonattributes: 1\n      };\n      params = L.Util.extend(params, this.options.reverseQueryParams);\n      this.getJSON(this.options.reverseGeocodeUrl, params, cb, context);\n    },\n    getJSON: function getJSON(url, params, cb, context) {\n      _getJSON(url, params, function (data) {\n        var results = [],\n            loc,\n            latLng,\n            latLngBounds;\n\n        if (data.response.view && data.response.view.length) {\n          for (var i = 0; i <= data.response.view[0].result.length - 1; i++) {\n            loc = data.response.view[0].result[i].location;\n            latLng = L.latLng(loc.displayPosition.latitude, loc.displayPosition.longitude);\n            latLngBounds = L.latLngBounds(L.latLng(loc.mapView.topLeft.latitude, loc.mapView.topLeft.longitude), L.latLng(loc.mapView.bottomRight.latitude, loc.mapView.bottomRight.longitude));\n            results[i] = {\n              name: loc.address.label,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    }\n  }),\n  factory: function factory(options) {\n    return new L.Control.Geocoder.HERE(options);\n  }\n};","import L from 'leaflet';\nimport Control from './control';\nimport Nominatim from './geocoders/nominatim';\nimport Bing from './geocoders/bing';\nimport MapQuest from './geocoders/mapquest';\nimport Mapbox from './geocoders/mapbox';\nimport What3Words from './geocoders/what3words';\nimport Google from './geocoders/google';\nimport Photon from './geocoders/photon';\nimport Mapzen from './geocoders/mapzen';\nimport ArcGis from './geocoders/arcgis';\nimport HERE from './geocoders/here';\nvar Geocoder = L.Util.extend(Control[\"class\"], {\n  Nominatim: Nominatim[\"class\"],\n  nominatim: Nominatim.factory,\n  Bing: Bing[\"class\"],\n  bing: Bing.factory,\n  MapQuest: MapQuest[\"class\"],\n  mapQuest: MapQuest.factory,\n  Mapbox: Mapbox[\"class\"],\n  mapbox: Mapbox.factory,\n  What3Words: What3Words[\"class\"],\n  what3words: What3Words.factory,\n  Google: Google[\"class\"],\n  google: Google.factory,\n  Photon: Photon[\"class\"],\n  photon: Photon.factory,\n  Mapzen: Mapzen[\"class\"],\n  mapzen: Mapzen.factory,\n  ArcGis: ArcGis[\"class\"],\n  arcgis: ArcGis.factory,\n  HERE: HERE[\"class\"],\n  here: HERE.factory\n});\nexport default Geocoder;\nL.Util.extend(L.Control, {\n  Geocoder: Geocoder,\n  geocoder: Control.factory\n});","import L from 'leaflet';\r\nimport { MapControl, withLeaflet } from 'react-leaflet';\r\nimport '@toiletmap/leaflet-control-geocoder/src';\r\n\r\nclass GeolocationMapControl extends MapControl {\r\n  createLeafletElement() {\r\n    var control = L.Control.geocoder({\r\n      // eslint-disable-next-line new-cap\r\n      geocoder: new L.Control.Geocoder.nominatim({\r\n        geocodingQueryParams: {\r\n          // Experimental and currently not working\r\n          // http://wiki.openstreetmap.org/wiki/Nominatim#Parameters\r\n          countrycodes: 'gb',\r\n        },\r\n      }),\r\n      collapsed: true,\r\n      placeholder: 'Placename or postcode...',\r\n    });\r\n\r\n    control.markGeocode = function(result) {\r\n      this._map.setView(result.geocode.center);\r\n\r\n      return this;\r\n    };\r\n\r\n    return control;\r\n  }\r\n}\r\n\r\nexport default withLeaflet(GeolocationMapControl);\r\n","import L from 'leaflet';\r\nimport 'leaflet.locatecontrol';\r\nimport { MapControl, withLeaflet } from 'react-leaflet';\r\n\r\nimport styles from './css/loo-map.module.css';\r\n\r\nclass LocateMapControl extends MapControl {\r\n  createLeafletElement() {\r\n    var control = L.control.locate({\r\n      drawCircle: true,\r\n      follow: true,\r\n      keepCurrentZoomLevel: true,\r\n      icon: styles.locate,\r\n      iconLoading: styles.locate,\r\n      showPopup: false,\r\n      onLocationError: Function.prototype,\r\n      onLocationOutsideMapBounds: Function.prototype,\r\n    });\r\n\r\n    return control;\r\n  }\r\n}\r\n\r\nexport default withLeaflet(LocateMapControl);\r\n","import React from 'react';\r\nimport { HashLink } from 'react-router-hash-link';\r\n\r\nimport styles from './css/logo.module.css';\r\nimport logo from '../images/domestos_use_our_loos_logo.png';\r\n\r\nexport default () => (\r\n  <HashLink\r\n    to=\"/use-our-loos\"\r\n    title=\"Domestos - Use Our Loos Campaign\"\r\n    className={styles.wrapper}\r\n    scroll={el => el.scrollIntoView(true)}\r\n  >\r\n    <img src={logo} alt=\"Domestos\" className={styles.useOurLoosLogoImage} />\r\n  </HashLink>\r\n);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport _ from 'lodash';\r\nimport L from 'leaflet';\r\n\r\nimport 'leaflet.markercluster';\r\nimport 'leaflet-loading';\r\n\r\nimport { Map, TileLayer } from 'react-leaflet';\r\nimport GeolocationMapControl from './GeolocationMapControl.js';\r\nimport LocateMapControl from './LocateMapControl.js';\r\nimport NewLogo from './NewLogo.js';\r\n\r\nimport config from '../config.js';\r\n\r\nimport styles from './css/loo-map.module.css';\r\n\r\nimport markerIcon from '../images/marker-icon.png';\r\nimport markerIconRetina from '../images/marker-icon-2x.png';\r\nimport markerIconHighlight from '../images/marker-icon-highlight.png';\r\nimport markerIconRetinaHighlight from '../images/marker-icon-highlight-2x.png';\r\n\r\nL.LooIcon = L.Icon.extend({\r\n  options: {\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12.5, 41],\r\n    highlight: false,\r\n    looId: null,\r\n  },\r\n\r\n  initialize: function(options) {\r\n    if (options.highlight) {\r\n      // Add highlight properties\r\n      this.options = {\r\n        ...this.options,\r\n        iconUrl: markerIconHighlight,\r\n        iconRetinaUrl: markerIconRetinaHighlight,\r\n        className: styles.markerHighlighted,\r\n      };\r\n    } else {\r\n      this.options = {\r\n        ...this.options,\r\n        iconUrl: markerIcon,\r\n        iconRetinaUrl: markerIconRetina,\r\n      };\r\n    }\r\n\r\n    L.Util.setOptions(this, options);\r\n  },\r\n\r\n  createIcon: function() {\r\n    // do we need to be complex to show an index, or are we just a dumb image\r\n    if (!this.options.index) {\r\n      var img = this._createImg(this._getIconUrl('icon'));\r\n      this._setIconStyles(img, 'icon');\r\n      img.setAttribute('data-testid', 'looMarker:' + this.options.looId);\r\n      return img;\r\n    }\r\n\r\n    // make the parent with the image\r\n    var grouper = document.createElement('div');\r\n    grouper.style.background = `url('${this._getIconUrl('icon')}')`;\r\n    grouper.style.backgroundSize = '100% 100%';\r\n    grouper.setAttribute('data-testid', 'looMarker:' + this.options.looId);\r\n    this._setIconStyles(grouper, 'icon');\r\n\r\n    // make an index label\r\n    var index = document.createElement('div');\r\n    index.setAttribute('class', styles.index);\r\n    index.innerHTML = this.options.index;\r\n    grouper.appendChild(index);\r\n\r\n    return grouper;\r\n  },\r\n});\r\n\r\nexport class LooMap extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.onZoom = this.onZoom.bind(this);\r\n\r\n    this.onMove = _.debounce(this.onMove.bind(this), 500, {\r\n      leading: false,\r\n      trailing: true,\r\n    });\r\n\r\n    // Set initial state\r\n    this.state = {\r\n      clusterLayer: null,\r\n    };\r\n\r\n    this.onMarkerClick = this.onMarkerClick.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // Diffiult to determine when `ref` is set since we need to wait for the `Map`\r\n    // child component lifecycle to complete\r\n    //\r\n    // `setTimeout, 0` was not sufficient for both tests and browser\r\n    //\r\n    // https://github.com/tomchentw/react-google-maps/issues/122\r\n    // https://github.com/facebook/react/issues/5053\r\n    if (this.refs.map && this.refs.map.leafletElement) {\r\n      var map = (this.leafletElement = this.refs.map.leafletElement);\r\n      var center = map.getCenter();\r\n\r\n      // Create a marker cluster layer which will be reset each time this\r\n      // component receives props\r\n      var clusterLayer = L.markerClusterGroup({\r\n        showCoverageOnHover: false,\r\n        disableClusteringAtZoom: 15,\r\n        iconCreateFunction: cluster => {\r\n          var count = cluster.getChildCount();\r\n\r\n          return L.divIcon({\r\n            html: `<div class=${styles.cluster}>\r\n                              <span class=${styles.count}>${count}</span>\r\n                              toilets\r\n                          </div>`,\r\n          });\r\n        },\r\n      });\r\n\r\n      this.leafletElement.addLayer(clusterLayer);\r\n\r\n      // Set state and, afterwards, add loo markers\r\n      this.setState({\r\n        clusterLayer,\r\n        markers: {},\r\n      });\r\n    }\r\n\r\n    this.props.onInitialised(map);\r\n    this.props.onUpdateCenter(center);\r\n  }\r\n\r\n  onMove(event) {\r\n    var map = this.leafletElement;\r\n    var center = map.getCenter();\r\n\r\n    this.props.onUpdateCenter(center);\r\n    this.props.onMove(center.lng, center.lat);\r\n  }\r\n\r\n  onZoom(event) {\r\n    var zoom = this.leafletElement.getZoom();\r\n\r\n    this.props.onZoom(zoom);\r\n  }\r\n\r\n  onMarkerClick(loo) {\r\n    if (this.props.activeMarkers) {\r\n      this.props.history.push('/loos/' + loo._id);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // New cluster layer, we probably remounted\r\n    if (prevState.clusterLayer !== this.state.clusterLayer) {\r\n      // We need to re-add everything\r\n      this.addRemoveMarkers(_.keyBy(this.props.loos, '_id'), {});\r\n      return;\r\n    }\r\n\r\n    // Otherwise, we only care if markers and their icons could've changed\r\n    if (\r\n      prevProps.loos === this.props.loos &&\r\n      prevProps.highlight === this.props.highlight &&\r\n      prevProps.countLimit === this.props.countLimit &&\r\n      prevProps.countFrom === this.props.countFrom\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    let loosThen = _.keyBy(prevProps.loos, '_id');\r\n    let loosNow = _.keyBy(this.props.loos, '_id');\r\n\r\n    // Remove elements that have unchanged location from both, effectively\r\n    // diff'ing; this will leave us with markers to remove in loosThen and\r\n    // markers to add in loosNow\r\n    for (let id of Object.keys(loosNow)) {\r\n      // Can a loo's marker (not including icon) be left untouched?\r\n      if (\r\n        loosThen.hasOwnProperty(id) &&\r\n        _.isEqual(loosThen[id].geometry, loosNow[id].geometry)\r\n      ) {\r\n        // Yes, we don't need to update these; same loo in the same place\r\n        delete loosThen[id];\r\n        delete loosNow[id];\r\n      }\r\n    }\r\n\r\n    // Update the markers as appropriate\r\n    this.addRemoveMarkers(loosNow, loosThen);\r\n  }\r\n\r\n  addRemoveMarkers(loosToAdd, loosToRemove) {\r\n    // Assumes loosToAdd and loosToRemove have already been checked for duplicates\r\n    const markers = { ...this.state.markers };\r\n\r\n    // Remove markers in bulk\r\n    const markersToRemove = [];\r\n    for (const id of Object.keys(loosToRemove)) {\r\n      markersToRemove.push(markers[id]);\r\n      delete markers[id];\r\n    }\r\n    this.state.clusterLayer.removeLayers(markersToRemove);\r\n\r\n    // Add markers in bulk\r\n    const markersToAdd = [];\r\n    for (let [id, loo] of Object.entries(loosToAdd)) {\r\n      // Determine whether to highlight the current loo instance\r\n      var highlight = this.props.highlight && loo._id === this.props.highlight;\r\n\r\n      var position = {\r\n        lat: loo.properties.geometry.coordinates[1],\r\n        lng: loo.properties.geometry.coordinates[0],\r\n      };\r\n\r\n      var icon = new L.LooIcon({ highlight, looId: id });\r\n      var marker = L.marker(position, { icon }); // We'll work out numbering below\r\n\r\n      // Individual marker click handler\r\n      marker.on('click', _.partial(this.onMarkerClick, loo));\r\n      markersToAdd.push(marker);\r\n      markers[id] = marker;\r\n    }\r\n    this.state.clusterLayer.addLayers(markersToAdd);\r\n\r\n    // Update icons to reflect appropriate number and highlight status\r\n    for (let i = 0; i < this.props.loos.length; i++) {\r\n      const loo = this.props.loos[i];\r\n\r\n      let index = undefined;\r\n      if (i < this.props.countLimit) {\r\n        index = this.props.countFrom + i;\r\n      }\r\n\r\n      let highlight = false;\r\n      if (this.props.highlight && loo._id === this.props.highlight) {\r\n        highlight = true;\r\n      }\r\n\r\n      // Do we need to change the icon based on properties then and now?\r\n      const iconOptionsNow = markers[loo._id].options.icon.options;\r\n      if (\r\n        iconOptionsNow.index !== index ||\r\n        iconOptionsNow.highlight !== highlight\r\n      ) {\r\n        markers[loo._id].setIcon(\r\n          new L.LooIcon({\r\n            highlight,\r\n            index,\r\n            looId: loo._id,\r\n          })\r\n        );\r\n      }\r\n    }\r\n\r\n    // Cache markers for each loo\r\n    this.setState({\r\n      ...this.state,\r\n      markers,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    // Center point for the map view\r\n    var center = this.props.initialPosition;\r\n\r\n    if (this.leafletElement) {\r\n      center = this.leafletElement.getCenter();\r\n    }\r\n\r\n    var className = this.props.className;\r\n    if (this.props.showCenter) {\r\n      className += ` ${styles['with-crosshair']}`;\r\n      className += ' map--zindexfix';\r\n    }\r\n\r\n    // `minZoom` and `maxZoom` needed on `Map` Component for clustering and `TileLayer` for `react-leaflet`\r\n    return (\r\n      <Map\r\n        ref=\"map\"\r\n        center={center}\r\n        zoom={this.props.initialZoom}\r\n        zoomControl={!this.props.preventZoom && this.props.showZoomControls}\r\n        scrollWheelZoom={!this.props.preventZoom}\r\n        dragging={!this.props.preventDragging}\r\n        className={className}\r\n        onMove={this.onMove}\r\n        onZoomend={this.onZoom}\r\n        minZoom={this.props.minZoom}\r\n        maxZoom={this.props.maxZoom}\r\n        loadingControl={true}\r\n        tap={false}\r\n      >\r\n        <TileLayer\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          minZoom={this.props.minZoom}\r\n          maxZoom={this.props.maxZoom}\r\n          contributor={\r\n            this.props.showcontributor\r\n              ? 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n              : ''\r\n          }\r\n        />\r\n\r\n        {this.props.showSearchControl && <GeolocationMapControl />}\r\n        {this.props.showLocateControl && <LocateMapControl />}\r\n        <NewLogo />\r\n      </Map>\r\n    );\r\n  }\r\n}\r\n\r\nLooMap.propTypes = {\r\n  // An array of loo instances to be represented as map markers, assumed to be from closest to furthest away\r\n  loos: PropTypes.array.isRequired,\r\n\r\n  // Optional CSS class name to override the map element styles\r\n  className: PropTypes.string,\r\n\r\n  // http://leafletjs.com/reference.html#latlng\r\n  initialPosition: PropTypes.oneOfType([\r\n    PropTypes.array,\r\n    PropTypes.shape({\r\n      lat: PropTypes.number,\r\n      lng: PropTypes.number,\r\n    }),\r\n  ]).isRequired,\r\n\r\n  initialZoom: PropTypes.number,\r\n  minZoom: PropTypes.number,\r\n  maxZoom: PropTypes.number,\r\n  preventZoom: PropTypes.bool,\r\n  preventDragging: PropTypes.bool,\r\n  showSearchControl: PropTypes.bool,\r\n  showLocateControl: PropTypes.bool,\r\n  showcontributor: PropTypes.bool,\r\n\r\n  // Label loo markers from a starting number, for a limited number of loos\r\n  countFrom: PropTypes.number,\r\n  countLimit: PropTypes.number,\r\n\r\n  // Note this also has a dependency on `preventZoom`\r\n  showZoomControls: PropTypes.bool,\r\n\r\n  // Draws a crosshair to indicate the center of the map\r\n  showCenter: PropTypes.bool,\r\n\r\n  // Callback fn called with the new `lat`, `lng` and `radius` values.\r\n  // Fired when the view of the map stops changing (e.g. user stopped dragging the map)\r\n  onMove: PropTypes.func,\r\n\r\n  // Callback fn called with the new `zoom` level.\r\n  // Fired once the user has finished zooming\r\n  onZoom: PropTypes.func,\r\n\r\n  // Callback fn called with a reference to the leaflet element.\r\n  // Fired once the component has mounted\r\n  onInitialised: PropTypes.func,\r\n\r\n  // Called on `onMove` and `onInitialised`\r\n  onUpdateCenter: PropTypes.func,\r\n\r\n  // Loo id to highlight\r\n  highlight: PropTypes.string,\r\n\r\n  activeMarkers: PropTypes.bool,\r\n};\r\n\r\nLooMap.defaultProps = {\r\n  loos: [],\r\n  className: styles.map,\r\n  initialZoom: config.initialZoom,\r\n  minZoom: config.minZoom,\r\n  maxZoom: config.maxZoom,\r\n  preventZoom: false,\r\n  preventDragging: false,\r\n  showSearchControl: false,\r\n  showLocateControl: false,\r\n  showZoomControls: true,\r\n  showcontributor: false,\r\n  showCenter: false,\r\n  countLimit: 0,\r\n  countFrom: 1,\r\n  onMove: Function.prototype,\r\n  onZoom: Function.prototype,\r\n  onInitialised: Function.prototype,\r\n  onUpdateCenter: Function.prototype,\r\n  activeMarkers: true,\r\n};\r\n\r\nexport default withRouter(LooMap);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport LooMap from './LooMap';\r\n\r\nimport { actionZoom, actionUpdateCenter } from '../redux/modules/mapControls';\r\n\r\nimport styles from './css/loo-map.module.css';\r\n\r\nclass NearestLooMap extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onUpdateCenter = this.onUpdateCenter.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // Only do if leaflet map element is ready and we're loading\r\n    if (this.looMap && this.props.loadingNearby) {\r\n      this.looMap.refs.map.leafletElement.fire('dataloading');\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    // Only do if leaflet map element is ready and we've started loading or loaded\r\n    if (this.looMap && this.props.loadingNearby !== prevProps.loadingNearby) {\r\n      if (this.props.loadingNearby) {\r\n        this.looMap.refs.map.leafletElement.fire('dataloading');\r\n      } else {\r\n        this.looMap.refs.map.leafletElement.fire('dataload');\r\n      }\r\n    }\r\n  }\r\n\r\n  onUpdateCenter({ lng, lat }) {\r\n    this.props.actionUpdateCenter({ lat, lng });\r\n  }\r\n\r\n  render() {\r\n    var loos = this.props.loos;\r\n    var loo = this.props.loo;\r\n    var looCentre;\r\n    if (loo) {\r\n      looCentre = {\r\n        lat: loo.properties.geometry.coordinates[1],\r\n        lng: loo.properties.geometry.coordinates[0],\r\n      };\r\n    }\r\n\r\n    // Return map to last stored position or default to user location\r\n    var position =\r\n      looCentre || this.props.map.center || this.props.geolocation.position;\r\n\r\n    return (\r\n      <div className={styles.map}>\r\n        {!loos && (\r\n          <div className={styles.loading}>Fetching toilets&hellip;</div>\r\n        )}\r\n\r\n        <LooMap\r\n          wrappedComponentRef={it => (this.looMap = it)}\r\n          loos={loos}\r\n          countLimit={this.props.numberNearest ? 5 : 0}\r\n          showcontributor={true}\r\n          showLocation={true}\r\n          showSearchControl={true}\r\n          showLocateControl={true}\r\n          showCenter={true}\r\n          onZoom={this.props.actionZoom}\r\n          onUpdateCenter={this.onUpdateCenter}\r\n          initialZoom={this.props.map.zoom}\r\n          initialPosition={position}\r\n          highlight={this.props.map.highlight}\r\n          {...this.props.mapProps}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNearestLooMap.propTypes = {\r\n  // An array of loo instances to be represented as map markers\r\n  loos: PropTypes.array,\r\n  // A loo to focus\r\n  loo: PropTypes.object,\r\n  // props to spread (last) over the LooMap instance\r\n  mapProps: PropTypes.object,\r\n  // Whether to show an index on the nearest five loos\r\n  numberNearest: PropTypes.bool,\r\n};\r\n\r\nvar mapStateToProps = state => ({\r\n  geolocation: state.geolocation,\r\n  map: state.mapControls,\r\n  loos: state.loos.nearby,\r\n  loadingNearby: state.loos.loadingNearby,\r\n});\r\n\r\nvar mapDispatchToProps = {\r\n  actionZoom,\r\n  actionUpdateCenter,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(NearestLooMap);\r\n","import { definitions } from '@toiletmap/opening-hours';\nexport default {\n  looProps: {\n    canHumanize: ['accessibleType', 'attended', 'babyChange', 'automatic', 'radar'],\n    definitions: {\n      opening: definitions,\n      type: [{\n        name: 'Female',\n        value: 'female'\n      }, {\n        name: 'Male',\n        value: 'male'\n      }, {\n        name: 'Female and Male',\n        value: 'female and male'\n      }, {\n        name: 'Unisex',\n        value: 'unisex'\n      }, {\n        name: 'Male Urinal',\n        value: 'male urinal'\n      }, {\n        name: 'Children Only',\n        value: 'children only'\n      }, {\n        name: 'None',\n        value: 'none'\n      }],\n      access: [{\n        name: 'Public',\n        value: 'public'\n      }, {\n        name: 'Non-customers permitted',\n        value: 'permissive'\n      }, {\n        name: 'Customers only',\n        value: 'customers only'\n      }]\n    }\n  },\n  humanizePropertyValue: function humanizePropertyValue(val, property) {\n    if (this.looProps.definitions[property]) {\n      // We may a human readable definition of this property value\n      var override = this.looProps.definitions[property].find(function (s) {\n        return s.value === val;\n      });\n\n      if (override) {\n        return override.name;\n      }\n    } // Second condition is for an irregularity in our dataset; do this until we normalise better\n\n\n    if (this.looProps.canHumanize.includes(property) || property === 'fee' && val === 'false') {\n      // We can humanize this kind of property to make it more human-readable\n      return this.humanizeAPIValue(val);\n    } // This was likely entered as human-readable, leave it be\n\n\n    return val;\n  },\n  humanizeAPIValue: function humanizeAPIValue(val) {\n    // Unknown\n    if (val === undefined || val === null) {\n      return 'Not known';\n    } // Capitalise\n\n\n    if (typeof val === 'string') {\n      val = val.replace(/([A-Z])/g, ' $1').replace(/^./, function (str) {\n        return str.toUpperCase();\n      }).trim();\n    } // Readable boolean\n\n\n    if (typeof val === 'boolean' || typeof val === 'string' && ['true', 'false'].indexOf(val.toLowerCase()) !== -1) {\n      val = JSON.parse((val + '').toLowerCase()) ? 'Yes' : 'No';\n    } // Pricing\n\n\n    if (val === '0.00') {\n      val = 'Free';\n    }\n\n    return val;\n  }\n};","import _regeneratorRuntime from \"C:\\\\wamp64\\\\www\\\\neontribe_workplace_2\\\\gbptm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\wamp64\\\\www\\\\neontribe_workplace_2\\\\gbptm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\wamp64\\\\www\\\\neontribe_workplace_2\\\\gbptm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\wamp64\\\\www\\\\neontribe_workplace_2\\\\gbptm\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport querystring from 'querystring';\nimport mappings from './src/mappings';\nimport axios from 'axios';\nvar endpoint = '/api';\n\nvar API =\n/*#__PURE__*/\nfunction () {\n  function API() {\n    _classCallCheck(this, API);\n\n    if (!API.instance) {\n      API.instance = this;\n    }\n  }\n\n  _createClass(API, [{\n    key: \"findLoos\",\n    value: function () {\n      var _findLoos = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(lng, lat, radius) {\n        var qs, url, res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                qs = querystring.stringify({\n                  radius: radius\n                });\n                url = \"\".concat(endpoint, \"/loos/v2/near/\").concat(lng, \"/\").concat(lat, \"?\").concat(qs);\n                _context.next = 4;\n                return axios({\n                  url: url,\n                  headers: {\n                    Accept: 'application/json'\n                  }\n                });\n\n              case 4:\n                res = _context.sent;\n                return _context.abrupt(\"return\", res.data);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function findLoos(_x, _x2, _x3) {\n        return _findLoos.apply(this, arguments);\n      }\n\n      return findLoos;\n    }()\n  }, {\n    key: \"findLooById\",\n    value: function () {\n      var _findLooById = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(id, params) {\n        var query, url, res;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                query = querystring.stringify(params);\n                url = \"\".concat(endpoint, \"/loos/v2/\").concat(id, \"?\").concat(query);\n                _context2.next = 4;\n                return axios({\n                  url: url,\n                  headers: {\n                    Accept: 'application/json'\n                  }\n                });\n\n              case 4:\n                res = _context2.sent;\n                return _context2.abrupt(\"return\", res.data);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function findLooById(_x4, _x5) {\n        return _findLooById.apply(this, arguments);\n      }\n\n      return findLooById;\n    }()\n  }, {\n    key: \"searchLoos\",\n    value: function () {\n      var _searchLoos = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(q) {\n        var query, url, res;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                query = querystring.stringify(q);\n                url = \"\".concat(endpoint, \"/search?\").concat(query);\n                _context3.next = 4;\n                return axios({\n                  url: url,\n                  headers: {\n                    Accept: 'application/json'\n                  }\n                });\n\n              case 4:\n                res = _context3.sent;\n                return _context3.abrupt(\"return\", res.data);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function searchLoos(_x6) {\n        return _searchLoos.apply(this, arguments);\n      }\n\n      return searchLoos;\n    }()\n  }, {\n    key: \"reportLoo\",\n    value: function () {\n      var _reportLoo = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(report, token, from) {\n        var url, res;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                // Todo: Handle HTTP 401\n                url = \"\".concat(endpoint, \"/reports\");\n                _context4.next = 3;\n                return axios({\n                  url: url,\n                  headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    Authorization: \"Bearer \".concat(token)\n                  },\n                  method: 'post',\n                  data: {\n                    report: report,\n                    from: from ? from._id : null\n                  }\n                });\n\n              case 3:\n                res = _context4.sent;\n\n                if (!(res.status !== 201)) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                throw new Error(res.statusText);\n\n              case 6:\n                return _context4.abrupt(\"return\", res.data);\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function reportLoo(_x7, _x8, _x9) {\n        return _reportLoo.apply(this, arguments);\n      }\n\n      return reportLoo;\n    }()\n  }, {\n    key: \"removeLoo\",\n    value: function () {\n      var _removeLoo = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(looId, reason, token) {\n        var url, res;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                // Todo: Handle HTTP 401\n                url = \"\".concat(endpoint, \"/reports/\").concat(looId);\n                _context5.next = 3;\n                return axios({\n                  url: url,\n                  headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    Authorization: \"Bearer \".concat(token)\n                  },\n                  method: 'delete',\n                  data: {\n                    removal_reason: reason\n                  }\n                });\n\n              case 3:\n                res = _context5.sent;\n\n                if (!(res.status !== 200)) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                throw new Error(res.statusText);\n\n              case 6:\n                return _context5.abrupt(\"return\", res.status);\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function removeLoo(_x10, _x11, _x12) {\n        return _removeLoo.apply(this, arguments);\n      }\n\n      return removeLoo;\n    }()\n  }, {\n    key: \"fetchAreaData\",\n    value: function () {\n      var _fetchAreaData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        var searchUrl, res;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                searchUrl = \"\".concat(endpoint, \"/admin_geo/areas\");\n                _context6.next = 3;\n                return axios(searchUrl);\n\n              case 3:\n                res = _context6.sent;\n                return _context6.abrupt(\"return\", res.data);\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function fetchAreaData() {\n        return _fetchAreaData.apply(this, arguments);\n      }\n\n      return fetchAreaData;\n    }()\n  }, {\n    key: \"fetchContributors\",\n    value: function () {\n      var _fetchContributors = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7() {\n        var searchUrl, res;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                searchUrl = \"\".concat(endpoint, \"/statistics/contributors\");\n                _context7.next = 3;\n                return axios(searchUrl);\n\n              case 3:\n                res = _context7.sent;\n                return _context7.abrupt(\"return\", res.data);\n\n              case 5:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      function fetchContributors() {\n        return _fetchContributors.apply(this, arguments);\n      }\n\n      return fetchContributors;\n    }()\n  }]);\n\n  return API;\n}();\n\nvar api = new API();\nObject.freeze(api);\nexport default api;\nexport { api, mappings };","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport MediaQuery from 'react-responsive';\r\nimport _ from 'lodash';\r\nimport { DateTime } from 'luxon';\r\n\r\nimport { actionFindByIdRequest } from '../redux/modules/loos';\r\nimport { actionHighlight } from '../redux/modules/mapControls';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport Loading from '../components/Loading';\r\nimport PreferenceIndicators from '../components/PreferenceIndicators';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\n\r\nimport styles from './css/loo-page.module.css';\r\nimport layout from '../components/css/layout.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nimport { mappings } from '@toiletmap/api-client';\r\nimport config from '../config';\r\n\r\nclass LooPage extends Component {\r\n  // Provides a mapping between loo property names and the values we want to display\r\n  humanizedPropNames = {\r\n    type: 'Facilities',\r\n    accessibleType: 'Accessible facilities',\r\n    babyChange: 'Baby Changing',\r\n    attended: 'Attended',\r\n    access: 'Who can access?',\r\n    radar: 'Radar key',\r\n    fee: 'Fee',\r\n    removal_reason: 'Removed',\r\n  };\r\n\r\n  // Loo property order (top down by property name)\r\n  propertiesSort = [\r\n    'access',\r\n    'type',\r\n    'accessibleType',\r\n    'opening',\r\n    'attended',\r\n    'babyChange',\r\n    'automatic',\r\n    'radar',\r\n    'fee',\r\n    'notes',\r\n  ];\r\n\r\n  // Collection of properties to not display\r\n  propertiesBlacklist = [\r\n    'orig',\r\n    'active',\r\n    'area',\r\n    'name',\r\n    'geocoded',\r\n    'geocoding_method',\r\n    'toObject',\r\n  ];\r\n\r\n  componentDidMount() {\r\n    if (!this.props.loo) {\r\n      this.props.actionFindByIdRequest(this.props.match.params.id);\r\n    }\r\n    this.props.actionHighlight(this.props.match.params.id);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    // Support navigation _between_ loo pages\r\n    if (this.props.match.params.id !== prevProps.match.params.id) {\r\n      if (!this.props.loo) {\r\n        this.props.actionFindByIdRequest(this.props.match.params.id);\r\n      }\r\n      this.props.actionHighlight(this.props.match.params.id);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // Clear any marker highlighting when navigating away\r\n    this.props.actionHighlight(null);\r\n  }\r\n\r\n  getPropertyNames() {\r\n    // All property names in our loo object\r\n    var names = Object.keys(this.props.loo.properties);\r\n\r\n    // Pick out contained properties of known order, we'll put them at the front\r\n    var knownOrder = _.intersection(this.propertiesSort, names);\r\n\r\n    // Pick out all other properties that are not blacklisted, we'll put them after\r\n    var unknownOrder = _.difference(\r\n      names,\r\n      knownOrder,\r\n      this.propertiesBlacklist\r\n    );\r\n    unknownOrder.sort();\r\n\r\n    return knownOrder.concat(unknownOrder);\r\n  }\r\n\r\n  // Wrapper to `@toiletmap/api-client.mappings.humanizeAPIValue` which allows mappings between loo property values and the\r\n  // text we want to display\r\n  humanizePropertyName(val) {\r\n    if (this.humanizedPropNames[val]) {\r\n      return this.humanizedPropNames[val];\r\n    }\r\n\r\n    return mappings.humanizeAPIValue(val);\r\n  }\r\n\r\n  renderMain() {\r\n    var loo = this.props.loo;\r\n    var properties = this.getPropertyNames();\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className={layout.controls}>\r\n            {config.showBackButtons && (\r\n              <button\r\n                onClick={this.props.history.goBack}\r\n                className={controls.btn}\r\n              >\r\n                Back\r\n              </button>\r\n            )}\r\n\r\n            <a\r\n              href={\r\n                'https://maps.apple.com/?dirflg=w&daddr=' +\r\n                [\r\n                  loo.properties.geometry.coordinates[1],\r\n                  loo.properties.geometry.coordinates[0],\r\n                ]\r\n              }\r\n              className={controls.btn}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              Get Directions\r\n            </a>\r\n\r\n            {config.allowAddEditLoo && (\r\n              <Link to={`/loos/${loo._id}/edit`} className={controls.btn}>\r\n                Edit toilet\r\n              </Link>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <h2 className={headings.large}>{loo.properties.name || 'Toilet'}</h2>\r\n\r\n        <div className={styles.preferenceIndicators}>\r\n          <PreferenceIndicators loo={loo} iconSize={2.5} />\r\n        </div>\r\n\r\n        <MediaQuery maxWidth={config.viewport.mobile}>\r\n          <div className={styles.mobileMap}>{this.renderMap()}</div>\r\n        </MediaQuery>\r\n\r\n        <ul className={styles.properties}>\r\n          {properties.map(name => {\r\n            var val = mappings.humanizePropertyValue(\r\n              loo.properties[name],\r\n              name\r\n            );\r\n\r\n            // Filter out useless/unset data\r\n            if (val !== 'Not known' && val !== '' && typeof val !== 'object') {\r\n              return (\r\n                <li className={styles.property} key={name}>\r\n                  <h3 className={styles.propertyName}>\r\n                    {this.humanizePropertyName(name)}\r\n                  </h3>\r\n                  <p className={styles.propertyValue}>{val}</p>\r\n                </li>\r\n              );\r\n            }\r\n\r\n            return null;\r\n          })}\r\n        </ul>\r\n        <h3 className={headings.small}>Data</h3>\r\n        <p>\r\n          Last updated:{' '}\r\n          {DateTime.fromISO(loo.updatedAt).toLocaleString(\r\n            DateTime.DATETIME_MED\r\n          )}\r\n        </p>\r\n        <p>\r\n          View more detailed data about this Toilet at{' '}\r\n          <a\r\n            href={`/explorer/loos/${loo._id}`}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            Toilet Map Explorer\r\n          </a>\r\n          .\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return (\r\n      <NearestLooMap\r\n        loo={this.props.loo}\r\n        mapProps={{\r\n          showLocation: false,\r\n          showSearchControl: false,\r\n          showLocateControl: false,\r\n          showCenter: false,\r\n          countLimit: null,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.loo) {\r\n      return (\r\n        <PageLayout\r\n          main={<Loading message={'Fetching Toilet Data'} />}\r\n          map={<Loading message={'Fetching Toilet Data'} />}\r\n        />\r\n      );\r\n    }\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nvar mapStateToProps = (state, ownProps) => ({\r\n  app: state.app,\r\n  loo: state.loos.byId[ownProps.match.params.id] || null,\r\n});\r\n\r\nvar mapDispatchToProps = {\r\n  actionFindByIdRequest,\r\n  actionHighlight,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(LooPage);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport {\r\n  actionRemoveRequest,\r\n  actionFindByIdRequest,\r\n} from '../redux/modules/loos';\r\n\r\nimport config from '../config';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport Loading from '../components/Loading';\r\nimport LooMap from '../components/LooMap';\r\n\r\nimport layout from '../components/css/layout.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nclass RemovePage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      reason: '',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.loo) {\r\n      this.props.actionFindByIdRequest(this.props.match.params.id);\r\n    }\r\n  }\r\n\r\n  updateReason = evt => {\r\n    let reason = evt.currentTarget.value;\r\n    this.setState(() => ({\r\n      reason,\r\n    }));\r\n  };\r\n\r\n  doSubmit = () => {\r\n    this.props.actionRemoveRequest(this.props.loo._id, this.state.reason);\r\n  };\r\n\r\n  renderMain() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className={layout.controls}>\r\n            {config.showBackButtons && (\r\n              <button\r\n                onClick={this.props.history.goBack}\r\n                className={controls.btn}\r\n              >\r\n                Back\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <h2 className={headings.large}>Toilet Remover</h2>\r\n\r\n        <p>\r\n          Please let us know why you're removing this toilet from the map using\r\n          the form below.\r\n        </p>\r\n\r\n        <label>\r\n          Reason for removal\r\n          <textarea\r\n            type=\"text\"\r\n            name=\"reason\"\r\n            className={controls.text}\r\n            value={this.state.reason}\r\n            onChange={this.updateReason}\r\n          />\r\n        </label>\r\n\r\n        <button onClick={this.doSubmit} className={controls.btnCaution}>\r\n          Remove it\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    var coords = {\r\n      lat: this.props.loo.properties.geometry.coordinates[1],\r\n      lng: this.props.loo.properties.geometry.coordinates[0],\r\n    };\r\n    return (\r\n      <LooMap\r\n        loos={[this.props.loo]}\r\n        initialPosition={coords}\r\n        highlight={this.props.loo._id}\r\n        showLocation={false}\r\n        showSearchControl={false}\r\n        showLocateControl={false}\r\n        showCenter={false}\r\n        preventDragging={true}\r\n        preventZoom={true}\r\n        minZoom={config.editMinZoom}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.loo) {\r\n      return (\r\n        <PageLayout\r\n          main={<Loading message={'Fetching Toilet Data'} />}\r\n          map={<Loading message={'Fetching Toilet Data'} />}\r\n        />\r\n      );\r\n    }\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nvar mapStateToProps = (state, ownProps) => ({\r\n  app: state.app,\r\n  loo: state.loos.byId[ownProps.match.params.id] || null,\r\n});\r\n\r\nvar mapDispatchToProps = {\r\n  actionRemoveRequest,\r\n  actionFindByIdRequest,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(RemovePage);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport styles from './css/dismissable-box.module.css';\r\n\r\nimport config from '../config.js';\r\n\r\nclass DismissableBox extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // Set the initial state\r\n    this.state = {\r\n      dimissed: false,\r\n    };\r\n\r\n    this.onDismiss = this.onDismiss.bind(this);\r\n  }\r\n\r\n  onDismiss() {\r\n    var persistKey = this.props.persistKey;\r\n\r\n    this.setState({\r\n      dismissed: true,\r\n    });\r\n\r\n    if (persistKey) {\r\n      config.setSetting('dismissed', persistKey, true);\r\n    }\r\n\r\n    this.props.onDismiss();\r\n  }\r\n\r\n  render() {\r\n    var persistKey = this.props.persistKey;\r\n\r\n    if (\r\n      this.state.dismissed ||\r\n      (persistKey && config.getSetting('dismissed', persistKey))\r\n    ) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className={styles.container}>\r\n        <h2 className={styles.title}>{this.props.title}</h2>\r\n        <div dangerouslySetInnerHTML={{ __html: this.props.content }} />\r\n        <button className={styles.close} onClick={this.onDismiss}>\r\n          ✖\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDismissableBox.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  content: PropTypes.string.isRequired,\r\n\r\n  // If specified, the dismissed state will be persisted with this identifier\r\n  // in a browser cookie\r\n  persistKey: PropTypes.string,\r\n\r\n  // Callback fn triggered once a message has been dismissed\r\n  onDismiss: PropTypes.func,\r\n};\r\n\r\nDismissableBox.defaultProps = {\r\n  onDismiss: Function.prototype,\r\n};\r\n\r\nexport default DismissableBox;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport LooMap from './LooMap';\r\nimport PreferenceIndicators from './PreferenceIndicators';\r\n\r\nimport styles from './css/loo-list-item.module.css';\r\n\r\nfunction round(value, precision) {\r\n  var multiplier = Math.pow(10, precision || 0);\r\n  return Math.round(value * multiplier) / multiplier;\r\n}\r\n\r\nfunction humanizeDistance(meters) {\r\n  if (meters < 1000) {\r\n    return `${round(meters, 0)}m`;\r\n  }\r\n  return `${round(meters / 1000, 1)}km`;\r\n}\r\n\r\nclass LooListItem extends Component {\r\n  render() {\r\n    var loo = this.props.loo;\r\n\r\n    var coords = [\r\n      this.props.loo.properties.geometry.coordinates[1],\r\n      this.props.loo.properties.geometry.coordinates[0],\r\n    ];\r\n\r\n    return (\r\n      <Link\r\n        data-testid={`loo:${loo._id}`}\r\n        to={`/loos/${loo._id}`}\r\n        className={styles.container}\r\n        onMouseOver={this.props.onHoverStart}\r\n        onMouseOut={this.props.onHoverEnd}\r\n      >\r\n        <LooMap\r\n          countFrom={this.props.index}\r\n          countLimit={1}\r\n          showZoomControls={false}\r\n          preventZoom={true}\r\n          preventDragging={true}\r\n          loos={[loo]}\r\n          initialPosition={coords}\r\n          activeMarkers={false}\r\n        />\r\n\r\n        <div className={styles.link}>\r\n          <div className={styles.preferenceIndicators}>\r\n            <PreferenceIndicators loo={loo} iconSize={1.4} />\r\n          </div>\r\n\r\n          <span className={styles.linkText}>More info</span>\r\n        </div>\r\n\r\n        <div className={styles.distance + ' distance--zindexfix'}>\r\n          {humanizeDistance(loo.distance)}\r\n        </div>\r\n      </Link>\r\n    );\r\n  }\r\n}\r\n\r\nLooListItem.propTypes = {\r\n  loo: PropTypes.object.isRequired,\r\n  index: PropTypes.number, // a number to show by the loo\r\n  onHoverStart: PropTypes.func,\r\n  onHoverEnd: PropTypes.func,\r\n};\r\n\r\nLooListItem.defaultProps = {\r\n  onHoverStart: Function.prototype,\r\n  onHoverEnd: Function.prototype,\r\n};\r\n\r\nexport default LooListItem;\r\n","export const TOGGLE_VIEW_MODE = 'APP/TOGGLE_VIEW_MODE/REQUEST';\r\n\r\n// Actions\r\nexport const actionToggleViewMode = () => ({\r\n  type: TOGGLE_VIEW_MODE,\r\n});\r\n\r\nexport const actions = {\r\n  [TOGGLE_VIEW_MODE]: actionToggleViewMode,\r\n};\r\n\r\n// Action Handlers\r\nconst ACTION_HANDLERS = {\r\n  [TOGGLE_VIEW_MODE]: function(state, action) {\r\n    return {\r\n      ...state,\r\n      viewMode: state.viewMode === 'map' ? 'list' : 'map',\r\n    };\r\n  },\r\n};\r\n\r\n// Reducer\r\nconst initialState = {\r\n  viewMode: 'map',\r\n};\r\n\r\nexport default function appReducer(state = initialState, action) {\r\n  const handler = ACTION_HANDLERS[action.type];\r\n  return handler ? handler(state, action) : state;\r\n}\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport MediaQuery from 'react-responsive';\r\nimport _ from 'lodash';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\nimport DismissableBox from '../components/DismissableBox';\r\nimport LooListItem from '../components/LooListItem';\r\nimport Notification from '../components/Notification';\r\n\r\nimport styles from './css/home-page.module.css';\r\nimport toiletMap from '../components/css/loo-map.module.css';\r\nimport layout from '../components/css/layout.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nimport {\r\n  actionHighlight,\r\n  actionUpdateCenter,\r\n} from '../redux/modules/mapControls';\r\nimport { actionToggleViewMode } from '../redux/modules/app';\r\nimport { actionLogin, actionLogout } from '../redux/modules/auth';\r\n\r\nimport config from '../config';\r\n\r\nexport class HomePage extends Component {\r\n  componentDidMount() {\r\n    var center = this.props.mapControls.center;\r\n\r\n    if (!this.props.loos) {\r\n      this.props.actionUpdateCenter(center);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // Clear any marker highlighting when navigating away\r\n    this.props.actionHighlight(null);\r\n  }\r\n\r\n  renderList(mobile) {\r\n    var loos = this.props.loos;\r\n\r\n    // Loading - either this is the first query of the user or they are on a\r\n    // mobile and so can't rely on the map's loading spinner to know the loos\r\n    // they see are outdated\r\n    if (!loos || (this.props.loadingNearby && mobile)) {\r\n      return (\r\n        <Notification>\r\n          <p>Fetching toilets&hellip;</p>\r\n        </Notification>\r\n      );\r\n    }\r\n\r\n    // No results\r\n    if (loos && !loos.length) {\r\n      return (\r\n        <Notification>\r\n          <p>\r\n            No toilets found within {config.nearestRadius / 1000}\r\n            km.\r\n          </p>\r\n        </Notification>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <h2 className={headings.large}>Nearest Toilets</h2>\r\n        <ul className={styles.looList}>\r\n          {loos &&\r\n            loos.slice(0, config.nearestListLimit).map((loo, i) => (\r\n              <li key={loo._id} className={styles.looListItem}>\r\n                <LooListItem\r\n                  loo={loo}\r\n                  onHoverStart={_.partial(this.props.actionHighlight, loo._id)}\r\n                  onHoverEnd={_.partial(this.props.actionHighlight, undefined)}\r\n                  index={i + 1}\r\n                />\r\n              </li>\r\n            ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderWelcome() {\r\n    var content = `\r\n            <p>The ${\r\n              config.nearestListLimit\r\n            } nearest toilets are listed below. Click more info to find out about\r\n            each toilet's features.</p><p>You can set preferences to highlight toilets that meet your specific\r\n            needs.</p>\r\n        `;\r\n\r\n    return (\r\n      <DismissableBox persistKey=\"home-welcome\" title=\"Hi!\" content={content} />\r\n    );\r\n  }\r\n\r\n  renderMain() {\r\n    var mode = this.props.app.viewMode;\r\n\r\n    return (\r\n      <div className={styles.container}>\r\n        {/* Logged in message */}\r\n        {this.props.isAuthenticated && (\r\n          <Notification>\r\n            <p>\r\n              Logged in. <button onClick={this.props.doLogout}>Log out</button>\r\n            </p>\r\n          </Notification>\r\n        )}\r\n\r\n        <div className={layout.controls}>\r\n          {config.allowAddEditLoo && (\r\n            <Link\r\n              to=\"/report\"\r\n              className={controls.btn}\r\n              data-testid=\"add-a-toilet\"\r\n            >\r\n              Add a toilet\r\n            </Link>\r\n          )}\r\n\r\n          <MediaQuery maxWidth={config.viewport.mobile}>\r\n            <button\r\n              className={controls.btn}\r\n              onClick={this.props.actionToggleViewMode}\r\n            >\r\n              {mode === 'list' ? 'View map' : 'View list'}\r\n            </button>\r\n          </MediaQuery>\r\n        </div>\r\n\r\n        <MediaQuery\r\n          maxWidth={config.viewport.mobile}\r\n          className={styles.mobileContent}\r\n        >\r\n          {mode === 'list' && this.renderWelcome()}\r\n          {mode === 'list' && this.renderList(true)}\r\n          {mode === 'map' && (\r\n            <div className={styles.mobileMap}>\r\n              <div className={toiletMap.map}>{this.renderMap()}</div>\r\n            </div>\r\n          )}\r\n        </MediaQuery>\r\n        <MediaQuery minWidth={config.viewport.mobile}>\r\n          {this.renderWelcome()}\r\n          {this.renderList(false)}\r\n        </MediaQuery>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return <NearestLooMap numberNearest />;\r\n  }\r\n\r\n  render() {\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nHomePage.propTypes = {\r\n  loos: PropTypes.array,\r\n};\r\n\r\nvar mapStateToProps = state => ({\r\n  geolocation: state.geolocation,\r\n  mapControls: state.mapControls,\r\n  loos: state.loos.nearby,\r\n  app: state.app,\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n  loadingNearby: state.loos.loadingNearby,\r\n});\r\n\r\nvar mapDispatchToProps = {\r\n  actionHighlight,\r\n  actionUpdateCenter,\r\n  actionToggleViewMode,\r\n  doLogout: actionLogout,\r\n  doLogin: actionLogin,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(HomePage);\r\n","import React, { Component } from 'react';\r\n\r\nimport config from '../config';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\n\r\nimport lists from '../css/lists.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport layout from '../components/css/layout.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nclass AboutPage extends Component {\r\n  renderMain() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className={layout.controls}>\r\n            {config.showBackButtons && (\r\n              <button\r\n                onClick={this.props.history.goBack}\r\n                className={controls.btn}\r\n              >\r\n                Back\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <h2 id=\"about\" className={headings.regular}>\r\n          About the map\r\n        </h2>\r\n        <p>\r\n          The Great British Public Toilet Map is the UK's largest database of\r\n          publicly-accessible toilets, with over 11000 facilities.\r\n        </p>\r\n\r\n        <p>\r\n          It is run by{' '}\r\n          <a\r\n            href=\"https://publicconvenience.org\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            Public Convenience\r\n          </a>\r\n          , a joint venture between researchers Dr Jo-Anne Bichard and Gail\r\n          Ramster (who created the map at the{' '}\r\n          <a\r\n            href=\"http://www.rca.ac.uk/research-innovation/helen-hamlyn-centre\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            RCA Helen Hamlyn Centre for Design\r\n          </a>\r\n          ) and software development company{' '}\r\n          <a\r\n            href=\"https://neontribe.co.uk\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            Neontribe\r\n          </a>{' '}\r\n          (who designed and built it).\r\n        </p>\r\n        <div className={layout.bandedSection}>\r\n          <div className={layout.bandedSectionText}>\r\n            <div className={layout.mainContainer}>\r\n              <h2 id=\"use-our-loos\" className={headings.regular}>\r\n                Use Our Loos\r\n              </h2>\r\n\r\n              <p>\r\n                We all need toilets. When you need to go, you need to go. At\r\n                home or in an office this isn’t a problem. However, out and\r\n                about, are you sure there’s somewhere to go when the need\r\n                arises?\r\n              </p>\r\n\r\n              <p>\r\n                Across the UK, more than one in every three public toilets have\r\n                been closed over the last two decades. Some councils are already\r\n                without a single free-to-use public convenience.\r\n              </p>\r\n\r\n              <p>\r\n                <strong>Use Our Loos</strong> is the first national community\r\n                toilet scheme, created by the{' '}\r\n                <a\r\n                  href=\"http://www.btaloos.co.uk\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  British Toilet Association\r\n                </a>\r\n                ,{' '}\r\n                <a\r\n                  href=\"http://www.domestos.co.uk\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  Domestos\r\n                </a>{' '}\r\n                and the <strong>Great British Public Toilet Map</strong>, with\r\n                the ambition to unlock the loos that are hidden in high street\r\n                cafes, restaurants, coffee shops and bars and open them up to\r\n                the community.\r\n              </p>\r\n\r\n              <p>\r\n                As more public loos are closed, we’re asking that more loos are\r\n                made public.\r\n              </p>\r\n\r\n              <p>\r\n                We’re inviting businesses to sign up and welcome everyone,\r\n                customers and non-customers, to use their loos. In return, we’re\r\n                providing them with free Domestos product, directing people to\r\n                their venues and driving local fame so they will benefit from\r\n                increased customers and a stronger connection to their\r\n                community.\r\n              </p>\r\n\r\n              <p>\r\n                We’re inviting the public to use our map to discover loos near\r\n                them and to help us improve the service by adding new locations\r\n                or flagging loos that have closed.\r\n              </p>\r\n\r\n              <p>\r\n                To register your business for the Use Our Loos campaign please\r\n                contact{' '}\r\n                <a\r\n                  href=\"mailto:useourloos@gmail.com\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  useourloos@gmail.com\r\n                </a>\r\n              </p>\r\n              <p>\r\n                You can also register your interest{' '}\r\n                <a\r\n                  href=\"https://goo.gl/forms/JRw6J7yoDe46YIB23\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  here.\r\n                </a>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <h2 id=\"contributing\" className={headings.regular}>\r\n          Thinking about adding a toilet?\r\n        </h2>\r\n\r\n        <p>\r\n          A publicly-accessible toilet means any toilet that the public are\r\n          allowed to access without needing to be a customer.\r\n        </p>\r\n\r\n        <h3 className={headings.small}>Public toilets</h3>\r\n        <ul className={lists.inset}>\r\n          <li>Council-run toilets and other public toilet blocks</li>\r\n          <li>\r\n            Toilets in train stations, bus stations, service/petrol stations,\r\n            tube stations, ferry terminals, airports and other transport\r\n            networks\r\n          </li>\r\n          <li>Shopping centre toilets</li>\r\n        </ul>\r\n\r\n        <h3 className={headings.small}>Other publicly-accessible toilets</h3>\r\n        <ul className={lists.inset}>\r\n          <li>\r\n            Toilets in public buildings, such as town halls, libraries,\r\n            hospitals, museums and leisure centres\r\n          </li>\r\n          <li>\r\n            Toilets in other businesses where the business agrees that the\r\n            public can use their toilets without having to buy anything. These\r\n            are often part of Community Toilet Schemes (run by councils) and can\r\n            include shops, cafes, supermarkets, restaurants, hotels and pubs\r\n          </li>\r\n        </ul>\r\n\r\n        <p>\r\n          <strong>\r\n            We try not to show toilets where you need to ask permission to use\r\n            it\r\n          </strong>\r\n          , such as those that are for customers-only. The exception is\r\n          platform-side toilets at stations. These are only accessible to\r\n          ticket-holders but we feel it is useful information to include.\r\n        </p>\r\n\r\n        <p>\r\n          Anyone can go on the website and{' '}\r\n          <strong>add, edit or remove toilets</strong>. We also use open data\r\n          including from the{' '}\r\n          <a\r\n            href=\"https://www.openstreetmap.org\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            OpenStreetMap\r\n          </a>{' '}\r\n          project and request information from councils, private companies and\r\n          organisations.\r\n        </p>\r\n\r\n        <p>\r\n          <strong>\r\n            If you have any problems updating the toilets, or wish to send us\r\n            toilet details or comments, please contact{' '}\r\n            <a href=\"mailto:gbtoiletmap@gmail.com\">gbtoiletmap@gmail.com</a>.\r\n          </strong>\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return <NearestLooMap numberNearest />;\r\n  }\r\n\r\n  render() {\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nexport default AboutPage;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport MediaQuery from 'react-responsive';\r\nimport _ from 'lodash';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport Loading from '../components/Loading';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\nimport DismissableBox from '../components/DismissableBox';\r\nimport Notification from '../components/Notification';\r\n\r\nimport {\r\n  actionReportRequest,\r\n  actionFindByIdRequest,\r\n} from '../redux/modules/loos';\r\n\r\nimport { actionHighlight } from '../redux/modules/mapControls';\r\n\r\nimport config from '../config';\r\nimport { mappings } from '@toiletmap/api-client';\r\n\r\nimport styles from './css/edit-loo-page.module.css';\r\nimport layout from '../components/css/layout.module.css';\r\nimport helpers from '../css/helpers.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nclass AddEditPage extends Component {\r\n  questionnaireMap = [\r\n    {\r\n      question: 'Attended?',\r\n      property: 'attended',\r\n    },\r\n    {\r\n      question: 'Baby changing?',\r\n      property: 'babyChange',\r\n    },\r\n    {\r\n      question: 'Automatic?',\r\n      property: 'automatic',\r\n    },\r\n    {\r\n      question: 'Radar key?',\r\n      property: 'radar',\r\n    },\r\n  ];\r\n\r\n  optionsMap = mappings.looProps.definitions;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    var state = {\r\n      // Storing a local copy of the loo allows us to keep track of any changes.\r\n      // Skeleton loo structure required to track state.\r\n      loo: {\r\n        active: null,\r\n        name: '',\r\n        access: '',\r\n        type: '',\r\n        accessibleType: '',\r\n        opening: '',\r\n        notes: '',\r\n        fee: '',\r\n      },\r\n    };\r\n\r\n    // Set questionnaire loo property defaults\r\n    this.questionnaireMap.forEach(q => {\r\n      state.loo[q.property] = '';\r\n    });\r\n\r\n    // Deep extend loo state to ensure we get all properties (since we can't guarantee\r\n    // that `this.props.loo` will include them all)\r\n    state.loo = _.merge({}, state.loo, props.loo ? props.loo.properties : {});\r\n\r\n    // Keep track of defaults so we only submit new information\r\n    state.originalData = _.cloneDeep(state.loo);\r\n    state.originalCenter = this.getCenter();\r\n\r\n    // Set initial internal state\r\n    this.state = state;\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleTriStateChange = this.handleTriStateChange.bind(this);\r\n    this.save = this.save.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // If our url contains a loo id and we don't have the data, ask for it\r\n    if (this.props.match.params.id) {\r\n      if (!this.props.loo) {\r\n        this.props.actionFindByIdRequest(this.props.match.params.id);\r\n      }\r\n      this.props.actionHighlight(this.props.match.params.id);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // Clear any marker highlighting when navigating away\r\n    this.props.actionHighlight(null);\r\n  }\r\n\r\n  handleChange(event) {\r\n    // Avoid state mutation\r\n    var loo = _.cloneDeep(this.state.loo);\r\n\r\n    // Sets nested loo property value\r\n    _.set(loo, event.target.name, event.target.value);\r\n\r\n    this.setState({\r\n      loo,\r\n    });\r\n  }\r\n\r\n  handleTriStateChange(event) {\r\n    let val;\r\n    switch (event.target.value) {\r\n      case 'true':\r\n        val = true;\r\n        break;\r\n      case 'false':\r\n        val = false;\r\n        break;\r\n      default:\r\n        val = event.target.value;\r\n    }\r\n\r\n    // Avoid state mutation\r\n    var loo = _.cloneDeep(this.state.loo);\r\n\r\n    _.set(loo, event.target.name, val);\r\n\r\n    this.setState({\r\n      loo,\r\n    });\r\n  }\r\n\r\n  isDerived() {\r\n    // Presenve of this.props.loo indicates that we are editing\r\n    // Conditional expression converts truthy/falsey to boolean\r\n    return this.props.loo ? true : false;\r\n  }\r\n\r\n  getNovelInput() {\r\n    const before = _.cloneDeep(this.state.originalData);\r\n    const now = _.cloneDeep(this.state.loo);\r\n\r\n    // Add the active state for which there's no user-faciong form control as yet.\r\n    now.active = true;\r\n\r\n    // Add geometry\r\n    before.geometry = {\r\n      type: 'Point',\r\n      coordinates: [\r\n        this.state.originalCenter.lng,\r\n        this.state.originalCenter.lat,\r\n      ],\r\n    };\r\n    now.geometry = {\r\n      type: 'Point',\r\n      coordinates: [this.getCenter().lng, this.getCenter().lat],\r\n    };\r\n\r\n    // Keep only new or changed data, by comparing to the form's initial state\r\n    const changes = onlyChanges(now, before);\r\n\r\n    if (!this.isDerived()) {\r\n      // If we're a new loo, we always want geometry, regardless of whether it\r\n      // has changed since the start of the form\r\n      changes.geometry = now.geometry;\r\n    }\r\n\r\n    return changes;\r\n  }\r\n\r\n  getCenter() {\r\n    // Preferably, use the maps center coordinates:\r\n    // these will default to the loo position if a loo has been provided\r\n    if (this.props.map.center) {\r\n      return this.props.map.center;\r\n    }\r\n\r\n    // Else default center coordinates to the user's location:\r\n    // this will be the case when a loo has not been provided to edit\r\n    // e.g. the user has directly navigated to /report\r\n    return this.props.geolocation.position;\r\n  }\r\n\r\n  save() {\r\n    const changes = this.getNovelInput();\r\n\r\n    // Always associate geometry with a report, even if unchanged\r\n    changes.geometry = {\r\n      type: 'Point',\r\n      coordinates: [this.getCenter().lng, this.getCenter().lat],\r\n    };\r\n\r\n    // Set questionnaire options to null before transport.\r\n    this.questionnaireMap.forEach(q => {\r\n      if (changes[q.property] === '') changes[q.property] = null;\r\n    });\r\n\r\n    this.props.actionReportRequest(\r\n      changes,\r\n      this.isDerived() ? this.props.loo : undefined\r\n    );\r\n  }\r\n\r\n  renderMain() {\r\n    const loo = this.state.loo;\r\n    const center = this.getCenter();\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className={layout.controls}>\r\n            {config.showBackButtons && (\r\n              <button\r\n                onClick={this.props.history.goBack}\r\n                className={controls.btn}\r\n              >\r\n                Back\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {this.isDerived() ? (\r\n          <h2 className={headings.large}>Update This Toilet</h2>\r\n        ) : (\r\n          <h2 className={headings.large}>Add This Toilet</h2>\r\n        )}\r\n\r\n        <MediaQuery maxWidth={config.viewport.mobile}>\r\n          <div className={styles.mobileMap}>{this.renderMap()}</div>\r\n        </MediaQuery>\r\n\r\n        <Notification>\r\n          <p>Align the crosshair with where you believe the toilet to be.</p>\r\n        </Notification>\r\n\r\n        <DismissableBox\r\n          persistKey=\"edit-welcome\"\r\n          title=\"Welcome Contributor!\"\r\n          content=\"Please fill in everything you can about the toilet below.\"\r\n        />\r\n\r\n        <label>\r\n          Toilet name\r\n          <input\r\n            name=\"name\"\r\n            type=\"text\"\r\n            className={controls.text}\r\n            value={loo.name === null ? '' : loo.name}\r\n            onChange={this.handleChange}\r\n            data-testid=\"toilet-name\"\r\n          />\r\n        </label>\r\n\r\n        <label>\r\n          Who can access?\r\n          <select\r\n            name=\"access\"\r\n            className={controls.dropdown}\r\n            value={loo.access === null ? '' : loo.access}\r\n            onChange={this.handleChange}\r\n            data-testid=\"who-can-access\"\r\n          >\r\n            <option value=\"\">Unknown</option>\r\n            {this.optionsMap.access.map((option, index) => (\r\n              <option key={index} value={option.value}>\r\n                {option.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n\r\n        <label>\r\n          Facilities\r\n          <select\r\n            name=\"type\"\r\n            className={controls.dropdown}\r\n            value={loo.type === null ? '' : loo.type}\r\n            onChange={this.handleChange}\r\n            data-testid=\"facilities\"\r\n          >\r\n            <option value=\"\">Unknown</option>\r\n            {this.optionsMap.type.map((option, index) => (\r\n              <option key={index} value={option.value}>\r\n                {option.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n\r\n        <label>\r\n          Accessible facilities\r\n          <select\r\n            name=\"accessibleType\"\r\n            className={controls.dropdown}\r\n            value={loo.accessibleType === null ? '' : loo.accessibleType}\r\n            onChange={this.handleChange}\r\n            data-testid=\"accessible-facilities\"\r\n          >\r\n            <option value=\"\">Unknown</option>\r\n            {this.optionsMap.type.map((option, index) => (\r\n              <option key={index} value={option.value}>\r\n                {option.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n\r\n        <label>\r\n          Opening hours\r\n          <select\r\n            name=\"opening\"\r\n            className={controls.dropdown}\r\n            value={loo.opening === null ? '' : loo.opening}\r\n            onChange={this.handleChange}\r\n            data-testid=\"opening-hours\"\r\n          >\r\n            <option value=\"\">Unknown</option>\r\n            {this.optionsMap.opening.map((option, index) => (\r\n              <option key={index} value={option.value}>\r\n                {option.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n\r\n        <div className={styles.questionnaire}>\r\n          <div>\r\n            <span className={styles.questionnaireCol} />\r\n            <span className={styles.questionnaireCol} id=\"yes\">\r\n              Yes\r\n            </span>\r\n            <span className={styles.questionnaireCol} id=\"no\">\r\n              No\r\n            </span>\r\n            <span className={styles.questionnaireCol} id=\"unknown\">\r\n              Don't know\r\n            </span>\r\n          </div>\r\n\r\n          {this.questionnaireMap.map((q, index) => (\r\n            <fieldset key={index} className={styles.questionnaireGroup}>\r\n              <legend className={helpers.visuallyHidden}>{q.question}</legend>\r\n              <span className={styles.questionnaireCol}>{q.question}</span>\r\n              <input\r\n                name={q.property}\r\n                className={styles.questionnaireCol}\r\n                type=\"radio\"\r\n                value={true}\r\n                aria-labelledby=\"yes\"\r\n                checked={loo[q.property] === true}\r\n                onChange={this.handleTriStateChange}\r\n                data-testid={`${q.property}:yes`}\r\n              />\r\n              <input\r\n                name={q.property}\r\n                className={styles.questionnaireCol}\r\n                type=\"radio\"\r\n                value={false}\r\n                aria-labelledby=\"no\"\r\n                checked={loo[q.property] === false}\r\n                onChange={this.handleTriStateChange}\r\n                data-testid={`${q.property}:no`}\r\n              />\r\n              <input\r\n                name={q.property}\r\n                className={styles.questionnaireCol}\r\n                type=\"radio\"\r\n                value=\"\"\r\n                aria-labelledby=\"unknown\"\r\n                checked={loo[q.property] === ''}\r\n                onChange={this.handleTriStateChange}\r\n                data-testid={`${q.property}:unknown`}\r\n              />\r\n            </fieldset>\r\n          ))}\r\n        </div>\r\n\r\n        <label>\r\n          Fee?\r\n          <input\r\n            name=\"fee\"\r\n            type=\"text\"\r\n            className={controls.text}\r\n            value={loo.fee === null ? '' : loo.fee}\r\n            placeholder=\"The amount e.g. £0.10\"\r\n            onChange={this.handleChange}\r\n            data-testid=\"fee\"\r\n          />\r\n        </label>\r\n\r\n        <label>\r\n          Any notes?\r\n          <textarea\r\n            name=\"notes\"\r\n            className={controls.text}\r\n            value={loo.notes === null ? '' : loo.notes}\r\n            onChange={this.handleChange}\r\n            data-testid=\"notes\"\r\n          />\r\n        </label>\r\n\r\n        <h3 className={headings.regular}>Data for this toilet</h3>\r\n\r\n        <div className={styles.data}>\r\n          <label>\r\n            Latitude\r\n            <input\r\n              type=\"text\"\r\n              name=\"geometry.coordinates.0\"\r\n              className={controls.text}\r\n              value={center.lat}\r\n              readOnly={true}\r\n            />\r\n          </label>\r\n\r\n          <label>\r\n            Longitude\r\n            <input\r\n              type=\"text\"\r\n              name=\"geometry.coordinates.1\"\r\n              className={controls.text}\r\n              data-testid=\"loo-name\"\r\n              value={center.lng}\r\n              readOnly={true}\r\n            />\r\n          </label>\r\n        </div>\r\n\r\n        <div className={controls.btnStack}>\r\n          {this.isDerived() ? (\r\n            <input\r\n              type=\"submit\"\r\n              className={controls.btn}\r\n              onClick={this.save}\r\n              value=\"Update the toilet\"\r\n              disabled={_.isEmpty(this.getNovelInput())}\r\n            />\r\n          ) : (\r\n            <input\r\n              type=\"submit\"\r\n              className={controls.btn}\r\n              onClick={this.save}\r\n              value=\"Add the toilet\"\r\n              data-testid=\"add-the-toilet\"\r\n            />\r\n          )}\r\n\r\n          {this.isDerived() && (\r\n            <Link\r\n              to={`/loos/${this.props.loo._id}/remove`}\r\n              className={controls.btnCaution}\r\n            >\r\n              Remove the toilet\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return (\r\n      <NearestLooMap\r\n        loo={this.props.loo}\r\n        highlight\r\n        mapProps={{\r\n          showLocation: false,\r\n          showSearchControl: true,\r\n          showLocateControl: false,\r\n          preventDragging: false,\r\n          minZoom: config.editMinZoom,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (this.props.match.params.id && !this.props.loo) {\r\n      return (\r\n        <PageLayout\r\n          main={<Loading message={'Fetching Toilet Data'} />}\r\n          map={<Loading message={'Fetching Toilet Data'} />}\r\n        />\r\n      );\r\n    }\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nAddEditPage.propTypes = {\r\n  // If provided, the form will be in 'edit' mode and populated against the loo instance.\r\n  // The absence of a loo results in the form being in 'add' mode.\r\n  loo: PropTypes.object,\r\n};\r\n\r\n/**\r\n * Only keep fields in loo that are different to their corresponding field in\r\n * from.\r\n *\r\n * This is used to only submit novel or differing information in reports.\r\n */\r\nfunction onlyChanges(loo, from) {\r\n  return _.transform(loo, (acc, value, key) => {\r\n    if (_.isObject(value)) {\r\n      // Deeply compare\r\n      const nestedChanges = onlyChanges(value, from[key]);\r\n      if (!_.isEmpty(nestedChanges)) {\r\n        acc[key] = nestedChanges;\r\n      }\r\n    } else if (value !== from[key]) {\r\n      // Only keep a value in loo if it is changed\r\n      acc[key] = value;\r\n    }\r\n  });\r\n}\r\n\r\nvar mapStateToProps = (state, ownProps) => {\r\n  let loo = state.loos.byId[ownProps.match.params.id] || null;\r\n  return {\r\n    app: state.app,\r\n    map: state.mapControls,\r\n    geolocation: state.geolocation,\r\n    loo: loo,\r\n    key: loo ? loo._id : 'newLoo',\r\n  };\r\n};\r\n\r\nvar mapDispatchToProps = {\r\n  actionReportRequest,\r\n  actionFindByIdRequest,\r\n  actionHighlight,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(AddEditPage);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport config from '../config';\r\n\r\nimport { actionLogin } from '../redux/modules/auth';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\n\r\nimport layout from '../components/css/layout.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nclass LoginPage extends Component {\r\n  renderMain() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className={layout.controls}>\r\n            {config.showBackButtons && (\r\n              <button\r\n                onClick={this.props.history.goBack}\r\n                className={controls.btn}\r\n              >\r\n                Back\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <h2 className={headings.large}>Hello! What's your name?</h2>\r\n\r\n        <p>Before you can contribute data we'll need to know who to thank.</p>\r\n        <p>\r\n          We'll only store the first part of the email address you give us\r\n          against the data you contribute.\r\n        </p>\r\n        <p>Login or sign up to let us know you're real.</p>\r\n\r\n        <div className={controls.btnStack}>\r\n          <button onClick={this.props.doLogin} className={controls.btn}>\r\n            Log In/Sign Up\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return <NearestLooMap />;\r\n  }\r\n\r\n  render() {\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nvar mapStateToProps = state => ({\r\n  app: state.app,\r\n});\r\n\r\nvar mapDispatchToProps = {\r\n  doLogin: actionLogin,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(LoginPage);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport config, { PREFERENCES_KEY } from '../config';\r\n\r\n/* Note this approach will be deprecated in the future */\r\nimport update from 'react-addons-update';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\nimport DismissableBox from '../components/DismissableBox';\r\nimport Notification from '../components/Notification';\r\n\r\nimport styles from './css/preferences-page.module.css';\r\nimport layout from '../components/css/layout.module.css';\r\nimport helpers from '../css/helpers.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nimport accessibleIcon from '../images/pref-accessible.svg';\r\nimport freeIcon from '../images/pref-cost.svg';\r\nimport openIcon from '../images/pref-open.svg';\r\nimport maleIcon from '../images/pref-male.svg';\r\nimport femaleIcon from '../images/pref-female.svg';\r\nimport babychangingIcon from '../images/pref-babychanging.svg';\r\n\r\nclass PreferencesPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      unsavedPreferences: {},\r\n      savedPreferences: config.getSettings(PREFERENCES_KEY),\r\n    };\r\n\r\n    this.preferenceMap = [\r\n      {\r\n        name: 'free',\r\n        image: freeIcon,\r\n        label: 'Free',\r\n      },\r\n      {\r\n        name: 'accessible',\r\n        image: accessibleIcon,\r\n        label: 'Accessible',\r\n      },\r\n      {\r\n        name: 'open',\r\n        image: openIcon,\r\n        label: 'Open Now',\r\n      },\r\n      {\r\n        name: 'male',\r\n        image: maleIcon,\r\n        label: 'Male',\r\n      },\r\n      {\r\n        name: 'female',\r\n        image: femaleIcon,\r\n        label: 'Female',\r\n      },\r\n      {\r\n        name: 'babychanging',\r\n        image: babychangingIcon,\r\n        label: 'Baby Changing',\r\n      },\r\n    ];\r\n\r\n    this.save = this.save.bind(this);\r\n    this.updateSelection = this.updateSelection.bind(this);\r\n  }\r\n\r\n  updateSelection(event) {\r\n    // Fallback to `undefined` instead of `false` so we unset the data as opposed to\r\n    // storing a non-truthy value\r\n    var newVal = event.target.checked || undefined;\r\n\r\n    // Update state using React's immutable helper addon\r\n    var newState = update(this.state, {\r\n      unsavedPreferences: {\r\n        [event.target.name]: { $set: newVal },\r\n      },\r\n\r\n      // Reset updated state until `save` is called\r\n      updated: { $set: false },\r\n    });\r\n\r\n    this.setState(newState);\r\n  }\r\n\r\n  save() {\r\n    // `Object.assign` to avoid potentially state mutation\r\n    var preferences = Object.assign({}, this.state.unsavedPreferences);\r\n\r\n    for (let key in preferences) {\r\n      if (preferences.hasOwnProperty(key)) {\r\n        config.setSetting(PREFERENCES_KEY, key, preferences[key]);\r\n      }\r\n    }\r\n\r\n    // Reset unsaved preferences collection\r\n    this.setState({\r\n      unsavedPreferences: {},\r\n      updated: true,\r\n    });\r\n  }\r\n\r\n  isDirty() {\r\n    return Object.keys(this.state.unsavedPreferences).length !== 0;\r\n  }\r\n\r\n  renderMain() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className={layout.controls}>\r\n            {config.showBackButtons && (\r\n              <button\r\n                onClick={this.props.history.goBack}\r\n                className={controls.btn}\r\n              >\r\n                Back\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <DismissableBox\r\n          persistKey=\"preferences-intro\"\r\n          title=\"Preferences\"\r\n          content={`Highlight toilet features that matter to you. Toilets with these\r\n                        features will be indicated for you. Toilets lacking crucial features will\r\n                        appear in red.`}\r\n        />\r\n\r\n        <h2 className={headings.large}>My Toilet Preferences</h2>\r\n\r\n        <div className={styles.preferences}>\r\n          {/* This checkbox style is also used in the CookieBox component. */}\r\n          {this.preferenceMap.map(preference => (\r\n            <label key={preference.name} className={controls.preferenceWrapper}>\r\n              <input\r\n                className={controls.preferenceInput}\r\n                type=\"checkbox\"\r\n                name={preference.name}\r\n                onChange={this.updateSelection}\r\n                defaultChecked={this.state.savedPreferences[preference.name]}\r\n              />\r\n              <span className={controls.preference}>\r\n                <img\r\n                  alt={preference.name}\r\n                  className={controls.preferenceImage}\r\n                  src={preference.image}\r\n                />\r\n                <span>{preference.label}</span>\r\n              </span>\r\n            </label>\r\n          ))}\r\n        </div>\r\n\r\n        {this.state.updated && (\r\n          <Notification>\r\n            <h3 className={helpers.visuallyHidden}>Saved</h3>\r\n            <p>Your preferences have been updated.</p>\r\n          </Notification>\r\n        )}\r\n\r\n        <button\r\n          className={controls.btn}\r\n          onClick={this.save}\r\n          disabled={!this.isDirty()}\r\n        >\r\n          Save\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return <NearestLooMap />;\r\n  }\r\n\r\n  render() {\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nvar mapStateToProps = state => ({\r\n  app: state.app,\r\n});\r\n\r\nvar mapDispatchToProps = {};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PreferencesPage);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { actionFindByIdRequest } from '../redux/modules/loos';\r\nimport { actionHighlight } from '../redux/modules/mapControls';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport Loading from '../components/Loading';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\n\r\nimport layout from '../components/css/layout.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nimport config from '../config';\r\n\r\nfunction constructCampaignLink(loo, email = '') {\r\n  let coords = loo.properties.geometry.coordinates.join(',');\r\n  let name = loo.properties.name || '';\r\n  let opening = loo.properties.opening || '';\r\n  return `https://docs.google.com/forms/d/e/1FAIpQLScMvkjoE68mR1Z-yyVH7YhdndHCd_k8QwbugwfbqgZGUr_DvQ/viewform?emailAddress=${encodeURIComponent(\r\n    email\r\n  )}&entry.975653982=${encodeURIComponent(\r\n    coords\r\n  )}&entry.688810578=${encodeURIComponent(\r\n    name\r\n  )}&entry.1574991632=${encodeURIComponent(opening)}`;\r\n}\r\n\r\nclass ThanksPage extends Component {\r\n  componentDidMount() {\r\n    if (!this.props.loo) {\r\n      this.props.actionFindByIdRequest(this.props.match.params.id);\r\n    }\r\n    this.props.actionHighlight(this.props.match.params.id);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    // Support navigation _between_ loo pages\r\n    if (this.props.match.params.id !== prevProps.match.params.id) {\r\n      if (!this.props.loo) {\r\n        this.props.actionFindByIdRequest(this.props.match.params.id);\r\n      }\r\n      this.props.actionHighlight(this.props.match.params.id);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // Clear any marker highlighting when navigating away\r\n    this.props.actionHighlight(null);\r\n  }\r\n\r\n  renderMain() {\r\n    let { loo, name } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className={layout.controls}>\r\n            {config.showBackButtons && (\r\n              <button\r\n                onClick={this.props.history.goBack}\r\n                className={controls.btn}\r\n              >\r\n                Back\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <h2 id=\"thanks\" className={headings.regular}>\r\n          Thank You!\r\n        </h2>\r\n        <p>Thanks for the information you've provided.</p>\r\n        <p>\r\n          We rely on contributions of data like yours to keep the map accurate\r\n          and useful.\r\n        </p>\r\n        <p>Please consider signing up with our sponsor's campaign.</p>\r\n        <a\r\n          className={controls.btnFeatured}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          href={constructCampaignLink(loo, name)}\r\n        >\r\n          Join the <strong>Use Our Loos</strong> campaign\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return (\r\n      <NearestLooMap\r\n        loo={this.props.loo}\r\n        mapProps={{\r\n          showLocation: false,\r\n          showSearchControl: false,\r\n          showLocateControl: false,\r\n          showCenter: false,\r\n          countLimit: null,\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.loo) {\r\n      return (\r\n        <PageLayout\r\n          main={<Loading message={'Fetching Toilet Data'} />}\r\n          map={<Loading message={'Fetching Toilet Data'} />}\r\n        />\r\n      );\r\n    }\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nvar mapStateToProps = (state, ownProps) => ({\r\n  app: state.app,\r\n  loo: state.loos.byId[ownProps.match.params.id] || null,\r\n  name: state.auth.name,\r\n});\r\n\r\nvar mapDispatchToProps = {\r\n  actionFindByIdRequest,\r\n  actionHighlight,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ThanksPage);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport MediaQuery from 'react-responsive';\r\nimport _ from 'lodash';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\nimport LooListItem from '../components/LooListItem';\r\nimport Notification from '../components/Notification';\r\n\r\nimport styles from './css/map-page.module.css';\r\nimport toiletMap from '../components/css/loo-map.module.css';\r\nimport layout from '../components/css/layout.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nimport {\r\n  actionHighlight,\r\n  actionUpdateCenter,\r\n} from '../redux/modules/mapControls';\r\nimport { actionToggleViewMode } from '../redux/modules/app';\r\nimport { actionLogin, actionLogout } from '../redux/modules/auth';\r\n\r\nimport config from '../config';\r\n\r\nexport class MapPage extends Component {\r\n  positionFromRouter() {\r\n    return {\r\n      lat: parseFloat(this.props.match.params.lat),\r\n      lng: parseFloat(this.props.match.params.lng),\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.actionUpdateCenter(this.positionFromRouter());\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // Clear any marker highlighting when navigating away\r\n    this.props.actionHighlight(null);\r\n  }\r\n\r\n  renderList(mobile) {\r\n    var loos = this.props.loos;\r\n\r\n    // Loading - either this is the first query of the user or they are on a\r\n    // mobile and so can't rely on the map's loading spinner to know the loos\r\n    // they see are outdated\r\n    if (!loos || (this.props.loadingNearby && mobile)) {\r\n      return (\r\n        <Notification>\r\n          <p>Fetching toilets&hellip;</p>\r\n        </Notification>\r\n      );\r\n    }\r\n\r\n    // No results\r\n    if (loos && !loos.length) {\r\n      return (\r\n        <Notification>\r\n          <p>\r\n            No toilets found within {config.nearestRadius / 1000}\r\n            km.\r\n          </p>\r\n        </Notification>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <h2 className={headings.large}>Nearest Toilets</h2>\r\n        <ul className={styles.looList}>\r\n          {loos &&\r\n            loos.slice(0, config.nearestListLimit).map((loo, i) => (\r\n              <li key={loo._id} className={styles.looListItem}>\r\n                <LooListItem\r\n                  loo={loo}\r\n                  onHoverStart={_.partial(this.props.actionHighlight, loo._id)}\r\n                  onHoverEnd={_.partial(this.props.actionHighlight, undefined)}\r\n                  index={i + 1}\r\n                />\r\n              </li>\r\n            ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMain() {\r\n    var mode = this.props.app.viewMode;\r\n\r\n    return (\r\n      <div className={styles.container}>\r\n        {/* Logged in message */}\r\n        {this.props.isAuthenticated && (\r\n          <Notification>\r\n            <p>\r\n              Logged in. <button onClick={this.props.doLogout}>Log out</button>\r\n            </p>\r\n          </Notification>\r\n        )}\r\n\r\n        <div className={layout.controls}>\r\n          {config.allowAddEditLoo && (\r\n            <Link to=\"/report\" className={controls.btn}>\r\n              Add a toilet\r\n            </Link>\r\n          )}\r\n\r\n          <MediaQuery maxWidth={config.viewport.mobile}>\r\n            <button\r\n              className={controls.btn}\r\n              onClick={this.props.actionToggleViewMode}\r\n            >\r\n              {mode === 'list' ? 'View map' : 'View list'}\r\n            </button>\r\n          </MediaQuery>\r\n        </div>\r\n\r\n        <MediaQuery\r\n          maxWidth={config.viewport.mobile}\r\n          className={styles.mobileContent}\r\n        >\r\n          {mode === 'list' && this.renderList(true)}\r\n          {mode === 'map' && (\r\n            <div className={styles.mobileMap}>\r\n              <div className={toiletMap.map}>{this.renderMap()}</div>\r\n            </div>\r\n          )}\r\n        </MediaQuery>\r\n        <MediaQuery minWidth={config.viewport.mobile}>\r\n          {this.renderList(false)}\r\n        </MediaQuery>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return (\r\n      <NearestLooMap\r\n        mapProps={{ initialPosition: this.positionFromRouter() }}\r\n        numberNearest\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nMapPage.propTypes = {\r\n  loos: PropTypes.array,\r\n};\r\n\r\nvar mapStateToProps = state => ({\r\n  geolocation: state.geolocation,\r\n  mapControls: state.mapControls,\r\n  loos: state.loos.nearby,\r\n  app: state.app,\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n  loadingNearby: state.loos.loadingNearby,\r\n});\r\n\r\nvar mapDispatchToProps = {\r\n  actionHighlight,\r\n  actionUpdateCenter,\r\n  actionToggleViewMode,\r\n  doLogout: actionLogout,\r\n  doLogin: actionLogin,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withRouter(MapPage));\r\n","import React, { Component } from 'react';\r\n\r\nimport config from '../config';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\n\r\nimport lists from '../css/lists.module.css';\r\nimport headings from '../css/headings.module.css';\r\nimport layout from '../components/css/layout.module.css';\r\nimport controls from '../css/controls.module.css';\r\nimport useOurLoosLogo from '../images/domestos_use_our_loos_logo.png';\r\n\r\nclass UseOurLoosPage extends Component {\r\n  renderMain() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className={layout.controls}>\r\n            {config.showBackButtons && (\r\n              <button\r\n                onClick={this.props.history.goBack}\r\n                className={controls.btn}\r\n              >\r\n                Back\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <img src={useOurLoosLogo} alt=\"Powered by Domestos\" />\r\n        <p>\r\n          <strong>Use Our Loos</strong> is the first national community toilet\r\n          scheme, created by the British Toilet Association, Domestos and the{' '}\r\n          <strong>Great British Public Toilet Map</strong>, with the ambition to\r\n          unlock the loos that are hidden in high street cafes, restaurants,\r\n          coffee shops and bars and open them up to the community.\r\n        </p>\r\n        <p>\r\n          We're inviting businesses to sign up and welcome everyone, customers\r\n          and non-customers, to use your loos. By joining our initiative, you\r\n          will:\r\n        </p>\r\n        <ul className={lists.inset}>\r\n          <li>\r\n            Receive a Domestos welcome pack with free products and discounts to\r\n            keep the toilet clean.\r\n          </li>\r\n          <li>\r\n            Receive Use Our Loos stickers and signage to proudly display your\r\n            commitment to the community.\r\n          </li>\r\n          <li>Get local support and liaison with the campaign manager.</li>\r\n          <li>\r\n            Get local fame and benefit from increased customers and a stronger\r\n            connection to your community.\r\n          </li>\r\n        </ul>\r\n\r\n        <p>\r\n          <strong>\r\n            <a href=\"https://goo.gl/forms/JRw6J7yoDe46YIB23\">\r\n              Register your interest here!\r\n            </a>\r\n          </strong>\r\n        </p>\r\n        <p>\r\n          If you have any questions please contact the Campaign Manager at{' '}\r\n          <a href=\"mailto:useourloos@gmail.com\">useourloos@gmail.com</a>\r\n        </p>\r\n        <p>\r\n          Please note you must be a representative of any business you sign up\r\n          to the scheme. Members of the public can help by encouraging their\r\n          local businesses to sign up.{' '}\r\n          <a\r\n            href=\"https://drive.google.com/file/d/1CPHj8nKAS7PS2mvUxrIwmHm2hAt9Vn2h/view?usp=sharing\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            You can find campaign materials here\r\n          </a>\r\n          .\r\n        </p>\r\n        <div className={layout.bandedSection}>\r\n          <div className={layout.bandedSectionText}>\r\n            <div className={layout.mainContainer}>\r\n              <h2 id=\"faq\" className={headings.regular}>\r\n                Use Our Loos FAQs\r\n              </h2>\r\n              <h3>Who Can Join The Scheme?</h3>\r\n              <p>Businesses of all sizes can join the scheme.</p>\r\n              <h3>What are the requirements of joining the scheme?</h3>\r\n              <p>\r\n                Participating businesses should allow customers and non\r\n                customers alike to access their toilet facilities during normal\r\n                opening hours and display stickers to make people aware of their\r\n                participation in the scheme. There is an expectation that\r\n                facilities will be maintained to acceptable standards of hygiene\r\n                and cleanliness.\r\n              </p>\r\n              <h3>Why was this scheme created?</h3>\r\n              <p>\r\n                Over the past two decades, the number of public toilets\r\n                available throughout the UK have been steadily reduced. There is\r\n                currently no legal requirement for local authorities to provide\r\n                toilets. This often leads to loos being closed if councils deem\r\n                they cannot afford the cost to maintain. This presents a\r\n                struggle for the many individuals and families who have a\r\n                greater need for access to public facilities; it’s also a basic\r\n                human need for us all. The Use Our Loos scheme has been designed\r\n                to bring the public loos back by opening more loos through\r\n                cafes, restaurants, and shops, where facilities already exist.\r\n              </p>\r\n              <p>\r\n                Community Toilet Schemes have been run successfully at a local\r\n                level across the country but the public are often unaware of\r\n                their existence. By bringing these schemes under one umbrella,\r\n                as well as welcoming new members we hope to increase the value\r\n                for everyone.\r\n              </p>\r\n              <h3>\r\n                Does this scheme aim to replace traditional public toilets?\r\n              </h3>\r\n              <p>\r\n                No. Purpose built public toilets serve an important role in\r\n                public life, and we will continue to encourage councils to\r\n                increase rather than cut provision. This scheme aims to find a\r\n                community-oriented solution to filling the gaps in current\r\n                provision.\r\n              </p>\r\n              <h3>\r\n                Can Businesses also participate in Local Community Toilet\r\n                Schemes?\r\n              </h3>\r\n              <p>\r\n                Yes! The Use Our Loos Campaign is not intended to replace\r\n                existing schemes run by local authorities. We aim to unite\r\n                existing schemes with a common and recognizable brand to enable\r\n                the public to access them more easily. For areas where local\r\n                schemes exist businesses are encouraged to sign up to both.\r\n              </p>\r\n              <h3>What if a dangerous situation arises in my loo?</h3>\r\n              <p>\r\n                Businesses reserve the right to manage situations as they would\r\n                with any customer to their establishment, including escalating\r\n                issues as needed.\r\n              </p>\r\n              <h3>What if I want to leave the scheme?</h3>\r\n              <p>\r\n                Businesses can leave the scheme at any time by contacting the\r\n                campaign manager and asking to be removed from the map.\r\n              </p>\r\n              <h3>Terms and Conditions</h3>\r\n              <p>\r\n                You can view the full project{' '}\r\n                <a href=\"https://drive.google.com/file/d/1lnTVYZWBc36W6J9YjLo1mB1bB4MIudOi/view?usp=sharing\">\r\n                  terms and conditions here\r\n                </a>\r\n                .\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return <NearestLooMap numberNearest />;\r\n  }\r\n\r\n  render() {\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nexport default UseOurLoosPage;\r\n","import React, { Component } from 'react';\r\n\r\nimport config from '../config';\r\n\r\nimport PageLayout from '../components/PageLayout';\r\nimport NearestLooMap from '../components/NearestLooMap';\r\n\r\nimport headings from '../css/headings.module.css';\r\nimport layout from '../components/css/layout.module.css';\r\nimport controls from '../css/controls.module.css';\r\n\r\nclass PrivacyPage extends Component {\r\n  renderMain() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          <div className={layout.controls}>\r\n            {config.showBackButtons && (\r\n              <button\r\n                onClick={this.props.history.goBack}\r\n                className={controls.btn}\r\n              >\r\n                Back\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <h2 id=\"privacy-policy\" className={headings.regular}>\r\n          Privacy Policy\r\n        </h2>\r\n        <h3>Visitors to the site</h3>\r\n        <p>\r\n          Cookies on The Great British Public Toilet Map website are used to\r\n          gather anonymous data such as which pages are viewed, what time the\r\n          visit occurred, if the visitor has been to the site before, and which\r\n          site referred the visitor to the web page etc.\r\n        </p>\r\n        <p>\r\n          Public Convenience Ltd also notes and saves information such as time\r\n          of day, browser type and content requested. That information is used\r\n          to provide more relevant services to users.\r\n        </p>\r\n        <p>\r\n          Any data collected automatically from visitors to our web sites\r\n          through the use of cookies will be used to improve the sites, and will\r\n          not and cannot be used to identify any visitor. Consent by site\r\n          visitors for this anonymous data to be collected and used by Public\r\n          Convenience Ltd and the Use Our Loos campaign for the purpose stated\r\n          above will be assumed by your continued navigation of this website.\r\n        </p>\r\n        <p>\r\n          We will not associate any data gathered from this site through\r\n          navigation and cookies with any personally identifying information\r\n          from any source. We may also log Internet Protocol (IP) address (but\r\n          nothing that directly identifies visitors) in order to receive and\r\n          send the required information over the internet.\r\n        </p>\r\n\r\n        <h3>Contributors to the site</h3>\r\n        <p>\r\n          Contributors to The Great British Public Toilet Map website are asked\r\n          to sign-in via the Auth0 platform using their email address. This\r\n          helps us to share data on the quantity and spread of contributions to\r\n          the site which helps show how the community value the project, to\r\n          improve our interfaces for our users, to protect our dataset from\r\n          misuse and to recognise contributions from a user if that user is\r\n          adding unsuitable content, whether intentionally or inadvertently.\r\n        </p>\r\n        <p>\r\n          A full list of a contributor’s activities will only be accessible to\r\n          Public Convenience Ltd and the Use Our Loos campaign manager, for\r\n          moderating the dataset. A contributor’s full email address will never\r\n          be disclosed or shared and is only visible to Public Convenience Ltd.\r\n        </p>\r\n\r\n        <h3>Public and Business Supporters of Use Our Loos campaign</h3>\r\n        <p>\r\n          Individuals and businesses who click the “Join the Use Our Loos\r\n          campaign” button on The Great British Public Toilet Map should have\r\n          the opportunity to consider the terms and conditions of the campaign\r\n          before completing the sign-up form there. The campaign is separate\r\n          from The Great British Public Toilet Map. Data added to the Use Our\r\n          Loos campaign is not stored or processed by Public Convenience Ltd.\r\n        </p>\r\n        <p>\r\n          If you'd like to know what we've stored about you, or ask us to forget\r\n          you, or to let us know about something you'd like changed please drop\r\n          us a line at{' '}\r\n          <a\r\n            href=\"mailto:gbtoiletmap@gmail.com\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            gbtoiletmap@gmail.com\r\n          </a>\r\n          . If you'd like to exercise any of your rights under the GDPR that's\r\n          the address to use.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderMap() {\r\n    return <NearestLooMap numberNearest />;\r\n  }\r\n\r\n  render() {\r\n    return <PageLayout main={this.renderMain()} map={this.renderMap()} />;\r\n  }\r\n}\r\n\r\nexport default PrivacyPage;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport styles from './css/notfound.module.css';\r\nimport Logo from '../components/Logo';\r\n\r\nexport default () => {\r\n  return (\r\n    <>\r\n      <div className={styles.bg} />\r\n      <div className={styles.main}>\r\n        <Logo />\r\n        <h1 className={styles.title}>Page not found</h1>\r\n        <p className={styles.info}>\r\n          This could be because the page has moved, or you typed an address\r\n          wrong.\r\n        </p>\r\n        <Link to=\"/\">\r\n          <button className={styles.homeBtn}>Take me back home!</button>\r\n        </Link>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import { takeLatest, call, put } from 'redux-saga/effects';\r\n\r\nimport {\r\n  GET_GEOLOCATION_REQUEST,\r\n  GET_GEOLOCATION_ERROR,\r\n  GET_GEOLOCATION_SUCCESS,\r\n  actions,\r\n} from '../modules/geolocation';\r\n\r\nimport { actionUpdateCenter } from '../modules/mapControls';\r\nimport config from '../../config';\r\n\r\nfunction* findGeolocation() {\r\n  function getGeolocation() {\r\n    return new Promise((resolve, reject) => {\r\n      navigator.geolocation.getCurrentPosition(resolve, reject);\r\n    });\r\n  }\r\n\r\n  if ('geolocation' in navigator) {\r\n    try {\r\n      var response = yield call(getGeolocation);\r\n      yield put(actions[GET_GEOLOCATION_SUCCESS](response));\r\n      var { longitude, latitude } = response.coords;\r\n      yield put(actionUpdateCenter({ lng: longitude, lat: latitude }));\r\n    } catch (error) {\r\n      yield put(actions[GET_GEOLOCATION_ERROR](error.message));\r\n      yield put(actionUpdateCenter(config.fallbackLocation));\r\n    }\r\n  } else {\r\n    yield put(actions[GET_GEOLOCATION_ERROR]('Geolocation is unavailable'));\r\n    yield put(actionUpdateCenter(config.fallbackLocation));\r\n  }\r\n}\r\n\r\nexport default function* geolocationSaga() {\r\n  yield takeLatest(GET_GEOLOCATION_REQUEST, findGeolocation);\r\n}\r\n","import _ from 'lodash';\r\nimport { takeLatest, select, put } from 'redux-saga/effects';\r\n\r\nimport {\r\n  UPDATE_CENTER,\r\n  actionUpdateCenterFinish,\r\n} from '../modules/mapControls';\r\nimport { actionFindNearbyRequest } from '../modules/loos';\r\n\r\nimport config from '../../config';\r\n\r\nexport const getCenter = state => state.mapControls.center;\r\n\r\nfunction* updateCenterSaga(action) {\r\n  const oldCenter = yield select(getCenter);\r\n  const newCenter = action.payload.center;\r\n\r\n  // Get nearby loos if we've moved\r\n  if (!_.isEqual(oldCenter, newCenter)) {\r\n    yield put(\r\n      actionFindNearbyRequest(\r\n        newCenter.lng,\r\n        newCenter.lat,\r\n        config.nearestRadius\r\n      )\r\n    );\r\n  }\r\n\r\n  // Change the actual center variable in the state\r\n  yield put(actionUpdateCenterFinish(newCenter));\r\n}\r\n\r\nexport default function* mapControlsSaga() {\r\n  yield takeLatest(UPDATE_CENTER, updateCenterSaga);\r\n}\r\n","// Polyfills\r\nimport 'core-js/fn/array/find';\r\nimport 'core-js/fn/array/includes';\r\nimport 'core-js/fn/string/repeat';\r\nimport 'core-js/fn/object/entries';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Router, Route, Switch } from 'react-router-dom';\r\nimport { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport createSagaMiddleware from 'redux-saga';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\n// Global CSS\r\nimport './css/global';\r\n\r\nimport App from './components/App';\r\nimport ProtectedRoute from './components/ProtectedRoute';\r\nimport AuthCallback from './pages/AuthCallback';\r\nimport LooPage from './pages/LooPage';\r\nimport RemovePage from './pages/RemovePage';\r\nimport HomePage from './pages/HomePage';\r\nimport AboutPage from './pages/AboutPage';\r\nimport AddEditPage from './pages/AddEditPage';\r\nimport LoginPage from './pages/LoginPage';\r\nimport PreferencesPage from './pages/PreferencesPage';\r\nimport ThanksPage from './pages/ThanksPage';\r\nimport MapPage from './pages/MapPage';\r\nimport UseOurLoosPage from './pages/UseOurLoosPage';\r\nimport PrivacyPage from './pages/PrivacyPage';\r\nimport NotFound from './pages/404';\r\n\r\n// Redux reducers\r\nimport appReducer from './redux/modules/app';\r\nimport geolocationReducer from './redux/modules/geolocation';\r\nimport loosReducer from './redux/modules/loos';\r\nimport mapControlsReducer from './redux/modules/mapControls';\r\nimport authReducer from './redux/modules/auth';\r\n\r\n// Redux sagas\r\nimport geolocationSaga from './redux/sagas/geolocation';\r\nimport makeLoosSaga from './redux/sagas/loos';\r\nimport makeAuthSaga from './redux/sagas/auth';\r\nimport mapControlsSaga from './redux/sagas/mapControls';\r\n\r\nimport history from './history';\r\nimport Auth from './Auth';\r\nconst auth = new Auth();\r\n\r\nconst rootReducer = combineReducers({\r\n  app: appReducer,\r\n  auth: authReducer,\r\n  geolocation: geolocationReducer,\r\n  loos: loosReducer,\r\n  mapControls: mapControlsReducer,\r\n});\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst middleware = applyMiddleware(sagaMiddleware);\r\n\r\nconst devTools =\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__();\r\n\r\nconst initialState = {};\r\n\r\nconst store = middleware(createStore)(rootReducer, initialState, devTools);\r\n\r\n// Run sagas\r\nsagaMiddleware.run(makeAuthSaga(auth));\r\nsagaMiddleware.run(geolocationSaga);\r\nsagaMiddleware.run(makeLoosSaga(auth));\r\nsagaMiddleware.run(mapControlsSaga);\r\n\r\n// Create an enhanced history that syncs navigation events with the store\r\n\r\nconst startApp = () => {\r\n  if (typeof document !== 'undefined') {\r\n    ReactDOM.render(\r\n      <Provider store={store}>\r\n        <Router history={history} forceRefresh={false}>\r\n          <App>\r\n            <Switch>\r\n              <Route exact path=\"/index.html\" component={HomePage} />\r\n              <Route exact path=\"/preferences\" component={PreferencesPage} />\r\n              <Route exact path=\"/about\" component={AboutPage} />\r\n              <Route exact path=\"/privacy\" component={PrivacyPage} />\r\n              <Route exact path=\"/use-our-loos\" component={UseOurLoosPage} />\r\n              <Route path=\"/loos/:id\" exact component={LooPage} />\r\n              <Route path=\"/login\" component={LoginPage} />\r\n              <Route path=\"/map/:lng/:lat\" component={MapPage} />\r\n              <Route\r\n                exact\r\n                path=\"/callback\"\r\n                render={props => <AuthCallback auth={auth} {...props} />}\r\n              />\r\n              <ProtectedRoute\r\n                exact\r\n                path=\"/report\"\r\n                component={AddEditPage}\r\n                auth={auth}\r\n              />\r\n              <ProtectedRoute\r\n                path=\"/loos/:id/edit\"\r\n                component={AddEditPage}\r\n                auth={auth}\r\n              />\r\n              <ProtectedRoute\r\n                path=\"/loos/:id/remove\"\r\n                component={RemovePage}\r\n                auth={auth}\r\n              />\r\n              <ProtectedRoute\r\n                path=\"/loos/:id/thanks\"\r\n                component={ThanksPage}\r\n                auth={auth}\r\n              />\r\n              <Route component={NotFound} />\r\n            </Switch>\r\n          </App>\r\n        </Router>\r\n      </Provider>,\r\n      document.getElementById('root')\r\n    );\r\n    serviceWorker.register();\r\n  }\r\n}\r\n\r\nif(window.cordova) {\r\n  document.addEventListener('deviceready', startApp, false);\r\n} else {\r\n  startApp()\r\n}\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\n\r\n","import { all, takeLatest, call, put } from 'redux-saga/effects';\r\nimport history from '../../history';\r\n\r\nimport { LOGIN, LOGOUT, actionLoggedIn } from '../modules/auth';\r\n\r\nexport default function makeAuthSaga(auth) {\r\n  function* doLogin() {\r\n    yield call(auth.login);\r\n  }\r\n\r\n  function* doLogout() {\r\n    yield call(auth.logout);\r\n    yield put(actionLoggedIn(false));\r\n    yield call(history.push, '/');\r\n  }\r\n\r\n  return function* authSaga() {\r\n    yield all([takeLatest(LOGIN, doLogin), takeLatest(LOGOUT, doLogout)]);\r\n  };\r\n}\r\n","import { all, takeLatest, call, put, select, take } from 'redux-saga/effects';\r\nimport history from '../../history';\r\n\r\nimport api from '@toiletmap/api-client';\r\n\r\nimport {\r\n  FIND_NEARBY_REQUEST,\r\n  FIND_NEARBY_SUCCESS,\r\n  FIND_BY_ID_REQUEST,\r\n  REPORT_REQUEST,\r\n  REMOVE_REQUEST,\r\n  actionFindNearbyRequest,\r\n  actionFindNearbyStart,\r\n  actionFindNearbySuccess,\r\n  actionFindByIdSuccess,\r\n  actionReportSuccess,\r\n  actionRemoveSuccess,\r\n  actionUncacheById,\r\n} from '../modules/loos';\r\n\r\nimport { getCenter } from './mapControls';\r\n\r\nexport default function makeLoosSaga(auth) {\r\n  function* findNearbyLoosSaga(action) {\r\n    yield put(actionFindNearbyStart());\r\n    var { lng, lat, radius } = action.payload;\r\n    var loos = yield call([api, api.findLoos], lng, lat, radius);\r\n    yield put(actionFindNearbySuccess(loos));\r\n  }\r\n  function* findLooByIdSaga(action) {\r\n    var loo = yield call([api, api.findLooById], action.payload.id);\r\n    yield put(actionFindByIdSuccess(loo));\r\n  }\r\n\r\n  function* report(action) {\r\n    const { loo, from } = action.payload;\r\n\r\n    const ids = yield call(\r\n      [api, api.reportLoo],\r\n      loo,\r\n      auth.getAccessToken(),\r\n      from\r\n    );\r\n\r\n    yield put(actionReportSuccess(ids));\r\n    yield put(actionUncacheById(ids.loo));\r\n    let center = yield select(getCenter);\r\n    yield put(actionFindNearbyRequest(center.lng, center.lat));\r\n    yield take(FIND_NEARBY_SUCCESS);\r\n    return yield call(history.push, `/loos/${ids.loo}/thanks`);\r\n  }\r\n\r\n  function* remove(action) {\r\n    const { looId, reason } = action.payload;\r\n    const result = yield call(\r\n      [api, api.removeLoo],\r\n      looId,\r\n      reason,\r\n      auth.getAccessToken()\r\n    );\r\n    yield put(actionRemoveSuccess(result));\r\n    return yield call(history.push, `/`);\r\n  }\r\n\r\n  return function* loosSaga() {\r\n    yield all([\r\n      takeLatest(FIND_NEARBY_REQUEST, findNearbyLoosSaga),\r\n      takeLatest(FIND_BY_ID_REQUEST, findLooByIdSaga),\r\n      takeLatest(REPORT_REQUEST, report),\r\n      takeLatest(REMOVE_REQUEST, remove),\r\n    ]);\r\n  };\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"colors\":\"'../../css/colors.css'\",\"colorLinkActive\":\"#165016\",\"colorBackground\":\"#1a1a1a\",\"footer\":\"footer_footer__2L8xe\",\"footerList\":\"footer_footerList__22cFV\",\"footerListItem\":\"footer_footerListItem__2ewf5\",\"footerItemText\":\"footer_footerItemText__hl7AF\",\"footerItem\":\"footer_footerItem__2WCFP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"questionnaire\":\"edit-loo-page_questionnaire__U3aFW\",\"questionnaireGroup\":\"edit-loo-page_questionnaireGroup__1bMjl\",\"questionnaireCol\":\"edit-loo-page_questionnaireCol__1ZjW-\",\"data\":\"edit-loo-page_data__2OTQS\",\"mobileMap\":\"edit-loo-page_mobileMap__16Xw9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"logo_wrapper__1GteU\",\"image\":\"logo_image__3G1hZ\",\"title\":\"logo_title__y1NQR\",\"newimage\":\"logo_newimage__34iDG\",\"useOurLoosLogoImage\":\"logo_useOurLoosLogoImage__bUDHV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mobileMap\":\"loo-page_mobileMap__1bKGc\",\"controls\":\"loo-page_controls__2Nreg\",\"properties\":\"loo-page_properties__1P4nH\",\"property\":\"loo-page_property__2DtOc\",\"properyName\":\"loo-page_properyName__12Vtl\",\"propertyValue\":\"loo-page_propertyValue__K-FRG\",\"preferenceIndicators\":\"loo-page_preferenceIndicators__16-Fi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"distance\":\"loo-list-item_distance__elyng\",\"container\":\"loo-list-item_container__Itl1m\",\"link\":\"loo-list-item_link__13FFE\",\"linkText\":\"loo-list-item_linkText__1jT-i\",\"preferenceIndicators\":\"loo-list-item_preferenceIndicators__G9CRx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"home-page_container__ZVtKd\",\"looList\":\"home-page_looList__286Wt\",\"looListItem\":\"home-page_looListItem__1cWc3\",\"mapToggle\":\"home-page_mapToggle__16NG7 controls_btnSmall__2Cuv_ controls_btn__12gn5\",\"mobileContent\":\"home-page_mobileContent__1KzQN\",\"mobileMap\":\"home-page_mobileMap__2iGpj\",\"marker\":\"home-page_marker__13Bg_\",\"count\":\"home-page_count__1tScv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"map-page_container__MS3Nq\",\"looList\":\"map-page_looList__36Jbc\",\"looListItem\":\"map-page_looListItem__1zdlb\",\"mapToggle\":\"map-page_mapToggle__3SqaF controls_btnSmall__2Cuv_ controls_btn__12gn5\",\"mobileContent\":\"map-page_mobileContent__8bGby\",\"mobileMap\":\"map-page_mobileMap__3EvTT\",\"marker\":\"map-page_marker__Syv4f\",\"count\":\"map-page_count__1oSia\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bg\":\"notfound_bg__2l0jS\",\"main\":\"notfound_main__1S0k-\",\"title\":\"notfound_title__huNzH\",\"info\":\"notfound_info__2iMuY\",\"homeBtn\":\"notfound_homeBtn__2-vy0 controls_btn__12gn5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inset\":\"lists_inset__2XYl_\",\"items\":\"lists_items__3X3Jf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"colors\":\"'./colors.css'\",\"colorButton\":\"#217821\",\"colorButtonDisabled\":\"#808080\",\"colorButtonActive\":\"#146b14\",\"colorButtonFeatured\":\"#55acee\",\"colorButtonFeaturedActive\":\"#489fe1\",\"colorButtonCaution\":\"#c00\",\"colorButtonCautionActive\":\"#b30000\",\"colorSelected\":\"#d1e567\",\"btn\":\"controls_btn__12gn5\",\"btnSmall\":\"controls_btnSmall__2Cuv_ controls_btn__12gn5\",\"btnFeatured\":\"controls_btnFeatured__3qGH5 controls_btn__12gn5\",\"btnCaution\":\"controls_btnCaution__7cGvD controls_btn__12gn5\",\"btnStack\":\"controls_btnStack__FbP-v\",\"text\":\"controls_text__w6vV-\",\"dropdown\":\"controls_dropdown__A8N7H controls_text__w6vV-\",\"preferenceWrapper\":\"controls_preferenceWrapper__2Qa2O\",\"preference\":\"controls_preference__yG4za controls_btn__12gn5\",\"preferenceInput\":\"controls_preferenceInput__3D8bc\",\"preferenceImage\":\"controls_preferenceImage__plqFY\"};","var _require = require('luxon'),\n    DateTime = _require.DateTime;\n\nvar definitions = [{\n  name: '24/7',\n  value: '24/7',\n  check: function check() {\n    return true;\n  }\n}, {\n  name: 'Business hours, Mon-Sun',\n  value: '09:00-17:00',\n  check: function check(dt) {\n    return dt.hour >= 9 && dt.hour <= 17;\n  }\n}, {\n  name: 'Business hours, Mon-Fri',\n  value: 'Mo-Fr 09:00-17:00',\n  check: function check(dt) {\n    return dt.weekday >= 1 && dt.weekday <= 5 && dt.hour >= 9 && dt.hour <= 17;\n  }\n}, {\n  name: 'Evening only',\n  value: '17:00-00:00',\n  check: function check(dt) {\n    return dt.hour >= 17 && dt.hour <= 23;\n  }\n}, {\n  name: 'Daylight hours only',\n  value: '09:00-18:00',\n  check: function check(dt) {\n    return dt.hour >= 9 && dt.hour <= 18;\n  }\n}];\n\nfunction isOpen(openingHours) {\n  var dt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DateTime.local();\n  var def = definitions.find(function (d) {\n    return d.value === openingHours;\n  });\n\n  if (!def) {\n    return null;\n  }\n\n  return def.check(dt);\n}\n\nmodule.exports = {\n  definitions: definitions,\n  isOpen: isOpen\n};","module.exports = __webpack_public_path__ + \"static/media/domestos_use_our_loos_logo.ee86e081.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"visuallyHidden\":\"helpers_visuallyHidden__oEoMZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preferenceIndicator\":\"preference-indicators_preferenceIndicator__2LhJZ\",\"preferenceIndicatorLarge\":\"preference-indicators_preferenceIndicatorLarge__2fm12\",\"preferenceIndicatorYes\":\"preference-indicators_preferenceIndicatorYes__2mGUw preference-indicators_preferenceIndicator__2LhJZ\",\"preferenceIndicatorNo\":\"preference-indicators_preferenceIndicatorNo__6F43a preference-indicators_preferenceIndicator__2LhJZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"dismissable-box_container__1qmyb\",\"title\":\"dismissable-box_title__3DIql headings_large__3M1FA\",\"close\":\"dismissable-box_close__1EcSp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"cookie-box-button_btn__1Bn-h controls_btn__12gn5\",\"cookieButtonWrapper\":\"cookie-box-button_cookieButtonWrapper__33K__\"};"],"sourceRoot":""}